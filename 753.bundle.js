(self.webpackChunk_react_awesome_query_builder_examples=self.webpackChunk_react_awesome_query_builder_examples||[]).push([[753],{53004:(e,t,r)=>{"use strict";r.d(t,{b$:()=>Le});var n=r(45233),o=r(29901),i=r(65633),a=r(67609),l=r(934),u=r(69076),s=r(40795),c=r(5248),p=r(37592),f=r(88356),d=r(30207),g=r(38341),v=r(52107),h=r(6901),m=r.n(h),y=r(30420),b=r(45016),O=r(73352),w=r.n(O),j=r(7470),F=j.cQ.ListUtils.mapListValues,S=r(16867),C=r(49639),E=["width"],L=r(12712),k=r(92437),P=["width"],_=r(13865),V=r(32720),Z=r(76547),R=r(7654),D=r(68195),x=j.cQ.ListUtils.mapListValues,T=r(97351),A=r(22972),N=r(19473),I=r(91138),q=r(87943),M=r(49289),W=r(18074),B=r(20651),G=["width"];function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var $=j.Px.h,J=o.createElement(W.Z,{fontSize:"small",style:{marginRight:10,marginTop:4}}),Y=o.createElement(B.Z,{fontSize:"small",style:{marginRight:10,marginTop:4}}),H=(0,T.D)(),K=[];const Q=function(e){var t=e.allowCustomValues,r=e.multiple,n=e.value,i=e.customProps,a=e.readonly,l=e.config,u=e.groupBy,s=e.filterOptionsConfig,d=s?(0,T.D)(s):H,g=$(e,{debounceTimeout:100,multiple:r,uif:"mui"}),v=g.open,h=g.onOpen,m=g.onClose,y=g.onChange,b=g.onInputChange,O=g.inputValue,j=g.options,F=g.isInitialLoading,C=g.isLoading,E=g.aPlaceholder,L=g.extendOptions,k=g.getOptionSelected,P=g.getOptionDisabled,_=g.getOptionIsCustom,V=g.getOptionLabel,Z=g.selectedListValue,R=l.settings,D=R.defaultSelectWidth,x=R.defaultSearchWidth,W=i||{},B=W.width,z=(0,S.Z)(W,G),Q=z.input||{},X=Q.width||x;Q=w()(Q,["width"]);var ee=w()(z,["showSearch","showCheckboxes"]),te=B||D,re={width:r?void 0:te,minWidth:te},ne=a?"":E,oe=null!=n?n:r?K:null,ie=(0,M.Z)((function(e){return{input:{minWidth:X+" !important"}}})),ae=(0,M.Z)((function(e){return{root:{height:"auto"},label:{marginTop:"3px",marginBottom:"3px"}}}))(),le=ie();return o.createElement(f.Z,{fullWidth:!0},o.createElement(A.ZP,(0,c.Z)({disableCloseOnSelect:r,fullWidth:!0,multiple:r,style:re,classes:le,freeSolo:t,loading:F,open:v,onOpen:h,onClose:m,inputValue:O,onInputChange:b,label:ne,onChange:y,value:oe,getOptionSelected:k,disabled:a,readOnly:a,options:j,groupBy:u,getOptionLabel:V,getOptionDisabled:P,renderInput:function(e){var t,n=!r&&!v,i=null!==(t=null==Z?void 0:Z.title)&&void 0!==t?t:"",l=n?i:r&&!v?"":null!=O?O:"";return o.createElement(p.Z,(0,c.Z)({},e,{inputProps:U(U({},e.inputProps),{},{value:l}),InputProps:U(U({},e.InputProps),{},{readOnly:a,endAdornment:o.createElement(o.Fragment,null,C?o.createElement(N.Z,{color:"inherit",size:20}):null,e.InputProps.endAdornment)}),disabled:a,placeholder:ne},Q))},renderTags:function(e,t){return e.map((function(e,r){var n=_(e)?"customSelectOption":void 0,i=o.createElement("span",{className:n},V(e));return o.createElement(I.Z,(0,c.Z)({key:e.value,classes:ae,label:i,size:"small"},t({index:r})))}))},renderOption:function(e,t){var n=t.selected,i=e.title,a=e.renderTitle,l=(e.value,e.specialValue),u=e.isHidden,s=_(e)?"customSelectOption":void 0,c=o.createElement("span",{className:s},a||i);return u?null:r?l?o.createElement(q.Z,null,a||i):o.createElement(q.Z,null,n?Y:J,c):l?o.createElement(o.Fragment,null,a||i):o.createElement(o.Fragment,null,c)},filterOptions:function(e,t){var r=d(e,t);return L(r)}},ee)))};var X=r(73877),ee=["items","selectedKey","setField"];function te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function re(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?te(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):te(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ne=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.map((function(t){var n=t.items,o=t.path,i=t.label,a=t.disabled,l=t.grouplabel,u="  ".repeat(r);return n?e(n,r+1):{title:i,renderTitle:u+i,value:o,disabled:a,groupTitle:r>0?u+l:null}})).flat(1/0)},oe={stringify:function(e){return["title","value","grouplabel","label"].map((function(t){return"string"==typeof e[t]?e[t]:""})).join("\0")}},ie=r(17267),ae=r(69354),le=r(83374),ue=r(64002),se=r(7207),ce=r(30117),pe=r(92491),fe=r(24539),de=r(71939),ge=r(62978),ve=r(68e3),he=r(79865),me=r(60801),ye=(0,M.Z)((function(e){return{paper:{padding:e.spacing(1)}}}));const be={MaterialTextWidget:function(e){var t=e.value,r=e.setValue,n=(e.config,e.readonly),i=e.placeholder,a=e.customProps,l=e.maxLength,u=t||"";return o.createElement(f.Z,null,o.createElement(p.Z,(0,c.Z)({value:u,placeholder:n?"":i,InputProps:{readOnly:n},inputProps:{maxLength:l},disabled:n,onChange:function(e){var t=e.target.value;""===t&&(t=void 0),r(t)}},a)))},MaterialTextAreaWidget:function(e){var t=e.value,r=e.setValue,n=e.config,i=e.readonly,a=e.placeholder,l=e.customProps,u=e.maxLength,s=e.maxRows,d=e.fullWidth,g=n.settings.defaultMaxRows,v=t||"";return o.createElement(f.Z,{fullWidth:d},o.createElement(p.Z,(0,c.Z)({fullWidth:d,maxRows:s||g,multiline:!0,value:v,placeholder:i?"":a,InputProps:{readOnly:i},inputProps:{maxLength:u},disabled:i,onChange:function(e){var t=e.target.value;""===t&&(t=void 0),r(t)}},l)))},MaterialDateWidget:function(e){var t,r,n,i=e.value,a=e.setValue,l=e.readonly,u=e.customProps,s=e.dateFormat,p=e.valueFormat,g=e.placeholder,v=(null!==(t=window)&&void 0!==t&&t.matchMedia?null===(r=(n=window).matchMedia)||void 0===r?void 0:r.call(n,"(pointer:fine), (pointer:none)").matches:e.useKeyboard)?d.e:d.M;return o.createElement(f.Z,null,o.createElement(v,(0,c.Z)({readOnly:l,disabled:l,placeholder:l?"":g,format:s,value:i||null,onChange:function(e){a(function(e){return e&&e.isValid()?e.format(p):void 0}(e))}},u)))},MaterialDateTimeWidget:function(e){var t,r,n,i=e.value,a=e.setValue,l=e.use12Hours,u=e.readonly,s=e.placeholder,p=e.dateFormat,d=e.timeFormat,v=e.valueFormat,h=e.customProps,m=(null!==(t=window)&&void 0!==t&&t.matchMedia?null===(r=(n=window).matchMedia)||void 0===r?void 0:r.call(n,"(pointer:fine), (pointer:none)").matches:e.useKeyboard)?g.B:g.x,y=p+" "+d;return o.createElement(f.Z,null,o.createElement(m,(0,c.Z)({readOnly:u,disabled:u,ampm:!!l,placeholder:u?"":s,format:y,value:i||null,onChange:function(e){a(function(e){return e&&e.isValid()?e.format(v):void 0}(e))}},h)))},MaterialTimeWidget:function(e){var t,r,n,i=e.value,a=e.setValue,l=e.use12Hours,u=e.readonly,s=e.placeholder,p=e.timeFormat,d=e.valueFormat,g=e.customProps,h=(null!==(t=window)&&void 0!==t&&t.matchMedia?null===(r=(n=window).matchMedia)||void 0===r?void 0:r.call(n,"(pointer:fine), (pointer:none)").matches:e.useKeyboard)?v.e:v.j,y=-1!=p.indexOf(":ss"),b=i?m()(i,p):null;return o.createElement(f.Z,null,o.createElement(h,(0,c.Z)({readOnly:u,disabled:u,ampm:!!l,placeholder:u?"":s,format:p,value:b||null,onChange:function(e){a(function(e){return e&&e.isValid()?e.format(d):void 0}(e))},views:y?["hours","minutes","seconds"]:["hours","minutes"]},g)))},MaterialSelectWidget:function(e){var t=e.listValues,r=e.value,n=e.setValue,i=(e.allowCustomValues,e.readonly),a=e.placeholder,l=e.customProps,u=null!=r;return o.createElement(f.Z,null,o.createElement(y.Z,(0,c.Z)({autoWidth:!0,displayEmpty:!0,label:i?"":a,onChange:function(e){void 0!==e.target.value&&n(e.target.value)},value:u?r:"",disabled:i,readOnly:i,renderValue:function(e){return i||null!=e?function(e){return F(t,(function(t){var r=t.title;return t.value===e?r:null})).filter((function(e){return null!==e})).shift()}(e):a}},w()(l,["showSearch","input"])),F(t,(function(e){var t=e.title,r=e.value;return o.createElement(b.Z,{key:r,value:r},t)}))))},MaterialNumberWidget:function(e){var t=e.value,r=e.setValue,n=(e.config,e.readonly),i=e.min,a=e.max,l=e.step,u=e.placeholder,s=e.customProps,d=null==t?"":t;return o.createElement(f.Z,null,o.createElement(p.Z,(0,c.Z)({type:"number",value:d,placeholder:n?"":u,InputProps:{readOnly:n},inputProps:{min:i,max:a,step:l},disabled:n,onChange:function(e){var t=e.target.value;t=""===t||null===t?void 0:Number(t),r(t)}},s)))},MaterialSliderWidget:function(e){var t=e.config,r=e.placeholder,n=e.customProps,i=e.value,a=e.setValue,l=e.min,u=e.max,s=e.step,d=e.marks,g=e.readonly,v=t.settings.defaultSliderWidth,h=n||{},m=h.width,y=(0,S.Z)(h,E),b=y.input||{},O=y.slider||y,w="number"==typeof i?i:"",j="number"==typeof i?i:null,F=!!d&&Object.keys(d).map((function(e){return{value:e,label:d[e]}})),L=o.createElement(p.Z,(0,c.Z)({type:"number",value:w,placeholder:r,InputProps:{readOnly:g},inputProps:{min:l,max:u,step:s},disabled:g,onChange:function(e){var t=e.target.value;t=""===t||null===t?void 0:Number(t),a(t)},onBlur:function(){i<l?a(l):i>u&&a(u)}},b)),k=o.createElement(C.Z,(0,c.Z)({value:j,onChange:function(e,t){a(t)},disabled:g,min:l,max:u,step:s,marks:F,valueLabelDisplay:"auto"},O)),P={marginLeft:"5px",paddingLeft:"12px",marginBottom:F&&"-16px",width:m||v};return o.createElement(f.Z,null,o.createElement("div",{style:{display:"inline-flex",alignItems:"center",flexWrap:"wrap"}},o.createElement("div",{style:{marginLeft:"5px"}},L),o.createElement("div",{style:P},k)))},MaterialRangeWidget:function(e){var t=e.config,r=e.placeholders,n=e.customProps,i=e.value,a=e.setValue,l=e.min,u=e.max,s=e.step,d=e.marks,g=e.readonly,v=e.textSeparators,h=t.settings.defaultSliderWidth;(0,o.useEffect)((function(){var t=e.value||[void 0,void 0],r=(0,k.Z)(t,2),n=r[0],o=r[1];!e.value||null!=n&&null!=o||setTimeout((function(){var e=n||o;a([e,e])}),1)}),[]);var m=function(){i&&(i[0]<l?a([l,i[1]]):i[1]>u&&a([i[0],u]))},y=n||{},b=y.width,O=(0,S.Z)(y,P),w=O.input||{},j=O.slider||O,F=!!d&&Object.keys(d).map((function(e){return{value:e,label:d[e]}})),E=i?(0,L.Z)(i):[void 0,void 0],_=(0,k.Z)(E,2),V=_[0],Z=_[1];null==V&&(V="",E[0]=0),null==Z&&(Z="",E[1]=0);var R=o.createElement(p.Z,(0,c.Z)({type:"number",value:V,placeholder:r[0],InputProps:{readOnly:g},inputProps:{min:l,max:u,step:s},disabled:g,onChange:function(t){var r=t.target.value;r=""===r||null==r?void 0:Number(r);var n=e.value?(0,L.Z)(e.value):[void 0,void 0];n[0]=r,a(n)},onBlur:m},w)),D=o.createElement(p.Z,(0,c.Z)({type:"number",value:Z,placeholder:r[1],InputProps:{readOnly:g},inputProps:{min:l,max:u,step:s},disabled:g,onChange:function(t){var r=t.target.value;r=""===r||null==r?void 0:Number(r);var n=e.value?(0,L.Z)(e.value):[void 0,void 0];n[1]=r,a(n)},onBlur:m},w)),x=o.createElement(C.Z,(0,c.Z)({value:E,onChange:function(e,t){a(t)},disabled:g,min:l,max:u,step:s,marks:F,valueLabelDisplay:"auto"},j)),T={marginLeft:"5px"},A={marginLeft:"5px",paddingLeft:"12px",marginBottom:F&&"-16px",width:b||h};return o.createElement(f.Z,null,o.createElement("div",{style:{display:"inline-flex",flexWrap:"wrap"}},o.createElement("div",{style:T},R),o.createElement("div",{className:"widget--sep"},o.createElement("span",null,v[1])),o.createElement("div",{style:T},D),o.createElement("div",{style:A},x)))},MaterialBooleanWidget:function(e){var t=e.customProps,r=e.value,n=e.setValue,i=e.labelYes,a=e.labelNo,l=e.readonly;return o.createElement(f.Z,null,o.createElement(Z.Z,{component:"div"},o.createElement(V.Z,{component:"label",container:!0,alignItems:"center",spacing:0},o.createElement(V.Z,{item:!0,component:"span"},a),o.createElement(V.Z,{item:!0,component:"span"},o.createElement(_.Z,(0,c.Z)({checked:!!r,onChange:function(){n(!r)},disabled:l},t))),o.createElement(V.Z,{item:!0,component:"span"},i))))},MaterialMultiSelectWidget:function(e){var t,r=e.listValues,n=e.value,i=e.setValue,a=(e.allowCustomValues,e.readonly),l=e.placeholder,u=e.customProps,s=null!=n&&n.length>0;return o.createElement(f.Z,null,o.createElement(y.Z,(0,c.Z)({multiple:!0,autoWidth:!0,displayEmpty:!0,label:a?"":l,onChange:function(e){void 0!==e.target.value&&i(e.target.value)},value:s?n:[],disabled:a,readOnly:a,renderValue:function(e){if(!a&&!e.length)return l;var t=x(r,(function(t){var r=t.title,n=t.value;return e.indexOf(n)>-1?r:null})).filter((function(e){return null!==e}));return t.join(", ")}},w()(u,["showSearch","input","showCheckboxes"])),(t=s?n:[],x(r,(function(e){var r=e.title,n=e.value;return o.createElement(b.Z,{key:n,value:n},o.createElement(R.Z,{checked:t.indexOf(n)>-1}),o.createElement(D.Z,{primary:r}))})))))},MaterialAutocompleteWidget:Q,MaterialFieldSelect:function(e){var t=e.items,r=e.setField,n=e.selectedKey,i=e.readonly,a=e.placeholder,l=null!=n;return o.createElement(f.Z,null,o.createElement(y.Z,{autoWidth:!0,displayEmpty:!0,label:a,onChange:function(e){void 0!==e.target.value&&r(e.target.value)},value:l?n:"",disabled:i,renderValue:function(e){return i||e?function t(r){return r.map((function(r){return r.items?t(r.items):r.path===e?r.label:null}))}(t).filter((function(e){return Array.isArray(e)?e.some((function(e){return null!==e})):null!==e})).pop():a}},function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.map((function(t){var n=t.items,i=t.path,a=t.label,l=t.disabled,u="  ".repeat(r);return n?[o.createElement(X.Z,{disabled:l,key:i,disableSticky:!0},u&&o.createElement("span",null,u),a),e(n,r+1)]:o.createElement(b.Z,{disabled:l,key:i,value:i},u&&o.createElement("span",null,u),a)}))}(t)))},MaterialFieldAutocomplete:function(e){return o.createElement(Q,(r=(t=e).items,n=t.selectedKey,i=t.setField,a=(0,S.Z)(t,ee),l=ne(r),u=n,re(re({},a),{},{listValues:l,setValue:function(e,t){if(e)return i(e)},groupBy:function(e){return e.groupTitle},filterOptionsConfig:oe,allowCustomValues:!1,multiple:!1,value:u})));var t,r,n,i,a,l,u},MaterialButton:function(e){var t=e.type,r=e.label,n=e.onClick,i=e.readonly,a=(e.config,{delGroup:o.createElement(ie.Z,null),delRuleGroup:o.createElement(ie.Z,null),delRule:o.createElement(ie.Z,null),addRuleGroup:o.createElement(ae.Z,null),addRuleGroupExt:o.createElement(ae.Z,null),addRule:o.createElement(ae.Z,null),addGroup:o.createElement(ae.Z,null)}),l={addRule:"default",addGroup:"primary",delGroup:"secondary",delRuleGroup:"secondary",delRule:"secondary"};return!r||{addRuleGroup:!0,addRuleGroupExt:!0}[t]?o.createElement(ue.Z,{size:"small",disabled:i,onClick:n,color:l[t]},a[t]):o.createElement(le.Z,{size:"small",disabled:i,onClick:n,color:l[t],startIcon:a[t]},r)},MaterialButtonGroup:function(e){var t=e.children;return e.config,o.createElement(o.Fragment,null,t)},MaterialConjs:function(e){var t=e.id,r=e.not,n=e.setNot,i=e.conjunctionOptions,a=e.setConjunction,l=e.disabled,u=e.readonly,s=e.config,c=e.showNot,p=e.notLabel,d=Object.keys(i).length,g=l,v=s.settings.forceShowConj||d>1&&!g,h=function(e){return a(e)};return o.createElement(f.Z,null,o.createElement(se.Z,{disableElevation:!0,variant:"contained",size:"small",disabled:u},c&&(u&&!r?null:o.createElement(le.Z,{key:t,id:t+"__not",color:r?"secondary":"default",onClick:function(e){return n(e)}.bind(null,!r),disabled:u},p||"NOT")),v&&Object.keys(i).map((function(e){var t=i[e],r=t.id,n=(t.name,t.label),s=t.checked,c=a.isDummyFn?"__dummy":"";return!u&&!l||s?o.createElement(le.Z,{key:r+c,id:r+c,color:s?"primary":"default",value:e,onClick:h.bind(null,e),disabled:u||l},n):null}))))},MaterialSwitch:function(e){var t=e.value,r=e.setValue,n=e.label,i=e.checkedLabel,a=e.hideLabel,l=e.id,u=e.config,s=e.type,c=(u.settings.renderSize,function(){return r(!t)}),p=s,f=t&&i||n,d=t?o.createElement(fe.Z,null):o.createElement(pe.Z,null);return"lock"==s?a?o.createElement(ue.Z,{key:l+p,onClick:c,size:"small"},d):o.createElement(le.Z,{key:l+p,onClick:c,size:"small",startIcon:d},f):o.createElement(ce.Z,{control:o.createElement(_.Z,{checked:!!t,size:"small",onChange:function(e){return r(e.target.checked)}}),label:f})},MaterialValueSources:function(e){var t=e.valueSources,r=e.valueSrc,n=e.title,i=e.setValueSrc,a=(e.readonly,o.useState(null)),l=(0,k.Z)(a,2),u=l[0],s=l[1],c=ye(),p=function(){s(null)},d=Boolean(u);return o.createElement("div",null,o.createElement(ue.Z,{size:"small",onClick:function(e){u?p():function(e){s(e.currentTarget)}(e)}},o.createElement(de.Z,null)),o.createElement(ge.ZP,{open:d,anchorEl:u,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},onClose:p,classes:{paper:c.paper},disablePortal:!0},o.createElement(f.Z,{component:"fieldset"},o.createElement(me.Z,{component:"legend"},n),o.createElement(he.Z,{value:r||"value",onChange:function(e){void 0!==e.target.value&&(i(e.target.value),p())}},function(e){return e.map((function(e){var t=(0,k.Z)(e,2),n=t[0],i=t[1];return o.createElement(ce.Z,{key:n,value:n,checked:r==n||!r&&"value"==n,control:o.createElement(ve.Z,null),label:i.label})}))}(t)))))},MaterialConfirm:function(e){var t=e.onOk,r=e.okText,n=e.cancelText,o=e.title;(0,e.confirmFn)({description:o||"Are you sure?",title:null,confirmationText:r||"Ok",cancellationText:n||"Cancel"}).then(t).catch((function(){}))},MaterialUseConfirm:l.N,MaterialProvider:function(e){var t=e.config,r=e.children,n=t.settings.theme||{},c=t.settings.locale||{},p=n.material,f=c.material,d=p||f?(0,i.Z)(p,f):null,g=o.createElement("div",{className:"mui"},r),v=o.createElement(u.M,{utils:s.Z},o.createElement(l.W,null,g));return d?o.createElement(a.Z,{theme:d},v):v}};function Oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function we(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var je=we(we({},j.I4.settings),{},{renderField:function(e,t){var r,n=t.RCE,o=t.W,i=o.MaterialFieldAutocomplete,a=o.MaterialFieldSelect;return null!=e&&null!==(r=e.customProps)&&void 0!==r&&r.showSearch?n(i,e):n(a,e)},renderOperator:function(e,t){return(0,t.RCE)(t.W.MaterialFieldSelect,e)},renderFunc:function(e,t){return(0,t.RCE)(t.W.MaterialFieldSelect,e)},renderConjs:function(e,t){return(0,t.RCE)(t.W.MaterialConjs,e)},renderSwitch:function(e,t){return(0,t.RCE)(t.W.MaterialSwitch,e)},renderButton:function(e,t){return(0,t.RCE)(t.W.MaterialButton,e)},renderButtonGroup:function(e,t){return(0,t.RCE)(t.W.MaterialButtonGroup,e)},renderValueSources:function(e,t){return(0,t.RCE)(t.W.MaterialValueSources,e)},renderProvider:function(e,t){return(0,t.RCE)(t.W.MaterialProvider,e)},renderConfirm:function(e,t){return(0,t.W.MaterialConfirm)(e)},useConfirm:function(e){return(0,e.W.MaterialUseConfirm)()}}),Fe=we(we({},j.I4.widgets),{},{text:we(we({},j.I4.widgets.text),{},{factory:function(e,t){return(0,t.RCE)(t.W.MaterialTextWidget,e)}}),textarea:we(we({},j.I4.widgets.textarea),{},{factory:function(e,t){return(0,t.RCE)(t.W.MaterialTextAreaWidget,e)}}),number:we(we({},j.I4.widgets.number),{},{factory:function(e,t){return(0,t.RCE)(t.W.MaterialNumberWidget,e)}}),multiselect:we(we({},j.I4.widgets.multiselect),{},{factory:function(e,t){var r=t.RCE,n=t.W,o=n.MaterialAutocompleteWidget,i=n.MaterialMultiSelectWidget;return e.asyncFetch||e.showSearch?r(o,we(we({},e),{},{multiple:!0})):r(i,e)}}),select:we(we({},j.I4.widgets.select),{},{factory:function(e,t){var r=t.RCE,n=t.W,o=n.MaterialAutocompleteWidget,i=n.MaterialSelectWidget;return e.asyncFetch||e.showSearch?r(o,e):r(i,e)}}),slider:we(we({},j.I4.widgets.slider),{},{factory:function(e,t){return(0,t.RCE)(t.W.MaterialSliderWidget,e)}}),boolean:we(we({},j.I4.widgets.boolean),{},{factory:function(e,t){return(0,t.RCE)(t.W.MaterialBooleanWidget,e)}}),date:we(we({},j.I4.widgets.date),{},{factory:function(e,t){return(0,t.RCE)(t.W.MaterialDateWidget,e)}}),time:we(we({},j.I4.widgets.time),{},{factory:function(e,t){return(0,t.RCE)(t.W.MaterialTimeWidget,e)}}),datetime:we(we({},j.I4.widgets.datetime),{},{factory:function(e,t){return(0,t.RCE)(t.W.MaterialDateTimeWidget,e)}}),rangeslider:we(we({},j.I4.widgets.rangeslider),{},{factory:function(e,t){return(0,t.RCE)(t.W.MaterialRangeWidget,e)}})}),Se=we({},j.I4.types),Ce=we(we({},j.I4.ctx),{},{W:we(we({},j.I4.ctx.W),be)}),Ee=we(we({},j.I4),{},{ctx:Ce,types:Se,widgets:Fe,settings:je});const Le=Ee=j.cQ.ConfigMixins.addMixins(Ee,["rangeslider"])},7470:(e,t,r)=>{"use strict";r.d(t,{I4:()=>Vc,gs:()=>g,Ib:()=>Rs,Px:()=>w,AE:()=>Ll,cQ:()=>Kc});var n={};r.r(n),r.d(n,{getItemInListValues:()=>me,getListValue:()=>je,getTitleInListValues:()=>ye,getValueInListValues:()=>be,listValuesToArray:()=>he,makeCustomListValue:()=>ve,mapListValues:()=>Oe,searchListValue:()=>we,toListValue:()=>ge});var o={};r.r(o),r.d(o,{createListFromArray:()=>xe,defaultConjunction:()=>_e,defaultField:()=>Ce,defaultGroupConjunction:()=>Pe,defaultGroupProperties:()=>Ve,defaultItemProperties:()=>Ze,defaultOperator:()=>Ee,defaultOperatorOptions:()=>Le,defaultRoot:()=>De,defaultRule:()=>Re,defaultRuleProperties:()=>ke,emptyProperies:()=>Te});var i={};r.r(i),r.d(i,{expandTreePath:()=>Ae,expandTreeSubpath:()=>Ne,fixEmptyGroupsInTree:()=>Be,fixPathsInTree:()=>We,getFlatTree:()=>Ge,getItemByPath:()=>Ie,getLightTree:()=>Je,getSwitchValues:()=>Ye,getTotalReordableNodesCountInTree:()=>ze,getTotalRulesCountInTree:()=>Ue,getTreeBadFields:()=>$e,hasChildren:()=>Ke,isEmptyTree:()=>He,removeIsLockedInTree:()=>Me,removePathsInTree:()=>qe});var a={};r.r(a),r.d(a,{filterValueSourcesForField:()=>wt,formatFieldName:()=>St,getFieldPartsConfigs:()=>mt,getFieldPath:()=>gt,getFieldPathLabels:()=>ht,getFirstField:()=>pt,getFirstOperator:()=>dt,getFuncPathLabels:()=>vt,getNewValueForFieldOp:()=>ct,getOperatorsForField:()=>ft,getValueLabel:()=>yt,getValueSourcesForFieldOp:()=>jt,getWidgetForFieldOp:()=>Ft,getWidgetsForFieldOp:()=>Ot});var l={};r.r(l),r.d(l,{applyJsonLogic:()=>Rt,cleanJSX:()=>z,compileConfig:()=>Jt,compressConfig:()=>Ut,configKeys:()=>qt,decompressConfig:()=>$t,extendConfig:()=>or,getFieldConfig:()=>hr,getFieldRawConfig:()=>pr,getFieldWidgetConfig:()=>yr,getFuncArgConfig:()=>vr,getFuncConfig:()=>gr,getOperatorConfig:()=>mr,isDirtyJSX:()=>U,isJSX:()=>$,normalizeField:()=>dr});var u={};r.r(u),r.d(u,{completeFuncValue:()=>wr,completeValue:()=>Or,setArgValue:()=>Sr,setArgValueSrc:()=>Cr,setFunc:()=>jr});var s={};r.r(s),r.d(s,{SqlString:()=>nn,mongoEmptyValue:()=>an,spelEscape:()=>cn,spelFixList:()=>sn,spelFormatConcat:()=>pn,spelImportConcat:()=>fn,sqlEmptyValue:()=>on,stringifyForDisplay:()=>dn});var c={};r.r(c),r.d(c,{ES_6_SYNTAX:()=>no,ES_7_SYNTAX:()=>ro,_mongodbFormat:()=>Yr,_spelFormat:()=>kn,_sqlFormat:()=>mn,elasticSearchFormat:()=>oo,jsonLogicFormat:()=>xr,mongodbFormat:()=>Jr,queryBuilderFormat:()=>kr,queryString:()=>Bn,spelFormat:()=>Ln,sqlFormat:()=>hn});var p={};r.r(p),r.d(p,{_loadFromJsonLogic:()=>mo,_loadFromSpel:()=>Do,checkTree:()=>lo,getTree:()=>io,isImmutableTree:()=>so,isJsonLogic:()=>J,isTree:()=>co,isValidTree:()=>uo,loadFromJsonLogic:()=>ho,loadFromSpel:()=>Ro,loadTree:()=>ao});var f={};r.r(f),r.d(f,{getListValue:()=>je,listValueToOption:()=>oi,mergeListValues:()=>ti,optionToListValue:()=>ri,optionsToListValues:()=>ni,simulateAsyncFetch:()=>ei});var d={};r.r(d),r.d(d,{Autocomplete:()=>f,ConfigUtils:()=>l,DefaultUtils:()=>o,ExportUtils:()=>s,FuncUtils:()=>u,ListUtils:()=>n,RuleUtils:()=>a,TreeUtils:()=>i,clone:()=>Et(),compressConfig:()=>Ut,decompressConfig:()=>$t,getSwitchValues:()=>Ye,moment:()=>se(),uuid:()=>oe,validateAndFixTree:()=>Xe,validateTree:()=>et});var g={};r.r(g),r.d(g,{LINEAR_REGRESSION:()=>si,LOWER:()=>li,NOW:()=>ii,RELATIVE_DATETIME:()=>ai,UPPER:()=>ui});var v={};r.r(v),r.d(v,{addCaseGroup:()=>Sa,addDefaultCaseGroup:()=>Fa,addGroup:()=>Ca,addRule:()=>wa,moveItem:()=>La,removeGroup:()=>Ea,removeRule:()=>ja,setTree:()=>Oa});var h={};r.r(h),r.d(h,{setConjunction:()=>ka,setLock:()=>_a,setNot:()=>Pa});var m={};r.r(m),r.d(m,{setField:()=>Va,setOperator:()=>Za,setOperatorOption:()=>xa,setValue:()=>Ra,setValueSrc:()=>Da});var y={};r.r(y),r.d(y,{bindActionCreators:()=>Ol,isUsingLegacyReactDomRender:()=>hl,liteShouldComponentUpdate:()=>ml,pureShouldComponentUpdate:()=>yl,useOnPropsChanged:()=>bl});var b={};r.r(b),r.d(b,{FuncWidget:()=>oc,ValueFieldWidget:()=>Ms,VanillaBooleanWidget:()=>ac,VanillaButton:()=>wc,VanillaButtonGroup:()=>jc,VanillaConjs:()=>Oc,VanillaDateTimeWidget:()=>fc,VanillaDateWidget:()=>sc,VanillaFieldSelect:()=>bc,VanillaMultiSelectWidget:()=>gc,VanillaNumberWidget:()=>mc,VanillaProvider:()=>Ec,VanillaSelectWidget:()=>hc,VanillaSliderWidget:()=>yc,VanillaSwitch:()=>Sc,VanillaTextAreaWidget:()=>uc,VanillaTextWidget:()=>lc,VanillaTimeWidget:()=>cc,VanillaValueSources:()=>Fc,vanillaConfirm:()=>Cc});var O={};r.r(O),r.d(O,{ProximityOperator:()=>Lc});var w={};r.r(w),r.d(w,{h:()=>Jc});var j=r(28369),F=r(66596),S=r(12575),C=r(73338),E=r(23810),L=r(15139),k=r(29901),P=r(45233),_=r(92437),V=r(46722),Z=r(41861),R=r.n(Z),D=r(73352),x=r.n(D),T=r(73656),A=function(e,t){return void 0===e?t:e},N=function(e,t){return e===t||(Z.Map.isMap(e)?e.equals(t):JSON.stringify(e)==JSON.stringify(t))},I=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e===t||(Array.isArray(e)?q(e,t,r):Z.Map.isMap(e)?e.equals(t):"object"==(0,V.Z)(e)?M(e,t,r):e===t)};function q(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e===t)return!0;if(!e||!t)return!1;var n=e.length;if(t.length!==n)return!1;for(var o=0;o<n;o++){var i=r?I(e[o],t[o],r):e[o]===t[o];if(!i)return!1}return!0}function M(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e===t)return!0;if(!e||!t)return!1;var n=Object.keys(e),o=Object.keys(t),i=n.length;if(o.length!==i)return!1;for(var a=0;a<i;a++){var l=n[a],u=r?I(e[l],t[l],r):e[l]===t[l];if(!u)return!1}return!0}var W=function(e){return"object"===(0,V.Z)(e)&&null!==e&&"function"==typeof e.toJS};function B(e){return W(e)?e:new(R().List)(e)}function G(e){return W(e)?e.toJS():e}var z=function e(t){var r;if(t instanceof Array)return t.map((function(t,r){return e(t)}));if("object"===(0,V.Z)(t)&&null!==t&&U(t)){var n,o=x()(t,["$$typeof","_owner","_store","ref","key"]);return o.type&&(o.type="string"==typeof(r=o.type)?r:"function"==typeof r?r.name:r),null!=o&&null!==(n=o.props)&&void 0!==n&&n.children&&(o.props.children=e(o.props.children)),o}return t},U=function(e){return"object"===(0,V.Z)(e)&&null!==e&&!Array.isArray(e)&&Object.keys(e).includes("type")&&Object.keys(e).includes("props")&&Object.keys(e).includes("key")&&Object.keys(e).includes("ref")&&Object.keys(e).includes("$$typeof")},$=function(e){return"object"===(0,V.Z)(e)&&null!==e&&!Array.isArray(e)&&"string"==typeof e.type&&Object.keys(e).includes("props")},J=function(e){return"object"===(0,V.Z)(e)&&null!==e&&!Array.isArray(e)&&1===Object.keys(e).length};function Y(e){return new Promise((function(t){setTimeout(t,e)}))}function H(e,t){return e||(e=[]),t||(t=[]),t.map((function(t){return[t,e.indexOf(t)]})).map((function(e,t,r){var n=(0,_.Z)(e,2),o=n[0];if(-1==n[1]){var i=r.slice(t+1),a=r.slice(0,t).reverse().find((function(e){var t=(0,_.Z)(e,2);return t[0],-1!=t[1]})),l=i.find((function(e){var t=(0,_.Z)(e,2);return t[0],-1!=t[1]}));return l?[o,"before",l[0]]:a?[o,"after",a[0]]:[o,"append",null]}return null})).filter((function(e){return null!==e})).reduce((function(e,t){var r=(0,_.Z)(t,3),n=r[0],o=r[1],i=r[2],a=e.indexOf(i);return-1==e.indexOf(n)&&(a>-1?e.splice(a+("after"==o?1:0),0,n):e.splice("append"==o?1/0:0,0,n)),e}),e.slice())}var K=function(){return void 0!==T&&{NODE_ENV:"production"}&&!1},Q=function(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=0;r<t.length;r++){var n=t[r];if(void 0!==n){e=n;break}}return e},X=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=null!=e?e:K();return t?console:{error:function(){},log:function(){},warn:function(){},debug:function(){},info:function(){}}}(),ee=r(12712),te=r(88469),re=r.n(te),ne=0;const oe=function(){var e=((new Date).getTime().toString(16)+"FF").substr(0,11);return"ssssssss-xxxx-4xxx-yxxx-x".replace(/[xys]/g,(function(e){var t="s"===e?Math.floor(16*Math.random()):15&ne++;return("x"===e?t:3&t|8).toString(16)}))+e};var ie=r(24098),ae=r.n(ie),le={formatField:function(e,t,r,n,o,i){return i?r:e},valueSourcesInfo:{value:{}},fieldSeparator:".",fieldSeparatorDisplay:".",canReorder:!0,canRegroup:!0,canDeleteLocked:!1,canLeaveEmptyGroup:!0,shouldCreateEmptyGroup:!1,canShortMongoQuery:!0,removeEmptyGroupsOnLoad:!0,removeIncompleteRulesOnLoad:!0,removeInvalidMultiSelectValuesOnLoad:!0,setOpOnChangeField:["keep","default"],groupOperators:["some","all","none"],defaultGroupConjunction:"AND",locale:{moment:"en"},valueLabel:"Value",valuePlaceholder:"Value",fieldLabel:"Field",operatorLabel:"Operator",funcLabel:"Function",fieldPlaceholder:"Select field",funcPlaceholder:"Select function",operatorPlaceholder:"Select operator",lockLabel:"Lock",lockedLabel:"Locked",deleteLabel:null,addGroupLabel:"Add group",addCaseLabel:"Add condition",addDefaultCaseLabel:"Add default condition",defaultCaseLabel:"Default:",addRuleLabel:"Add rule",addSubRuleLabel:"Add sub rule",delGroupLabel:"",notLabel:"Not",valueSourcesPopupTitle:"Select value source",removeRuleConfirmOptions:null,removeGroupConfirmOptions:null},ue=r(6901),se=r.n(ue);function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(r),!0).forEach((function(t){(0,P.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var de=function(e){return"object"==(0,V.Z)(e)&&null!==e&&!Array.isArray(e)},ge=function(e,t){return null==e||""==e?void 0:de(e)?e:{value:e,title:void 0!==t?t:e}},ve=function(e){var t=ge(e);return de(t)?fe(fe({},ge(e)),{},{isCustom:!0}):t},he=function(e){if(Array.isArray(e))return e.map((function(e){return ge(e)}));if(!de(e))return e;var t=[];for(var r in e){var n=e[r];t.push(ge(r,n))}return t},me=function(e,t){return Array.isArray(e)?e.map((function(e){return ge(e)})).find((function(e){return""+e.value==""+t})):void 0!==e[t]?ge(t,e[t]):void 0},ye=function(e,t){if(null==e)return t;var r=me(e,t);return void 0!==r?r.title:t},be=function(e,t){if(null==e)return t;var r=me(e,t);return void 0!==r?r.value:t},Oe=function(e,t){var r=[];if(Array.isArray(e)){var n,o=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return ce(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ce(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}(e);try{for(o.s();!(n=o.n()).done;){var i=n.value,a=t(ge(i));null!=a&&r.push(a)}}catch(e){o.e(e)}finally{o.f()}}else for(var l in e){var u=t(ge(l,e[l]));null!=u&&r.push(u)}return r},we=function(e,t){return Oe(t,(function(t){return-1!="".concat(t.value).indexOf(e)||-1!=t.title.indexOf(e)?t:null})).filter((function(e){return null!==e})).shift()},je=function(e,t){return Oe(t,(function(t){return""+t.value==""+e?t:null})).filter((function(e){return null!==e})).shift()};function Fe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Se(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(r),!0).forEach((function(t){(0,P.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ce=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return"function"==typeof e.settings.defaultField?e.settings.defaultField(r):e.settings.defaultField||(t?pt(e,r):null)},Ee=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=hr(e,t),o=n&&n.operators||[],i=n&&n.defaultOperator;o.includes(i)||(i=null),!i&&r&&(i=dt(e,t));var a="function"==typeof e.settings.defaultOperator?e.settings.defaultOperator(t,n):i;return a},Le=function(e,t,r){var n=t?mr(e,t,r):null;return n&&n.options?new(R().Map)(n.options&&n.options.defaults||{}):null},ke=function(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=null,a=null,l=e.settings,u=l.setDefaultFieldAndOp,s=l.showErrorMessage;o?(i=null==o||null===(t=o.properties)||void 0===t?void 0:t.field,a=null==o||null===(r=o.properties)||void 0===r?void 0:r.operator):u&&(i=Ce(e,!0,n),a=Ee(e,i));var c=new(R().Map)({field:i,operator:a,value:new(R().List),valueSrc:new(R().List),operatorOptions:Le(e,a,i)});if(s&&(c=c.set("valueError",new(R().List))),i&&a){var p=ct(e,e,c,i,a,"operator",!1),f=p.newValue,d=p.newValueSrc,g=p.newValueType,v=p.newValueError;c=c.set("value",f).set("valueSrc",d).set("valueType",g),s&&(c=c.set("valueError",v))}return c},Pe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=(t=hr(e,t))&&t.conjunctions||Object.keys(e.conjunctions);return 1==r.length?r[0]:e.settings.defaultGroupConjunction||e.settings.defaultConjunction||r[0]},_e=function(e){return e.settings.defaultConjunction||Object.keys(e.conjunctions)[0]},Ve=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new(R().Map)({conjunction:Pe(e,t),not:!1})},Ze=function(e,t){var r;return t&&"group"==t.type?Ve(e,null==t||null===(r=t.properties)||void 0===r?void 0:r.field):ke(e,null,t)},Re=function(e,t){return(0,P.Z)({},e,new(R().Map)({type:"rule",id:e,properties:ke(t)}))},De=function(e){return new(R().Map)({type:"group",id:oe(),children1:new(R().OrderedMap)(Se({},Re(oe(),e))),properties:Ve(e)})},xe=function(e){return new(R().List)(e)},Te=function(){return new(R().Map)},Ae=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.interpose("children1").withMutations((function(e){return e.skip(1),e.push.apply(e,r),e}))},Ne=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.interpose("children1").withMutations((function(e){return e.push.apply(e,r),e}))},Ie=function(e,t){var r=new(R().OrderedMap)((0,P.Z)({},e.get("id"),e)),n=e;return t.forEach((function(e){n=r.get(e),r=n.get("children1")})),n},qe=function(e){var t=e;return function e(r,n){var o=n.push(r.get("id"));r.get("path")&&(t=t.removeIn(Ae(o,"path")));var i=r.get("children1");i&&i.map((function(t,r){e(t,o)}))}(e,new(R().List)),t},Me=function(e){var t=e;return function e(r,n){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=n.push(r.get("id")),a=r.getIn(["properties","isLocked"]);o&&a&&(t=t.deleteIn(Ae(i,"properties","isLocked")));var l=r.get("children1");l&&l.map((function(t,r){e(t,i,a||o)}))}(e,new(R().List)),t},We=function(e){var t=e;return function e(r,n,o,i){if(r){var a=r.get("path"),l=r.get("id"),u=l||i,s=n.push(u);a&&a.equals(s)||(t=t.setIn(Ae(s,"path"),s)),l||(t=t.setIn(Ae(s,"id"),u));var c=r.get("children1");c&&("Map"==c.constructor.name&&(t=t.setIn(Ae(s,"children1"),new(R().OrderedMap)(c))),c.map((function(t,r){e(t,s,o+1,r)})))}}(e,new(R().List),0),t},Be=function(e){var t=e;return function e(r,n,o,i){if(!r)return!1;var a=r.get("id")||i,l=n.push(a),u=r.get("children1");if(u){var s=u.map((function(t,r){return e(t,l,o+1,r)})).reduce((function(e,t){return e&&t}),!0);if((0==u.size||s)&&o>0)return t=t.deleteIn(Ae(l)),!0}return!1}(e,new(R().List),0),t},Ge=function(e){var t=[],r={},n=0;!function e(o,i,a,l,u,s,c,p,f){var d=o.get("type"),g=o.get("collapsed"),v=o.get("id"),h=o.get("children1"),m=o.getIn(["properties","isLocked"]),y=h?h.map((function(e,t){return t})):null,b="rule_group"==d,O=!u&&(!h||b),w=t.length,j=n;if(t.push(v),a||(n+=1),c.height=(c.height||0)+1,r[v]={type:d,parent:i.length?i[i.length-1]:null,parentType:p,caseId:"case_group"==d?v:f,isDefaultCase:"case_group"==d&&!h,path:i.concat(v),lev:s,leaf:!h,index:w,id:v,children:y,leafsCount:0,_top:w,top:a?null:j,collapsed:g,node:o,isLocked:m||l},h){var F={};h.map((function(t,r){e(t,i.concat(v),a||g,l||m,u||b,s+1,F,d,"case_group"==d?v:f)})),g||(c.height=(c.height||0)+(F.height||0))}f&&O&&r[f].leafsCount++;var S=t.length,C=c.height;Object.assign(r[v],{_height:S-w,height:C,bottom:(a?null:j)+C})}(e,[],!1,!1,!1,0,{},null,null);for(var o=0;o<t.length;o++){var i=o>0?t[o-1]:null,a=o<t.length-1?t[o+1]:null,l=r[t[o]];l.prev=i,l.next=a}return{flat:t,items:r}},ze=function(e){if(!e)return-1;var t=0;return function e(r,n,o){var i,a,l;"function"==typeof r.get?(i=r.get("id"),a=r.get("children1"),l=r.get("type")):(i=r.id,a=r.children1,l=r.type),t++,a&&"rule_group"!=l&&a.map((function(t,r){e(t,n.concat(i),o+1)}))}(e,[],0),t-1},Ue=function(e){if(!e)return-1;var t=0;return function e(r,n,o){var i,a,l;"function"==typeof r.get?(i=r.get("id"),a=r.get("children1"),l=r.get("type")):(i=r.id,a=r.children1,l=r.type),"rule"==l||"rule_group"==l?t++:a&&a.map((function(t,r){e(t,n.concat(i),o+1)}))}(e,[],0),t},$e=function(e){var t=[];return e&&function e(r,n,o){var i=r.get("id"),a=r.get("children1"),l=r.getIn(["properties","valueError"]),u=r.getIn(["properties","field"]);l&&l.size>0&&l.filter((function(e){return null!=e})).size>0&&t.push(u),a&&a.map((function(t,r){e(t,n.concat(i),o+1)}))}(e,[],0),Array.from(new Set(t))},Je=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e;function n(e,r){e.path&&delete e.path,!t&&r&&delete e.id;var o=e.properties;o&&null==o.operatorOptions&&delete o.operatorOptions;var i=e.children1;if(i){for(var a in i)n(i[a],a);t&&(e.children1=Object.values(i))}}return n(e,null),r},Ye=function(e){var t=[],r=e.get("children1");return r&&r.map((function(e){var r,n=e.getIn(["properties","value"]);n&&1==n.size?(r=n.get(0),Array.isArray(r)&&0==r.length&&(r=null)):r=null,t=[].concat((0,ee.Z)(t),[r])})),t},He=function(e){return!e.get("children1")||0==e.get("children1").size},Ke=function(e,t){return e.getIn(Ae(t,"children1")).size>0},Qe=function(e,t){return function(e){return"object"==(0,V.Z)(e)&&null!==e&&Array.isArray(e)?"array":(0,V.Z)(e)}(e)==t||"number"==t&&!isNaN(e)},Xe=function(e,t,r,n,o,i){var a=et(e,t,r,n,o,i);return We(a)},et=function(e,t,r,n,o,i){return void 0===o&&(o=r.settings.removeEmptyGroupsOnLoad),void 0===i&&(i=r.settings.removeIncompleteRulesOnLoad),tt(e,[],null,{},{config:r,oldConfig:n,removeEmptyGroups:o,removeIncompleteRules:i})};function tt(e,t,r,n,o){var i=e.get("type"),a=e.get("children1");return("group"===i||"rule_group"===i||"case_group"==i||"switch_group"==i)&&a&&a.size?function(e,t,r,n,o){var i=o.removeEmptyGroups,a=e.get("id"),l=e.get("children1"),u=l;!a&&r&&(a=r,e=e.set("id",a),n.sanitized=!0);var s={};l=l.map((function(e,r){return tt(e,t.concat(a),r,s,o)})),i&&(l=l.filter((function(e){return null!=e})));var c=s.sanitized||u.size!=l.size;return!l.size&&i&&t.length&&(c=!0,e=void 0),c&&(n.sanitized=!0),c&&e&&(e=e.set("children1",l)),e}(e,t,r,n,o):"rule"===i?function(e,t,r,n,o){var i=o.removeIncompleteRules,a=o.config,l=o.oldConfig,u=a.settings.showErrorMessage,s=e.get("id"),c=e.get("properties"),p=c.get("field")||null,f=c.get("operator")||null,d=c.get("operatorOptions"),g=c.get("valueSrc"),v=c.get("value"),h=c.get("valueError"),m={field:p,operator:f,operatorOptions:d?d.toJS():{},valueSrc:g?g.toJS():null,value:v?v.toJS():null,valueError:h?h.toJS():null};p&&f&&v&&v.includes(void 0),!s&&r&&(s=r,e=e.set("id",s),n.sanitized=!0);var y=p?hr(a,p):null;p&&!y&&(X.warn("No config for field ".concat(p)),p=null),null==p&&(c=["operator","operatorOptions","valueSrc","value"].reduce((function(e,t){return e.delete(t)}),c),f=null),"range_between"!=f&&"range_not_between"!=f||(f="range_between"==f?"between":"not_between",console.info("Fixed operator ".concat(c.get("operator")," to ").concat(f)),c=c.set("operator",f));var b=f?mr(a,f,p):null;f&&!b&&(console.warn("No config for operator ".concat(f)),f=null);var O=p?ft(a,p):[];O?f&&-1==O.indexOf(f)&&("is_empty"==f||"is_not_empty"==f?(f="is_empty"==f?"is_null":"is_not_null",console.info("Fixed operator ".concat(c.get("operator")," to ").concat(f," for ").concat(p)),c=c.set("operator",f)):(console.warn("Operator ".concat(f," is not supported for field ").concat(p)),f=null)):(console.warn("Type of field ".concat(p," is not supported")),f=null),null==f&&(c=(c=(c=c.delete("operatorOptions")).delete("valueSrc")).delete("value")),d=c.get("operatorOptions"),f&&A(b.cardinality,1),!f||d&&!b.options?(d=null,c=c.delete("operatorOptions")):f&&!d&&b.options&&(d=Le(a,f,p),c=c.set("operatorOptions",d)),g=c.get("valueSrc"),v=c.get("value");var w=ct(a,l,c,p,f,null,!u,!0);v=w.newValue,g=w.newValueSrc,h=w.newValueError,c=(c=c.set("value",v)).set("valueSrc",g),u&&(c=c.set("valueError",h));var j={field:p,operator:f,operatorOptions:d?d.toJS():{},valueSrc:g?g.toJS():null,value:v?v.toJS():null,valueError:h?h.toJS():null},F=!N(m,j),S=p&&f&&v&&!v.includes(void 0);return F&&(n.sanitized=!0),!S&&i?e=void 0:F&&(e=e.set("properties",c)),e}(e,0,r,n,o):e}var rt=function(e,t,r,n,o,i,a,l){var u=arguments.length>8&&void 0!==arguments[8]&&arguments[8],s=arguments.length>9&&void 0!==arguments[9]&&arguments[9],c=!(arguments.length>10&&void 0!==arguments[10])||arguments[10],p=null,f=o;if(null!=o){if("field"==a){var d=it(t,r,o,a,i,l,e,n,s,u),g=(0,_.Z)(d,2);p=g[0],f=g[1]}else if("func"==a){var v=at(t,r,o,a,i,l,e,n,s,u),h=(0,_.Z)(v,2);p=h[0],f=h[1]}else if("value"==a||!a){var m=ot(t,r,o,a,i,l,e,n,s,u),y=(0,_.Z)(m,2);p=y[0],f=y[1]}if(!p){hr(e,r);var b=Ft(e,r,n,a),O=n?mr(e,n,r):null,w=x()(yr(e,r,n,b,a),["factory"]),j="field"==a?hr(e,o):null,F=w,S=w.validateValue;if("function"==typeof S){var C=[f,F,n,O];"field"==a&&C.push(j);var E=S.call.apply(S,[e.ctx].concat(C));"boolean"==typeof E?0==E&&(p="Invalid value"):p=E}}}return c&&p&&console.warn("[RAQB validate]","Field ".concat(r,": ").concat(p)),[p,f]},nt=function(e,t,r,n,o){var i=Z.List.isList(e)?e.toJS():e instanceof Array?(0,ee.Z)(e):void 0;if(i){var a=i.reduce((function(e,r){var n=(0,_.Z)(e,2),o=n[0],i=n[1],a=me(t,r);return null==a?[o,[].concat((0,ee.Z)(i),[r])]:[[].concat((0,ee.Z)(o),[a.value]),i]}),[[],[]]),l=(0,_.Z)(a,2),u=l[0],s=l[1],c=s.length>1;return[s.length?"".concat(c?"Values":"Value"," ").concat(s.join(", ")," ").concat(c?"are":"is"," not in list of values"):null,(r=void 0!==o?o:r||n)?u:e]}var p=me(t,e);return null==p?["Value ".concat(e," is not in list of values"),e]:[null,e=p.value]},ot=function(e,t,r,n,o,i,a){var l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,u=arguments.length>8&&void 0!==arguments[8]&&arguments[8],s=arguments.length>9&&void 0!==arguments[9]&&arguments[9];if(t){var c=hr(a,t),p=Ft(a,t,l,n),f=a.widgets[p],d=f.type,g=f.jsType,v=c.fieldSettings,h=(null==v?void 0:v.treeValues)||(null==v?void 0:v.listValues),m=!(null==v||!v.asyncFetch),y=h||m;if(o&&o!=d)return["Value should have type ".concat(d,", but got value of type ").concat(o),r];if(g&&!Qe(r,g)&&!y)return["Value should have JS type ".concat(g,", but got value of type ").concat((0,V.Z)(r)),r];if(v){var b=i||h;if(b&&!v.allowCustomValues)return nt(r,b,s,u,a.settings.removeInvalidMultiSelectValuesOnLoad);if(null!=v.min&&r<v.min)return["Value ".concat(r," < min ").concat(v.min),s?v.min:r];if(null!=v.max&&r>v.max)return["Value ".concat(r," > max ").concat(v.max),s?v.max:r]}}return[null,r]},it=function(e,t,r,n,o,i,a){var l=a.settings.fieldSeparator,u="object"==(0,V.Z)(t)&&(null==t?void 0:t._isFuncArg),s=Array.isArray(e)?e.join(l):e,c=Array.isArray(r)?r.join(l):r,p=hr(a,r);return p?c!=s||u?o&&o!=p.type?["Field ".concat(r," is of type ").concat(p.type,", but expected ").concat(o),r]:[null,r]:["Can't compare field ".concat(e," with itself"),r]:["Unknown field ".concat(r),r]},at=function(e,t,r,n,o,i,a){var l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,u=arguments.length>8&&void 0!==arguments[8]&&arguments[8],s=arguments.length>9&&void 0!==arguments[9]&&arguments[9],c=r;if(r){var p=r.get("func");if(p){var f=gr(a,p);if(!f)return["Unknown function ".concat(p),r];if(o&&f.returnType!=o)return["Function ".concat(p," should return value of type ").concat(f.returnType,", but got ").concat(o),r];for(var d in f.args){var g=f.args[d],v=c.get("args"),h=v?v.get(d):void 0,m=hr(a,g),y=h?h.get("value"):void 0,b=h?h.get("valueSrc"):void 0;if(void 0!==y){var O=rt(a,e,m,l,y,g.type,b,i,s,u,!1),w=(0,_.Z)(O,2),j=w[0],F=w[1];if(null!==j){if(!s)return["Invalid value of arg ".concat(d," for func ").concat(p,": ").concat(j),r];c=c.deleteIn(["args",d]),void 0!==g.defaultValue&&(c=(c=c.setIn(["args",d,"value"],g.defaultValue)).setIn(["args",d,"valueSrc"],"value"))}else F!==y&&(c=c.setIn(["args",d,"value"],F))}else if(u&&void 0===g.defaultValue&&!s)return["Value of arg ".concat(d," for func ").concat(p," is required"),r]}}}return[null,c]},lt=r(77875),ut=r.n(lt),st=["select","multiselect","treeselect","treemultiselect"],ct=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],l=arguments.length>7&&void 0!==arguments[7]&&arguments[7];t||(t=e);var u=r.get("field"),s=r.get("operator"),c=r.get("value"),p=r.get("valueSrc",new(R().List)),f=r.get("valueType",new(R().List)),d=r.get("asyncListValues"),g=e.settings,v=g.convertableWidgets,h=g.clearValueOnChangeField,m=g.clearValueOnChangeOp,y=g.showErrorMessage,b=mr(e,o,n),O=o?A(b.cardinality,1):null,w=hr(t,u),j=hr(e,n),F=u&&s&&o&&null!=c&&(!i||"field"==i&&!h||"operator"==i&&!m)&&w&&j&&w.type==j.type;F&&st.includes(w.type)&&"field"==i&&(F=!1);for(var S=0;S<O;S++){var C=p.get(S)||null,E=Ft(t,u,s,C),L=Ft(e,n,o,C),k="value"==C?E:Ft(t,u,s,"value"),P="value"==C?L:Ft(e,n,o,"value"),V=P==k||(v[k]||[]).includes(P);V||(F=!1)}s!=o&&[s,o].includes("proximity")&&(F=!1);var Z=yr(e,n,o,null,p.first()),D=jt(e,n,o),x={},T=Array.from({length:O},(function(){return null}));if(F)for(var N=function(){var t=c.get(I),r=f.get(I)||null,u=p.get(I)||null,s=null!=D.find((function(e){return e==u}));!s&&I>0&&null==u&&(s=!0);var g=rt(e,n,n,o,t,r,u,d,a,l),v=(0,_.Z)(g,2),h=v[0],m=v[1],b=m!==t,O=!s||!!h&&("field"==i||!y&&!b);if(!!h&&y&&!O&&!b&&(T[I]=h),b&&(x[I]=m),O)return F=!1,"break"},I=0;I<O;I++){var q=N();if("break"===q)break}var M=null,W=null,B=null,G=null;if(M=new(R().List)(Array.from({length:O},(function(e,t){var r=void 0;if(F)t<c.size&&(r=c.get(t),void 0!==x[t]&&(r=x[t]));else if(1==O){var n;r=Q([null==j?void 0:j.defaultValue,null==j||null===(n=j.fieldSettings)||void 0===n?void 0:n.defaultValue,null==Z?void 0:Z.defaultValue])}return r}))),W=new(R().List)(Array.from({length:O},(function(e,t){var r=null;return F?t<p.size&&(r=p.get(t)):(1==D.length||D.length>1)&&(r=D[0]),r}))),y){if(b&&b.validateValues&&W.toJS().filter((function(e){return"value"==e||null==e})).length==O){var z=Z&&Z.toJS?M.toJS().map((function(t){return Z.toJS.call(e.ctx,t,Z)})):M.toJS(),U=b.validateValues(z);y&&T.push(U)}G=new(R().List)(T)}return B=new(R().List)(Array.from({length:O},(function(e,t){var r=null;return F?t<f.size&&(r=f.get(t)):1==O&&Z&&void 0!==Z.type?r=Z.type:1==O&&j&&void 0!==j.type&&(r="!group"==j.type?"number":j.type),r}))),{canReuseValue:F,newValue:M,newValueSrc:W,newValueType:B,newValueError:G,operatorCardinality:O}},pt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=e.settings.fieldSeparator,n="string"==typeof t?t.split(r):t,o=t?pr(e,t):e,i=o,a=null,l=[];do{var u=i===e?e.fields:i.subfields;if(!u||!Object.keys(u).length){i=a=null;break}a=Object.keys(u)[0],l.push(a),i=u[a]}while("!struct"==i.type||"!group"==i.type);return(n||[]).concat(l).join(r)},ft=function(e,t){var r=hr(e,t);return r?r.operators:[]},dt=function(e,t){var r=ft(e,t);return r?r[0]:null},gt=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return null;var n=t.settings.fieldSeparator,o=Array.isArray(e)?e:e.split(n);return r?o:o.map((function(e,t,r){return r.slice(0,t+1)})).map((function(e){return e.join(n)}))},vt=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return ht(e,t,r,"funcs","subfields")},ht=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"fields",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"subfields";if(!e)return null;var i=t.settings.fieldSeparator,a=Array.isArray(e)?e:e.split(i),l=r?Array.isArray(r)?r:r.split(i):[];return a.slice(l.length).map((function(e,t,r){return r.slice(0,t+1)})).map((function(e){return[].concat((0,ee.Z)(l),(0,ee.Z)(e)).join(i)})).map((function(e){var r=pr(t,e,n,o);return r&&r.label||ut()(e.split(i))})).filter((function(e){return null!=e}))},mt=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e)return null;var n=r&&pr(t,r)||null,o=t.settings.fieldSeparator,i=Array.isArray(e)?e:e.split(o),a=r?Array.isArray(r)?r:r.split(o):[];return i.slice(a.length).map((function(e,t,r){return r.slice(0,t+1)})).map((function(e){return{part:[].concat((0,ee.Z)(a),(0,ee.Z)(e)).join(o),key:e[e.length-1]}})).map((function(e){var r=e.part;return{key:e.key,cnf:pr(t,r)}})).map((function(e,t,r){return[e.key,e.cnf,t>0?r[t-1].cnf:n]}))},yt=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=t&&"object"==(0,V.Z)(t)&&!!t.func&&!!t.arg,l=e.settings.showLabels,u=hr(e,t),s=yr(e,t,r,null,o)||{},c=mr(e,r,t)||{},p=i?1:c.cardinality,f=null;if(p>1){var d=s.valueLabels||c.valueLabels;d&&(f=d[n]),f&&"object"!=(0,V.Z)(f)&&(f={label:f,placeholder:f}),f||(f={label:e.settings.valueLabel+" "+(n+1),placeholder:e.settings.valuePlaceholder+" "+(n+1)})}else{var g=s.valueLabel,v=s.valuePlaceholder;a&&(g||(g=u.label||t.arg),v||l||(v=u.label||t.arg)),f={label:g||e.settings.valueLabel,placeholder:v||e.settings.valuePlaceholder}}return f};function bt(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=[],i=[];if(!t)return{widgets:o,valueSrcs:i};var a="object"==(0,V.Z)(t)&&(!!t.func&&!!t.arg||t._isFuncArg),l=hr(e,t),u=r?e.operators[r]:null;if(l&&l.widgets){var s=function(){var s=l.widgets[c];if(!e.widgets[c])return"continue";var p=e.widgets[c].valueSrc||"value",f=!0;if("field"==c&&(f=f&&wt(e,["field"],l).length>0),"func"==c&&(f=f&&wt(e,["func"],l).length>0),"value"!=n||s.operators||a||"!case_value"==t||(f=!1),s.operators&&r&&(f=f&&-1!=s.operators.indexOf(r)),n&&n!=p&&"const"!=n&&(f=!1),u&&0==u.cardinality&&"value"!=p&&(f=!1),f){o.push(c);var d=l.valueSources&&-1!=l.valueSources.indexOf(p);u&&u.valueSources&&-1==u.valueSources.indexOf(p)&&(d=!1),d&&!i.find((function(e){return e==p}))&&i.push(p)}};for(var c in l.widgets)s()}var p=function(e){var t=0;return l.preferWidgets?l.preferWidgets.includes(e)&&(t+=10-l.preferWidgets.indexOf(e)):e==l.mainWidget&&(t+=100),"field"==e&&(t-=1),"func"==e&&(t-=2),t};return o.sort((function(e,t){return p(t)-p(e)})),{widgets:o,valueSrcs:i}}var Ot=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=bt(e,t,r,n),i=o.widgets;return i},wt=function(e,t,r){return r?t.filter((function(t){var n=!0;if("field"==t&&e._fieldsCntByType){var o=r._isFuncArg?0:1;n=n&&e._fieldsCntByType[r.type]>o}return"func"==t&&(e._funcsCntByType&&(n=n&&!!e._funcsCntByType[r.type]),r.funcs&&(n=n&&r.funcs.length>0)),n})):t},jt=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=bt(e,t,r,null),i=o.valueSrcs,a=wt(e,i,n);return a},Ft=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=bt(e,t,r,n),i=o.widgets,a=null;return i.length&&(a=i[0]),a},St=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(e){var i=hr(t,e)||{},a=t.settings.fieldSeparator,l=Array.isArray(e)?e:e.split(a),u=Array.isArray(e)?e.join(a):e;if(null!=o&&o.useTableName&&i.tableName){var s=(0,ee.Z)(l);s[0]=i.tableName,u=s.join(a)}if(i.fieldName&&(u=i.fieldName),n){var c=hr(t,n)||{},p=n;c.fieldName&&(p=c.fieldName),0==u.indexOf(p+a)?u=u.slice((p+a).length):r.errors.push("Can't cut group ".concat(p," from field ").concat(u))}return u}},Ct=r(89937),Et=r.n(Ct),Lt=r(49335),kt=r.n(Lt),Pt=r(53660),_t=r.n(Pt);function Vt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Zt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vt(Object(r),!0).forEach((function(t){(0,P.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Rt(e,t){return _t().apply(e,t)}var Dt={CALL:function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];return e.call.apply(e,[t].concat(n))},JSX:function(e,t){return{type:e,props:t}},mergeObjects:function(e,t){return Zt(Zt({},e),t)},fromEntries:function(e){return Object.fromEntries(e)},strlen:function(e){return(null==e?void 0:e.length)||0},regexTest:function(e,t,r){return null!=(null==e?void 0:e.match(new RegExp(t,r)))},now:function(){return new Date},date_add:function(e,t,r){return se()(e).add(t,r).toDate()},toLowerCase:function(e){return e.toLowerCase()},toUpperCase:function(e){return e.toUpperCase()}};function xt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Tt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function At(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Tt(Object(r),!0).forEach((function(t){(0,P.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Nt(e,t,r){var n;try{n=_t().apply(e,t)}catch(e){throw e.message="".concat(r.join(".")," :: ").concat(e.message),e}return n}function It(e,t,r,n){var o;try{o=t.call.apply(t,[e].concat((0,ee.Z)(r)))}catch(e){throw e.message="".concat(n.join(".")," :: ").concat(e.message),e}return o}!function(){for(var e in Dt)t=e,r=Dt[e],_t().add_operation(t,r);var t,r}();var qt=["conjunctions","fields","types","operators","widgets","settings","funcs","ctx"],Mt={asyncFetch:{type:"f",args:["search","offset"]},labelYes:{type:"r"},labelNo:{type:"r"},marks:{type:"r",isArr:!0},validateValue:{type:"f",args:["val","fieldSettings","op","opDef","rightFieldDef"]}},Wt=At(At({},Mt),{},{factory:{type:"rf"},formatValue:{type:"f",args:["val","fieldDef","wgtDef","isForDisplay","op","opDef","rightFieldDef"]},sqlFormatValue:{type:"f",args:["val","fieldDef","wgtDef","op","opDef","rightFieldDef"]},spelFormatValue:{type:"f",args:["val","fieldDef","wgtDef","op","opDef","rightFieldDef"]},spelImportValue:{type:"f",args:["val"]},mongoFormatValue:{type:"f",args:["val","fieldDef","wgtDef","op","opDef"]},elasticSearchFormatValue:{type:"f",args:["queryType","val","op","field","config"]},jsonLogic:{type:"f",args:["val","fieldDef","wgtDef","op","opDef"]},validateValue:{type:"f",args:["val","fieldSettings","op","opDef","rightFieldDef"]},toJS:{type:"f",args:["val"]}}),Bt={options:{factory:{type:"rf"}},formatOp:{type:"f",args:["field","op","vals","valueSrc","valueType","opDef","operatorOptions","isForDisplay","fieldDef"]},mongoFormatOp:{type:"f",args:["field","op","vals","useExpr","valueSrc","valueType","opDef","operatorOptions","fieldDef"]},sqlFormatOp:{type:"f",args:["field","op","vals","valueSrc","valueType","opDef","operatorOptions","fieldDef"]},spelFormatOp:{type:"f",args:["field","op","vals","valueSrc","valueType","opDef","operatorOptions","fieldDef"]},jsonLogic:{type:"f",ignore:"string",args:["field","op","vals","opDef","operatorOptions","fieldDef"]},elasticSearchQueryType:{type:"f",ignore:"string",args:["valueType"]},textSeparators:{type:"r",isArr:!0}},Gt={widgetProps:Wt,opProps:Bt},zt={fields:{x:{fieldSettings:Mt,widgets:{x:Gt},mainWidgetProps:Wt}},widgets:{x:Wt},conjunctions:{x:{formatConj:{type:"f",args:["children","conj","not","isForDisplay"]},sqlFormatConj:{type:"f",args:["children","conj","not"]},spelFormatConj:{type:"f",args:["children","conj","not","omitBrackets"]}}},operators:{x:Bt},types:{x:{widgets:{x:Gt}}},funcs:{x:{renderBrackets:{type:"r",isArr:!0},renderSeps:{type:"r",isArr:!0},jsonLogic:{type:"f",ignore:"string",args:["formattedArgs"]},jsonLogicImport:{type:"f",args:["val"]},formatFunc:{type:"f",args:["formattedArgs","isForDisplay"]},sqlFormatFunc:{type:"f",args:["formattedArgs"]},mongoFormatFunc:{type:"f",args:["formattedArgs"]},spelFormatFunc:{type:"f",args:["formattedArgs"]}}},settings:{locale:{mui:{type:"f",args:[],invokeWith:[],ignore:"jl"}},canCompareFieldWithField:{type:"f",args:["leftField","leftFieldConfig","rightField","rightFieldConfig","op"]},formatReverse:{type:"f",args:["q","op","reversedOp","operatorDefinition","revOperatorDefinition","isForDisplay"]},sqlFormatReverse:{type:"f",args:["q"]},spelFormatReverse:{type:"f",args:["q"]},formatField:{type:"f",args:["field","parts","label2","fieldDefinition","config","isForDisplay"]},formatSpelField:{type:"f",args:["field","parentField","parts","partsExt","fieldDefinition","config"]},formatAggr:{type:"f",args:["whereStr","aggrField","operator","value","valueSrc","valueType","opDef","operatorOptions","isForDisplay","aggrFieldDef"]},normalizeListValues:{type:"f",args:["listValues","type","fieldSettings"]},renderConfirm:{type:"f",args:["props"]},useConfirm:{type:"f",args:[]},renderField:{type:"rf"},renderOperator:{type:"rf"},renderFunc:{type:"rf"},renderConjs:{type:"rf"},renderButton:{type:"rf"},renderButtonGroup:{type:"rf"},renderValueSources:{type:"rf"},renderProvider:{type:"rf"},renderSwitch:{type:"rf"},renderSwitchPrefix:{type:"r"},renderItem:{type:"rf"},renderBeforeWidget:{type:"rf"},renderAfterWidget:{type:"rf"},renderBeforeActions:{type:"rf"},renderAfterActions:{type:"rf"},renderRuleError:{type:"rf"}}},Ut=function(e,t){if(e.__fieldNames)throw new Error("Don't apply `compressConfig()` to extended config");var r=kt()(e,qt);delete r.ctx;for(var n=function(e){return"object"==(0,V.Z)(e)&&null!==e&&!Array.isArray(e)},o=function e(t,r,o,i){if(n(t)){if(U(t)&&(t=z(t)),"funcs"===o[0]&&!r){var a=o[o.length-1];(r=gr({funcs:i.BasicFuncs},a)||void 0)&&(t.$$key=a)}if(void 0!==r&&n(r))for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(!Object.keys(t).includes(l)||void 0===t[l]&&void 0!==r[l]?t[l]="$$deleted":(t[l]=e(t[l],r[l],[].concat((0,ee.Z)(o),[l]),i),void 0===t[l]&&delete t[l]));for(var u in t)if(Object.prototype.hasOwnProperty.call(t,u)){var s;r&&Object.keys(r).includes(u)||(t[u]=e(t[u],null===(s=r)||void 0===s?void 0:s[u],[].concat((0,ee.Z)(o),[u]),i)),void 0===t[u]&&delete t[u]}0===Object.keys(t).length&&(t=void 0)}else Array.isArray(t)&&t.forEach((function(r,n){t[n]=e(t[n],void 0,[].concat((0,ee.Z)(o),[n]),i)}));if(void 0===r||!I(t,r,!0)){if("function"==typeof t)throw new Error("compressConfig: function at ".concat(o.join(".")," should be converted to JsonLogic"));return t}},i=0,a=qt;i<a.length;i++){var l=a[i];if("ctx"===l);else if("fields"===l)r[l]=Et()(r[l]),o(r[l],{},[l]);else if("funcs"===l)for(var u in r[l]=Et()(r[l]||{}),r[l])o(r[l][u],null,[l,u],{BasicFuncs:g});else r[l]=Et()(r[l]),o(r[l],t[l],[l])}return r},$t=function(e,t,r){if(!e.settings.useConfigCompress)throw new Error("Please enable `useConfigCompress` in config settings to use decompressConfig()");for(var n={},o=function(e){return"object"==(0,V.Z)(e)&&null!==e&&!Array.isArray(e)},i=function e(t,r,n){if(o(r))for(var i in o(t)||(t={}),r)Object.prototype.hasOwnProperty.call(r,i)&&("$$deleted"===r[i]?delete t[i]:t[i]=e(t[i],r[i],[].concat((0,ee.Z)(n),[i])));else t=Array.isArray(r)?Et()(r):r;return t},a=function e(t,r,n){var a=!1;if(o(t)&&Object.prototype.hasOwnProperty.call(t,"$$key")&&t.$$key){var l=gr({funcs:n.BasicFuncs},t.$$key);if(!l)throw new Error("decompressConfig: basic function not found by key ".concat(t.$$key," at ").concat(r.join(".")));delete t.$$key,t=i(Et()(l),t,r),a=!0}if(!a)if(o(t))for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&(t[u]=e(t[u],[].concat((0,ee.Z)(r),[u]),n));else if(Array.isArray(t)){var s,c=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return xt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xt(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}(t);try{for(c.s();!(s=c.n()).done;){var p=s.value;t[p]=e(t[p],[].concat((0,ee.Z)(r),[p]),n)}}catch(e){c.e(e)}finally{c.f()}}return t},l=0,u=qt;l<u.length;l++){var s=u[l];"ctx"===s?n[s]=re()({},t.ctx||{},r||{}):"funcs"===s?(n[s]=Et()(e[s]||{}),a(n[s],[s],{BasicFuncs:g})):"fields"===s?n[s]=Et()(e[s]||{}):(n[s]=Et()(t[s]||{}),i(n[s],e[s]||{},[s]))}return n},Jt=function(e){return e.__compliled||(Yt(e=At({},e),e,{ctx:e.ctx},zt,[]),Object.defineProperty(e,"__compliled",{enumerable:!1,writable:!1,value:!0})),e};function Yt(e,t,r,n,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];if(t){var a=!i.length;for(var l in n){var u=n[l],s="x"===l?i:[].concat((0,ee.Z)(i),[l]);if(a&&(e[l]=Et()(e[l])),"r"===u.type){var c=t,p=c[l];if(u.isArr)for(var f in p){var d=Xt(p[f],r,[].concat((0,ee.Z)(s),[f]));d!==p[f]&&(o.push("Compiled ".concat(s.join("."),"[").concat(f,"]")),p[f]=d)}else{var g=Xt(p,r,s,void 0);g!==p&&(o.push("Compiled R ".concat(s.join("."))),c[l]=g)}}else if("rf"===u.type){var v=t,h=v[l],m=Ht(h,r,s,u.ignore);m!==h&&(o.push("Compiled JL-RF ".concat(s.join("."))),v[l]=m)}else if("f"===u.type){var y,b=t,O=b[l],w=Kt(O,r,s,u.args,u.ignore);u.invokeWith&&w&&"function"==typeof w&&(w=(y=w).call.apply(y,[null].concat((0,ee.Z)(u.invokeWith)))),w!==O&&(o.push("Compiled JL-F ".concat(s.join("."))),b[l]=w)}else if("x"===l)for(var j in t){s=[].concat((0,ee.Z)(i),[j]);var F=t[j];Yt(e,F,r,u,o,s),F.subfields&&Yt(e,F.subfields,r,n,o,s)}else{var S=t[l];Yt(e,S,r,u,o,s)}}}}function Ht(e,t,r){return J(e)?function(n,o){o=o||(null==t?void 0:t.ctx);var i=Nt(e,{props:n,ctx:o},r);return"string"==typeof i&&(i={type:i,props:n}),Xt(i,{ctx:o},r)}:"string"==typeof e?function(n,o){o=o||(null==t?void 0:t.ctx);var i=e.split(".").reduce((function(e,t){return null==e?void 0:e[t]}),o);return i?It(this,i,[n,o],r):Xt({type:e,props:n},{ctx:o},r)}:e}function Kt(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;return J(e)&&"jl"!==o?function(){for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];var l=this||(null==t?void 0:t.ctx),u=(n||[]).reduce((function(e,t,r){return At(At({},e),{},(0,P.Z)({},t,i[r]))}),{args:i,ctx:l}),s=Nt(e,u,r);return s}.bind(null==t?void 0:t.ctx):"string"==typeof e&&"string"!==o?function(){var n=this||(null==t?void 0:t.ctx),o=e.split(".").reduce((function(e,t){return null==e?void 0:e[t]}),n);if(o){for(var i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return It(this,o,a,r)}throw new Error("".concat(r.join(".")," :: Function ").concat(e," is not found in ctx"))}.bind(null==t?void 0:t.ctx):e}function Qt(e,t){var r;return(null==t||null===(r=t.components)||void 0===r?void 0:r[e])||t.W[e]||t.O[e]}function Xt(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;if($(e)){var o,i=e.type,a=e.props;if("string"!=typeof i)throw new Error("renderReactElement for ".concat(r.join("."),": type should be string"));var l,u=Qt(i,t.ctx)||i.toLowerCase();void 0!==n&&(a=At(At({},a),{},{key:n})),null!==(o=a)&&void 0!==o&&o.children&&(l=Xt(a.children,t,r),a=At(At({},a),{},{children:l}));var s=t.ctx.RCE(u,a);return s}return e instanceof Array?e.map((function(e,n){return Xt(e,t,r,""+n)})):e}function er(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return tr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?tr(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}function tr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function rr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rr(Object(r),!0).forEach((function(t){(0,P.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var or=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e.__configId||(r&&e.settings.useConfigCompress&&(e=Jt(e)),(e=nr({},e)).settings=re()({},le,e.settings),e._fieldsCntByType={},e._funcsCntByType={},e.types=Et()(e.types),ir(e.types,e),e.fields=Et()(e.fields),e.__fieldNames={},lr(e.fields,e),e.funcs=Et()(e.funcs),ur(e.funcs,e),se().locale(e.settings.locale.moment),Object.defineProperty(e,"__configId",{enumerable:!1,writable:!1,value:t||oe()})),e};function ir(e,t){for(var r in e)ar(0,e[r],t)}function ar(e,t,r){var n=null,o=null;for(var i in t.mainWidget=t.mainWidget||Object.keys(t.widgets).filter((function(e){return"field"!=e&&"func"!=e}))[0],t.widgets){var a=t.widgets[i];if(a.operators){var l=a.operators;t.excludeOperators&&(l=l.filter((function(e){return!t.excludeOperators.includes(e)}))),n=H(n,l)}a.defaultOperator&&(o=a.defaultOperator),i==t.mainWidget&&(a=re()({},{widgetProps:t.mainWidgetProps||{}},a)),t.widgets[i]=a}t.valueSources||(t.valueSources=Object.keys(r.settings.valueSourcesInfo));var u,s=er(t.valueSources);try{for(s.s();!(u=s.n()).done;){var c=u.value;"value"==c||t.widgets[c]||(t.widgets[c]={})}}catch(e){s.e(e)}finally{s.f()}!t.operators&&n&&(t.operators=Array.from(new Set(n))),!t.defaultOperator&&o&&(t.defaultOperator=o)}function lr(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(var n in e)sr(e[n],t,[].concat((0,ee.Z)(r),[n])),e[n].subfields&&lr(e[n].subfields,t,[].concat((0,ee.Z)(r),[n]))}function ur(e,t){if(e)for(var r in e){var n=e[r];for(var o in n.returnType&&(t._funcsCntByType[n.returnType]||(t._funcsCntByType[n.returnType]=0),t._funcsCntByType[n.returnType]++),n.args)sr(n.args[o],t,null,!0);if(n.args){var i,a=!0,l=er(Object.keys(n.args).reverse());try{for(l.s();!(i=l.n()).done;){var u=i.value,s=n.args[u];!a&&s.isOptional&&delete s.isOptional,s.isOptional||(a=!1)}}catch(e){l.e(e)}finally{l.f()}}n.subfields&&ur(n.subfields,t)}}function sr(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=null,i=null,a=t.types[e.type],l=e.excludeOperators||[];if("!struct"!=e.type&&"!group"!=e.type){var u=["listValues","treeValues","allowCustomValues","validateValue"];e.fieldSettings||(e.fieldSettings={});for(var s=0,c=u;s<c.length;s++){var p=c[s];e[p]&&(e.fieldSettings[p]=e[p],delete e[p])}if(e.fieldSettings.listValues&&t.settings.normalizeListValues&&(e.fieldSettings.listValues=t.settings.normalizeListValues.call(t.ctx,e.fieldSettings.listValues,e.type,e.fieldSettings)),e.fieldSettings.treeValues&&t.settings.normalizeListValues&&(e.fieldSettings.treeValues=t.settings.normalizeListValues.call(t.ctx,e.fieldSettings.treeValues,e.type,e.fieldSettings)),!a)return void(e.disabled=!0);n||(t._fieldsCntByType[e.type]||(t._fieldsCntByType[e.type]=0),t._fieldsCntByType[e.type]++),e.widgets||(e.widgets={}),n&&(e._isFuncArg=!0),e.mainWidget=e.mainWidget||a.mainWidget,e.valueSources=e.valueSources||a.valueSources;var f=a.excludeOperators||[],d=function(){var t=e.widgets[g]||{},r=a.widgets[g]||{};if(!n){var u=[].concat((0,ee.Z)(l),(0,ee.Z)(f)),s=e.preferWidgets&&("field"==g||e.preferWidgets.includes(g))||u.length>0;if(t.operators){var c=t.operators.filter((function(e){return!u.includes(e)}));o=[].concat((0,ee.Z)(o||[]),(0,ee.Z)(c))}else if(s&&r.operators){var p=r.operators.filter((function(e){return!u.includes(e)}));o=[].concat((0,ee.Z)(o||[]),(0,ee.Z)(p))}t.defaultOperator&&(i=t.defaultOperator)}g==e.mainWidget&&(t=re()({},{widgetProps:e.mainWidgetProps||{}},t)),e.widgets[g]=t};for(var g in a.widgets)d();n||(!e.operators&&o&&(e.operators=Array.from(new Set(o))),!e.defaultOperator&&i&&(e.defaultOperator=i))}var v=fr(t,r);v&&(e.fieldName=v),r&&e.fieldName&&(t.__fieldNames[e.fieldName]=r)}var cr=function(e,t,r,n,o,i){if(Array.isArray(e))return t},pr=function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"fields",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"subfields";if(!t)return null;if("!case_value"==t)return{type:"case_value",mainWidget:"case_value",widgets:{case_value:e.widgets.case_value}};var i=(null==e||null===(r=e.settings)||void 0===r?void 0:r.fieldSeparator)||".",a=Array.isArray(t)?t:t.split(i),l=e[n];if(!l)return null;for(var u=l,s=null,c=[],p=0;p<a.length;p++){var f=a[p];c.push(f);var d=c.join(i);s=u[d],p<a.length-1&&(s&&s[o]?(u=s[o],c=[]):s=null)}return s},fr=function(e,t){if(!t)return null;for(var r,n,o=e.settings.fieldSeparator,i=(0,ee.Z)(t),a=[];void 0!==(r=i.pop())&&i.length>0;)if(a.unshift(r),(n=pr(e,i)).fieldName)return[n.fieldName].concat(a).join(o);return null},dr=function(e,t){var r=e.settings.fieldSeparator,n=Array.isArray(t)?t.join(r):t;return e.__fieldNames[n]?e.__fieldNames[n].join(r):n},gr=function(e,t){return t&&pr(e,t,"funcs","subfields")||null},vr=function(e,t,r){var n=gr(e,t);if(!n)return null;var o=n.args&&n.args[r]||null;if(!o)return null;var i=e.types[o.type]||{};return ae()({},i,o||{},cr)},hr=function(e,t){if(!t)return null;if("object"==(0,V.Z)(t)&&!t.func&&t.type)return t;if("object"==(0,V.Z)(t)&&t.func&&t.arg)return vr(e,t.func,t.arg);var r=pr(e,t);if(!r)return null;var n=e.types[r.type]||{};return ae()({},n,r||{},cr)},mr=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t)return null;var n=e.operators[t];if(r){var o=hr(e,r),i=Ft(e,r,t),a=e.widgets[i]||{},l=(o&&o.widgets?o.widgets[i]:{})||{},u=(a.opProps||{})[t],s=(l.opProps||{})[t],c=re()({},n,u,s);return c}return n},yr=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(!t)return null;if(!r&&!n&&"const"!=o&&"!case_value"!=t)return null;var i=hr(e,t);n||(n=Ft(e,t,r,o));var a=e.widgets[n]||{},l=(i&&i.widgets?i.widgets[n]:{})||{},u=l.widgetProps||{},s=("value"==o||!o)&&i&&i.fieldSettings||{},c=re()({},a,u,s);return c},br=function(e){return"object"==(0,V.Z)(e)&&null!==e&&!Array.isArray(e)},Or=function(e,t,r){return"func"==t?wr(e,r):e},wr=function(e,t){return function(e){if(e){var r=e.get("func"),n=r&&gr(t,r);if(n){var o=e,i=!1;for(var a in n.args){var l=n.args[a],u=l.valueSources,s=l.isOptional,c=l.defaultValue,p=wt(t,u,l),f=o.get("args"),d=1==p.length?p[0]:void 0,g=f?f.get(a):void 0,v=g?g.get("value"):void 0,h=(g?g.get("valueSrc"):void 0)||d;if(void 0!==v){var m=Or(v,h,t);if(void 0===m)return;if(m!==v&&(o=o.setIn(["args",a,"value"],m)),i)return}else if(void 0===c||br(c)){if(!s)return;i=!0}else o=(o=o.setIn(["args",a,"value"],Fr(l))).setIn(["args",a,"valueSrc"],"value")}return o}}}(e)},jr=function(e,t,r){var n=r.settings.fieldSeparator;e=e||new(R().Map),Array.isArray(t)&&(t=t.join(n)),e=(e=e.set("func",t)).set("args",new(R().Map));var o=t&&gr(r,t);if(o)for(var i in o.args){var a=o.args[i],l=a.valueSources,u=a.defaultValue,s=wt(r,l,a),c=s.length?s[0]:void 0,p=(u?br(u)&&u.func?"func":"value":void 0)||c;void 0!==u&&(e=e.setIn(["args",i,"value"],Fr(a))),p&&(e=e.setIn(["args",i,"valueSrc"],p))}return e},Fr=function(e){var t=e.defaultValue;return br(t)&&!R().Map.isMap(t)&&t.func?R().fromJS(t,(function(e,t){return R().Iterable.isIndexed(t)?t.toList():t.toOrderedMap()})):t},Sr=function(e,t,r,n,o){if(e&&e.get("func")){e=e.setIn(["args",t,"value"],r);var i=n.valueSources,a=wt(o,i,n),l=1==a.length?a[0]:void 0;l&&(e=e.setIn(["args",t,"valueSrc"],l))}return e},Cr=function(e,t,r,n,o){return e&&e.get("func")&&(e=e.setIn(["args",t],new(R().Map)({valueSrc:r}))),e};function Er(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Lr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Er(Object(r),!0).forEach((function(t){(0,P.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Er(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var kr=function(e,t){var r={usedFields:[]},n=Pr(e,t,r);if(n)return Lr(Lr({},n),r)},Pr=function(e,t,r){if(e){var n=e.get("type"),o=e.get("children1");return("group"===n||"rule_group"===n)&&o&&o.size?_r(e,t,r):"rule"===n?Vr(e,t,r):void 0}},_r=function(e,t,r){var n=e.get("properties")||new Z.Map,o=e.get("children1"),i=e.get("id"),a=o.map((function(e){return Pr(e,t,r)})).filter((function(e){return void 0!==e}));if(a.size){var l=n.get("conjunction");l||(l=_e(t));var u=n.get("not");return{id:i,rules:a.toList(),condition:l.toUpperCase(),not:u}}},Vr=function(e,t,r){var n=e.get("properties")||new Z.Map,o=e.get("id"),i=n.get("operator"),a=n.get("operatorOptions"),l=n.get("field"),u=n.get("value"),s=n.get("valueSrc"),c=n.get("valueType"),p=u.filter((function(e){return void 0===e})).size>0;if(null!=l&&null!=i&&!p){var f=hr(t,l)||{},d=mr(t,i,l)||{},g=f.type||"undefined",v=A(d.cardinality,1),h=t.types[f.type]||{},m=St(l,t,r);if(!(u.size<v)){-1==r.usedFields.indexOf(l)&&r.usedFields.push(l),u=u.toArray(),s=s.toArray(),c=c.toArray();for(var y=[],b=0;b<u.length;b++){var O={type:c[b],value:u[b]};if(y.push(O),"field"==s[b]){var w=u[b];-1==r.usedFields.indexOf(w)&&r.usedFields.push(w)}}var j=a?a.toJS():null;j&&!Object.keys(j).length&&(j=null);var F={id:o,fieldName:m,type:g,input:h.mainWidget,operator:i};return j&&(F.operatorOptions=j),F.values=y,F}}};function Zr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Rr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zr(Object(r),!0).forEach((function(t){(0,P.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Dr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var xr=function(e,t){var r,n={usedFields:[],errors:[]},o=Tr(e,t,n,!0),i=n.errors,a=n.usedFields,l=t.settings.fieldSeparator,u={},s=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Dr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Dr(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}(a);try{for(s.s();!(r=s.n()).done;)for(var c=r.value,p=(hr(t,c),c.split(l)),f=u,d=0;d<p.length;d++){var g=p[d],v=hr(t,p.slice(0,d+1))||{};d!=p.length-1?"!group"==v.type&&"struct"!=v.mode?(f[g]||(f[g]=[{}]),f=f[g][0]):(f[g]||(f[g]={}),f=f[g]):f[g]||(f[g]=null)}}catch(e){s.e(e)}finally{s.f()}return{errors:i,logic:o,data:u}},Tr=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(e){var i,a=e.get("type"),l=e.get("properties")||new Z.Map,u=l.get("isLocked"),s=t.settings.jsonLogic.lockedOp;return"group"===a||"rule_group"===a?i=Ar(e,t,r,n,o):"rule"===a&&(i=Nr(e,t,r,o)),u&&i&&s&&(i=(0,P.Z)({},s,i)),i}},Ar=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=e.get("type"),a=e.get("properties")||new Z.Map,l=a.get("mode"),u=e.get("children1")||new Z.List,s=a.get("field"),c=a.get("conjunction");c||(c=_e(t));var p=t.conjunctions[c],f=p.jsonLogicConj||c.toLowerCase(),d=a.get("not");if("and"==f||"or"==f){var g="rule_group"===i&&!n,v=g&&"struct"!=l?s:o,h=a.get("operator"),m=h&&mr(t,h,s)||null,y=Ir(t,a,r,h,o),b=g&&(!h||0==m.cardinality),O=u.map((function(e){return Tr(e,t,r,!1,v)})).filter((function(e){return void 0!==e}));if(g&&"struct"!=l&&!b){if(null==y)return}else if(!O.size)return;var w={};if(1!=O.size||n?w[f]=O.toList().toJS():w=O.first(),d&&(w={"!":w}),g&&"struct"!=l){var j=Wr(r,t,s,o);if(b){var F=h||"some";w=(0,P.Z)({},F,[j,w])}else{var S=O.size?{filter:[j,w]}:j,C={reduce:[S,{"+":[1,{var:"accumulator"}]},0]};w=Gr(t,a,C,y,h)}}return w}r.errors.push("Conjunction ".concat(f," is not supported"))},Nr=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=e.get("properties")||new Z.Map,i=o.get("field"),a=o.get("operator"),l=o.get("operatorOptions");if((l=l?l.toJS():null)&&!Object.keys(l).length&&(l=null),null!=i&&null!=a){var u=hr(t,i)||{},s=mr(t,a,i)||{},c=s.reversedOp,p=mr(t,c,i)||{},f=!1;if(s.jsonLogic||p.jsonLogic){if(!s.jsonLogic&&p.jsonLogic){f=!0;var d=[c,a];a=d[0],c=d[1];var g=[p,s];s=g[0],p=g[1]}var v=Ir(t,o,r,a,n);if(void 0!==v){var h=Wr(r,t,i,n);return Gr(t,o,h,v,a,l,u,f)}}else r.errors.push("Operator ".concat(a," is not supported"))}},Ir=function(e,t,r,n,o){var i=t.get("field"),a=t.get("valueSrc"),l=t.get("valueType"),u=hr(e,i)||{},s=mr(e,n,i)||{},c=A(s.cardinality,1),p=t.get("value"),f=t.get("asyncListValues");if(null!=p){var d=[],g=[],v=r.usedFields,h=p.map((function(t,c){var p=a?a.get(c):null,v=l?l.get(c):null,h=Or(t,p,e),m=Ft(e,i,n,p),y=x()(yr(e,i,n,m,p),["factory"]),b=qr(r,e,h,p,v,y,u,n,s,o,f);return void 0!==b&&(d.push(p),g.push(v)),b})),m=h.filter((function(e){return void 0===e})).size>0;if(!(h.size<c||m))return c>1?h.toArray():1==c?h.first():null;r.usedFields=v}},qr=function(e,t,r,n,o,i,a,l,u){var s=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,c=arguments.length>10?arguments[10]:void 0;if(void 0!==r){var p;if("field"==n)p=Wr(e,t,r,s);else if("func"==n)p=Mr(e,t,r,s);else if("function"==typeof i.jsonLogic){var f=i.jsonLogic,d=[r,Rr(Rr({},kt()(a,["fieldSettings","listValues"])),{},{asyncListValues:c}),x()(i,["formatValue","mongoFormatValue","sqlFormatValue","jsonLogic","elasticSearchFormatValue","spelFormatValue"])];l&&(d.push(l),d.push(u)),p=f.call.apply(f,[t.ctx].concat(d))}else p=r;return p}},Mr=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=r.get("func"),i=r.get("args"),a=gr(t,o);if(a.jsonLogic){var l={};for(var u in a.args){var s=a.args[u],c=hr(t,s),p=i?i.get(u):void 0,f=p?p.get("value"):void 0,d=p?p.get("valueSrc"):void 0,g=qr(e,t,f,d,s.type,c,s,null,null,n);if(null!=f&&void 0===g)return void e.errors.push("Can't format value of arg ".concat(u," for func ").concat(o));void 0!==g&&(l[u]=g)}var v,h=Object.values(l);if("function"==typeof a.jsonLogic){var m=a.jsonLogic,y=[l];v=m.call.apply(m,[t.ctx].concat(y))}else{var b=a.jsonLogic||o,O=!!a.jsonLogicIsMethod;if(O){var w=h[0],j=h.slice(1);v=j.length?{method:[w,b,j]}:{method:[w,b]}}else v=(0,P.Z)({},b,h)}return v}e.errors.push("Func ".concat(o," is not supported"))},Wr=function(e,t,r){var n,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=t.settings,a=i.fieldSeparator,l=i.jsonLogic;if(r){Array.isArray(r)&&(r=r.join(a));var u=hr(t,r)||{},s=St(r,t,e,o),c=u.jsonLogicVar||("!group"==u.type?l.groupVarKey:"var");n=(0,P.Z)({},c,s),-1==e.usedFields.indexOf(r)&&e.usedFields.push(r)}return n},Br=function(e,t,r,n){var o=e,i=A(t.cardinality,1),a=A(t._jsonLogicIsRevArgs,!1);"string"==typeof t.jsonLogic&&(o=t.jsonLogic);var l=["<","<=",">",">="],u=["==","!="];return function(e,t,s,c,p){return 0==i&&u.includes(o)?(0,P.Z)({},o,[r,null]):0==i?(0,P.Z)({},o,r):1==i&&a?(0,P.Z)({},o,[n,r]):1==i?(0,P.Z)({},o,[r,n]):2==i&&l.includes(o)?(0,P.Z)({},o,[n[0],r,n[1]]):(0,P.Z)({},o,[r].concat((0,ee.Z)(n)))}},Gr=function(e,t,r,n,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,l=arguments.length>7&&void 0!==arguments[7]&&arguments[7],u=t.get("field"),s=mr(e,o,u)||{},c="function"==typeof s.jsonLogic?s.jsonLogic:Br(o,s,r,n),p=[r,o,n,x()(s,["formatOp","mongoFormatOp","sqlFormatOp","jsonLogic","spelFormatOp"]),i,a],f=c.call.apply(c,[e.ctx].concat(p));return l&&(f={"!":f}),f};function zr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ur(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zr(Object(r),!0).forEach((function(t){(0,P.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var $r=function(e){return"object"==(0,V.Z)(e)&&null!==e&&!Array.isArray(e)},Jr=function(e,t){return Yr(e,t,!1)},Yr=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n={errors:[]},o=Hr([],e,t,n);return r?[o,n.errors]:(n.errors.length&&console.warn("Errors while exporting to MongoDb:",n.errors),o)},Hr=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:void 0;if(t){var u=t.get("type");return"group"===u||"rule_group"===u?Kr(e,t,r,n,o,i,a,l):"rule"===u?Qr(e,t,r,n,o,i,a,l):void 0}},Kr=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=t.get("type"),a=t.get("properties")||new Z.Map,l=t.get("children1")||new Z.List,u=r.settings.canShortMongoQuery,s=e.filter((function(e){return"rule_group"==e.get("type")})).length>0,c=e.filter((function(e){return"rule_group"==e.get("type")})).map((function(e){return e.get("properties").get("field")})).slice(-1).pop(),p=s&&c,f="rule_group"===i?a.get("field"):null,d=St(f,r,n,p),g=hr(r,f)||{},v=g.mode,h=f&&"array"==v,m=o?!a.get("not"):a.get("not"),y=l.map((function(o){return Hr([].concat((0,ee.Z)(e),[t]),o,r,n,m,"array"!=v,"array"==v?function(e){return"$$el.".concat(e)}:void 0)})).filter((function(e){return void 0!==e}));if(h||y.size){var b=a.get("conjunction");b||(b=_e(r));var O=r.conjunctions[b],w=O.reversedConj;m&&w&&(b=w,O=r.conjunctions[b]);var j,F=O.mongoConj;if(1==y.size)j=y.first();else if(y.size>1){var S=y.toList().toJS(),C=u&&"$and"==F;C&&(j=S.reduce((function(e,t){if(e){for(var r in t){if("$"==r[0]){e=void 0;break}if(null==e[r])e[r]=t[r];else{var n=e[r],o=t[r];if($r(n)||(n={$eq:n}),$r(o)||(o={$eq:o}),Object.keys(n)[0]==Object.keys(o)[0]){e=void 0;break}e[r]=Object.assign({},n,o)}}return e}}),{})),j||(j=(0,P.Z)({},F,S))}if(f)if("array"==v){var E={$size:{$ifNull:["$"+d,[]]}},L=j?{$size:{$ifNull:[{$filter:{input:"$"+d,as:"el",cond:j}},[]]}}:E;j={$expr:j=Hr(e,t.set("type","rule"),r,n,!1,!1,(function(e){return L}),E)}}else j=(0,P.Z)({},d,{$elemMatch:j});return j}},Qr=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:void 0,u=t.get("properties")||new Z.Map,s=e.filter((function(e){return"rule_group"==e.get("type")})).length>0,c=e.filter((function(e){return"rule_group"==e.get("type")})).map((function(e){return e.get("properties").get("field")})).slice(-1).pop(),p=s&&c,f=u.get("operator"),d=u.get("operatorOptions"),g=u.get("field"),v=u.get("value"),h=u.get("valueSrc"),m=u.get("valueType"),y=u.get("asyncListValues");if(null!=g&&null!=f&&void 0!==v){var b=hr(r,g)||{},O=mr(r,f,g)||{},w=O.reversedOp,j=mr(r,w,g)||{},F=A(O.cardinality,1),S=o;if(S&&w){var C=[w,f];f=C[0],w=C[1];var E=[j,O];O=E[0],j=E[1],S=!1}var L=St(g,r,n,p),k=[],P=[],V=!1,R=v.map((function(e,t){var o=h?h.get(t):null,i=m?m.get(t):null,a=Or(e,o,r),l=Ft(r,g,f,o),u=x()(yr(r,g,f,l,o),["factory"]),s=Xr(n,r,a,o,i,u,b,p,f,O,y),c=(0,_.Z)(s,2),d=c[0],v=c[1];return void 0!==d&&(V=V||v,k.push(o),P.push(i)),d}));a&&(V=!0);var D=V&&i,T=R.filter((function(e){return void 0===e})).size>0;if(!(R.size<F||T)){var N=F>1?R.toArray():1==F?R.first():null,I=O.mongoFormatOp;if(I){var q=[a?a(L):L,f,void 0!==l&&null==N?l:N,V,k.length>1?k:k[0],P.length>1?P:P[0],x()(O,["formatOp","mongoFormatOp","sqlFormatOp","jsonLogic","spelFormatOp"]),d,b],M=I.call.apply(I,[r.ctx].concat(q));return D&&(M={$expr:M}),S&&(M={$not:M}),M}n.errors.push("Operator ".concat(f," is not supported"))}}},Xr=function(e,t,r,n,o,i,a,l,u,s,c){if(void 0===r)return[void 0,!1];var p,f=!1;if("field"==n){var d=en(e,t,r,l),g=(0,_.Z)(d,2);p=g[0],f=g[1]}else if("func"==n){var v=tn(e,t,r,l),h=(0,_.Z)(v,2);p=h[0],f=h[1]}else if("function"==typeof i.mongoFormatValue){var m=i.mongoFormatValue,y=[r,Ur(Ur({},kt()(a,["fieldSettings","listValues"])),{},{asyncListValues:c}),x()(i,["formatValue","mongoFormatValue","sqlFormatValue","jsonLogic","elasticSearchFormatValue","spelFormatValue"])];u&&(y.push(u),y.push(s)),p=m.call.apply(m,[t.ctx].concat(y))}else p=r;return[p,f]},en=function(e,t,r,n){var o,i=t.settings.fieldSeparator;if(r){var a=hr(t,r)||{},l=Array.isArray(r)?r:r.split(i),u=(gt(r,t),ht(r,t)),s=u?u.join(i):null;o="$"+(0,t.settings.formatField)(St(r,t,e,n),l,s,a,t,!1)}return[o,!0]},tn=function(e,t,r,n){var o,i=r.get("func"),a=r.get("args"),l=gr(t,i),u=l.mongoFunc||i,s=l.mongoArgsAsObject,c={},p=0,f=void 0;for(var d in l.args){var g=l.args[d],v=hr(t,g),h=a?a.get(d):void 0,m=h?h.get("value"):void 0,y=h?h.get("valueSrc"):void 0,b=h?h.get("asyncListValues"):void 0,O=Ft(t,v,null,y),w=x()(yr(t,v,null,O,y),["factory"]),j=Xr(e,t,m,y,g.type,w,v,n,null,null,b),F=(0,_.Z)(j,2),S=F[0];if(F[1],null!=m&&void 0===S)return e.errors.push("Can't format value of arg ".concat(d," for func ").concat(i)),[void 0,!1];p++,void 0!==S&&(c[d]=S,f=S)}if("function"==typeof l.mongoFormatFunc){var C=l.mongoFormatFunc,E=[c];o=C.call.apply(C,[t.ctx].concat(E))}else{if(null===l.mongoFormatFunc)return e.errors.push("Functon ".concat(u," is not supported")),[void 0,!1];o=s?(0,P.Z)({},u,c):1==p&&void 0!==f?(0,P.Z)({},u,f):(0,P.Z)({},u,Object.values(c))}return[o,!0]},rn=r(57679),nn=r.n(rn)();nn.trim=function(e){return"'"==e.charAt(0)?e.substring(1,e.length-1):e},nn.escapeLike=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=nn.escape(e);return"'"+(n=(t?"%":"")+(n=(n=nn.trim(n)).replace(/[%_]/g,"\\$&"))+(r?"%":""))+"'"};var on=function(e){var t="''",r=null==e?void 0:e.type;return"date"==r?t="'0000-00-00'":"datetime"==r?t="'0000-00-00 00:00'":"time"==r?t="'00:00'":"number"==r&&(t="0"),t},an=function(e){var t="";return"number"==(null==e?void 0:e.type)&&(t=0),t},ln=function(e){return"'"+e.replace(/'/g,"''")+"'"},un=function(e){var t,r,n,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=["int","float"];return e.map((function(e){if(null!=e){if("string"==typeof e)r="String";else{if("number"!=typeof e)throw new Error("spelEscape: Can't use value ".concat(e," in array"));r=Number.isInteger(e)?"int":"float"}if(t){if(t!=r){if(!i.includes(t)||!i.includes(r))throw new Error("spelEscape: Can't use different types in array: found ".concat(t," and ").concat(r));t="float"}}else t=r}})),t||(t="String"),n="float"==t?e.map((function(e){return cn(e,!0)})):e.map((function(e){return cn(e)})),o?"new ".concat(t,"[]{").concat(n.join(", "),"}"):"{".concat(n.join(", "),"}")},sn=function(e){return"".concat(e,".?[true]")},cn=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e)return"null";switch((0,V.Z)(e)){case"boolean":return e?"true":"false";case"number":if(!Number.isFinite(e)||isNaN(e))return;return e+(!Number.isInteger(e)||t?"f":"");case"object":if(Array.isArray(e))return un(e,r);throw new Error("spelEscape: Object is not supported");default:return ln(e)}},pn=function(e){return e&&Array.isArray(e)&&e.length?e.map((function(e){return"const"==e.type?cn(e.value):"property"==e.type?""+e.value:"variable"==e.type?"#"+e.value:void 0})).filter((function(e){return null!=e})).join(" + "):"null"},fn=function(e){if(null==e)return[void 0,[]];var t=[];return[("case_value"==e.valueType?e.value:[e]).map((function(e){return"value"==e.valueSrc?null===e.value?void 0:{type:"const",value:e.value}:"field"==e.valueSrc?{type:e.isVariable?"variable":"property",value:e.value}:void t.push("Unsupported valueSrc ".concat(e.valueSrc," in concatenation"))})).filter((function(e){return null!=e})),t]},dn=function(e){return null==e?"NULL":e.toString()};function gn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function vn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gn(Object(r),!0).forEach((function(t){(0,P.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var hn=function(e,t){return mn(e,t,!1)},mn=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n={errors:[]},o=yn(e,t,n);return r?[o,n.errors]:(n.errors.length&&console.warn("Errors while exporting to SQL:",n.errors),o)},yn=function(e,t,r){if(e){var n=e.get("type");return e.get("children1"),"group"===n||"rule_group"===n?bn(e,t,r):"rule"===n?On(e,t,r):void 0}},bn=function(e,t,r){var n=e.get("type"),o=e.get("properties")||new Z.Map,i=e.get("children1")||new Z.List,a="rule_group"===n?o.get("field"):null;"array"==(hr(t,a)||{}).mode&&r.errors.push("Aggregation is not supported for ".concat(a));var l=o.get("not"),u=i.map((function(e){return yn(e,t,r)})).filter((function(e){return void 0!==e}));if(u.size){var s=o.get("conjunction");return s||(s=_e(t)),t.conjunctions[s].sqlFormatConj(u,s,l)}},On=function(e,t,r){var n=e.get("properties")||new Z.Map,o=n.get("field"),i=n.get("operator"),a=n.get("operatorOptions"),l=n.get("valueSrc"),u=n.get("valueType"),s=n.get("value"),c=n.get("asyncListValues");if(null!=o&&null!=i){var p=hr(t,o)||{},f=mr(t,i,o)||{},d=f.reversedOp,g=mr(t,d,o)||{},v=A(f.cardinality,1),h=!1,m=f.sqlOp||f.sqlFormatOp,y=g.sqlOp||g.sqlFormatOp;if(m||y){if(!m&&y){h=!0;var b=[d,i];i=b[0],d=b[1];var O=[g,f];f=O[0],g=O[1]}var w=[],j=[],F=s.map((function(e,n){var a=l?l.get(n):null,s=u?u.get(n):null,d=Or(e,a,t),g=Ft(t,o,i,a),v=x()(yr(t,o,i,g,a),["factory"]),h=wn(r,t,d,a,s,v,p,i,f,c);return void 0!==h&&(w.push(a),j.push(s)),h}));if(!(F.filter((function(e){return void 0===e})).size>0||F.size<v)){var S=1==v?F.first():F,C=f.sqlFormatOp||function(e,t){var r,n=t.sqlOp||e,o=A(t.cardinality,1);return 0==o?r=function(e,t,r,o,i,a,l,u){return"".concat(e," ").concat(n)}:1==o?r=function(e,t,r,o,i,a,l,u){return"".concat(e," ").concat(n," ").concat(r)}:2==o&&(r=function(e,t,r,o,i,a,l,u){var s=r.first(),c=r.get(1);return"".concat(e," ").concat(n," ").concat(s," AND ").concat(c)}),r}(i,f);if(C){var E,L=[jn(r,t,o),i,S,w.length>1?w:w[0],j.length>1?j:j[0],x()(f,["formatOp","mongoFormatOp","sqlFormatOp","jsonLogic","spelFormatOp"]),a,p];if(E=C.call.apply(C,[t.ctx].concat(L)),h&&(E=t.settings.sqlFormatReverse(E)),void 0!==E)return E;r.errors.push("Operator ".concat(i," is not supported for value source ").concat(w.join(", ")))}else r.errors.push("Operator ".concat(i," is not supported"))}}else r.errors.push("Operator ".concat(i," is not supported"))}},wn=function(e,t,r,n,o,i,a,l,u,s){if(void 0!==r){var c;if("field"==n)c=jn(e,t,r);else if("func"==n)c=Fn(e,t,r);else if("function"==typeof i.sqlFormatValue){var p=i.sqlFormatValue,f=[r,vn(vn({},kt()(a,["fieldSettings","listValues"])),{},{asyncListValues:s}),x()(i,["formatValue","mongoFormatValue","sqlFormatValue","jsonLogic","elasticSearchFormatValue","spelFormatValue"])];if(l&&(f.push(l),f.push(u)),"field"==n){var d=hr(t,r)||{};f.push(d)}c=p.call.apply(p,[t.ctx].concat(f))}else c=Array.isArray(r)?r.map((function(e){return nn.escape(e)})):nn.escape(r);return c}},jn=function(e,t,r){if(r){var n=t.settings.fieldSeparator,o=hr(t,r)||{},i=Array.isArray(r)?r:r.split(n),a=(gt(r,t),ht(r,t)),l=a?a.join(n):null;return(0,t.settings.formatField)(St(r,t,e,null,{useTableName:!0}),i,l,o,t)}},Fn=function(e,t,r){var n,o=r.get("func"),i=r.get("args"),a=gr(t,o),l=a.sqlFunc||o,u={};for(var s in a.args){var c=a.args[s],p=hr(t,c),f=i?i.get(s):void 0,d=f?f.get("value"):void 0,g=f?f.get("valueSrc"):void 0,v=f?f.get("asyncListValues"):void 0,h=wn(e,t,d,g,c.type,p,c,null,null,v);if(null!=d&&void 0===h)return void e.errors.push("Can't format value of arg ".concat(s," for func ").concat(o));void 0!==h&&(u[s]=h)}if("function"==typeof a.sqlFormatFunc){var m=a.sqlFormatFunc,y=[u];n=m.call.apply(m,[t.ctx].concat(y))}else{var b=Object.entries(u).map((function(e){var t=(0,_.Z)(e,2);return t[0],t[1]})).join(", ");n="".concat(l,"(").concat(b,")")}return n},Sn=r(11881);function Cn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function En(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Cn(Object(r),!0).forEach((function(t){(0,P.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ln=function(e,t){return kn(e,t,!1)},kn=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n={errors:[]},o=Pn(e,t,n,null);return r?[o,n.errors]:(n.errors.length&&console.warn("Errors while exporting to SpEL:",n.errors),o)},Pn=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(e){var o=e.get("type");return"group"===o||"rule_group"===o?Zn(e,t,r,n):"rule"===o?Tn(e,t,r,n):"switch_group"==o?Vn(e,t,r,n):"case_group"==o?_n(e,t,r,n):void 0}},_n=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=e.get("type");if("case_group"==o){var i=e.get("properties")||new Z.Map,a=An(t,i,r,null,n,"!case_value"),l=(0,_.Z)(a,3),u=l[0],s=(l[1],l[2],Zn(e,t,r,n));return[s,u]}r.errors.push("Unexpected child of type ".concat(o," inside switch"))},Vn=function(e,t,r){e.get("properties")||new Z.Map;var n=e.get("children1");if(n){var o=n.map((function(e){return _n(e,t,r,null)})).filter((function(e){return void 0!==e})).toArray();if(o.length){if(1==o.length&&!o[0][0])return o[0][1];for(var i=[],a=0;a<o.length;a++)a==o.length-1||o[a][0]?(i.push(o[a]),a==o.length-1&&o[a][0]&&i.push([void 0,null])):r.errors.push("No condition for case ".concat(a));for(var l="",u="",s=0;s<i.length;s++){var c=(0,_.Z)(i[s],2),p=c[0],f=c[1];null==f&&(f="null"),null==p&&(p="true"),s!=i.length-1?(l+="(".concat(p," ? ").concat(f," : "),u+=")"):l+="".concat(f)}return l+u}}},Zn=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=e.get("type"),i=e.get("properties")||new Z.Map,a=i.get("mode"),l=e.get("children1")||new Z.List,u=i.get("field"),s=i.get("conjunction");s||(s=_e(t));var c=t.conjunctions[s],p=i.get("not"),f="rule_group"===o,d=f&&"struct"!=a,g=d?u:n,v=hr(t,g)||{},h=v.isSpelArray,m=i.get("operator");m||a&&"some"!=a||(m="some");var y=xn(t,m,u),b=y!=m,O=m&&mr(t,y,u)||null,w=f&&(!y||0==O.cardinality),j=An(t,i,r,y,n,null),F=(0,_.Z)(j,3),S=F[0],C=F[1],E=F[2],L=l.map((function(e){return Pn(e,t,r,g)})).filter((function(e){return void 0!==e}));if(d&&!w){if(null==S)return}else if(!L.size)return;var k,P=f,V=L.size?c.spelFormatConj(L,s,p,P):null;if(d){var R=In(r,t,u,n),D=h?".length":".size()",x="".concat(R).concat(D),T=V?"".concat(R,".?[").concat(V,"]").concat(D):x,A=w?x:S;k=Dn(r,t,i,T,A,y,C,E,b)}else k=V;return k},Rn=function(e,t){var r=t.spelOp;if(r){var n,o="$"==r[0],i="."==r[0]||o,a="()"==r.substring(r.length-2),l=i?r.slice(1):a?r.substring(0,r.length-2):r,u=A(t.cardinality,1);return 0==u?n=function(e,t,r,n,o,a,u,s){return i?"".concat(e,".").concat(l,"()"):"".concat(e," ").concat(l)}:1==u&&(n=function(e,t,r,n,u,s,c,p){return o?"".concat(r,".").concat(l,"(").concat(e,")"):a?"".concat(l,"(").concat(e,", ").concat(r,")"):i?"".concat(e,".").concat(l,"(").concat(r,")"):"".concat(e," ").concat(l," ").concat(r)}),n}},Dn=function(e,t,r,n,o,i,a,l){var u=arguments.length>8&&void 0!==arguments[8]&&arguments[8],s=r.get("field"),c=mr(t,i,s)||{},p=hr(t,s)||{},f=r.get("operatorOptions"),d=c.spelFormatOp||Rn(0,c);if(d){var g,v=[n,i,o,a,l,x()(c,["formatOp","mongoFormatOp","sqlFormatOp","jsonLogic","spelFormatOp"]),f,p];return g=d.call.apply(d,[t.ctx].concat(v)),u&&(g=t.settings.spelFormatReverse(g)),void 0===g&&e.errors.push("Operator ".concat(i," is not supported for value source ").concat(a)),g}e.errors.push("Operator ".concat(i," is not supported"))},xn=function(e,t,r){if(t){var n=mr(e,t,r)||{},o=n.reversedOp,i=mr(e,o,r)||{},a=n.spelOp||n.spelFormatOp,l=i.spelOp||i.spelFormatOp;if(a||l){if(!a&&l){var u=[o,t];t=u[0],o=u[1];var s=[i,n];n=s[0],i=s[1]}return t}}},Tn=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=e.get("properties")||new Z.Map,i=o.get("field"),a=o.get("operator");if(null!=i&&null!=a){var l=xn(t,a,i);if(l){var u=l!=a,s=An(t,o,r,l,n,null),c=(0,_.Z)(s,3),p=c[0],f=c[1],d=c[2];if(void 0!==p){var g=In(r,t,i,n),v=Dn(r,t,o,g,p,l,f,d,u);return v}}else r.errors.push("Operator ".concat(a," is not supported"))}},An=function(e,t,r,n,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=t.get("field"),l=t.get("valueSrc"),u=t.get("valueType");("!case_value"==i||u&&"case_value"==u.get(0))&&(a="!case_value");var s,c=hr(e,a)||{},p=mr(e,n,a)||{},f=A(p.cardinality,1),d=t.get("value"),g=t.get("asyncListValues"),v=[],h=[];if(null!=d){var m=d.map((function(t,i){var s=l?l.get(i):null,f=u?u.get(i):null,d=Or(t,s,e),m=Ft(e,a,n,s),y=x()(yr(e,a,n,m,s),["factory"]),b=Nn(r,e,d,s,f,y,c,n,p,o,g);return void 0!==b&&(v.push(s),h.push(f)),b})),y=m.filter((function(e){return void 0===e})).size>0;m.size<f||y||(s=f>1?m.toArray():1==f?m.first():null)}return[s,v.length>1?v:v[0],h.length>1?h:h[0]]},Nn=function(e,t,r,n,o,i,a,l,u){var s=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,c=arguments.length>10?arguments[10]:void 0;if(void 0!==r){var p;if("field"==n)p=In(e,t,r,s);else if("func"==n)p=qn(e,t,r,s);else if("function"==typeof i.spelFormatValue){var f=i.spelFormatValue,d=[r,En(En({},kt()(a,["fieldSettings","listValues"])),{},{asyncListValues:c}),x()(i,["formatValue","mongoFormatValue","sqlFormatValue","jsonLogic","elasticSearchFormatValue","spelFormatValue"])];if(l&&(d.push(l),d.push(u)),"field"==n){var g=hr(t,r)||{};d.push(g)}p=f.call.apply(f,[t.ctx].concat(d))}else p=cn(r);return p}},In=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(r){var o=t.settings.fieldSeparator,i=hr(t,r)||{},a=Array.isArray(r)?r:r.split(o),l=(gt(r,t,n),mt(r,t,n)),u=t.settings.formatSpelField,s=St(r,t,e,n),c=l.map((function(e){var t,r=(0,_.Z)(e,3),n=r[0],o=r[1],i=r[2];return i&&(t="!struct"==i.type||"!group"==i.type&&"struct"==i.mode?o.isSpelMap?"map":"class":"!group"==i.type?o.isSpelItemMap?"[map]":"[class]":"class"),{key:n,parent:t,isSpelVariable:null==o?void 0:o.isSpelVariable}})),p=u.call(t.ctx,s,n,a,c,i,t);return p}},qn=function(e,t,r){var n,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=r.get("func"),a=r.get("args"),l=gr(t,i),u=l.spelFunc||i,s={};for(var c in l.args){var p=l.args[c],f=hr(t,p),d=a?a.get(c):void 0,g=d?d.get("value"):void 0,v=d?d.get("valueSrc"):void 0,h=d?d.get("asyncListValues"):void 0,m=Nn(e,t,g,v,p.type,f,p,null,null,o,h);if(null!=g&&void 0===m)return void e.errors.push("Can't format value of arg ".concat(c," for func ").concat(i));void 0!==m&&(s[c]=m)}if("function"==typeof l.spelFormatFunc){var y=l.spelFormatFunc,b=[s];n=y.call.apply(y,[t.ctx].concat(b))}else{var O=Object.entries(s).map((function(e){var t=(0,_.Z)(e,2);return t[0],t[1]}));if("."==u[0]&&O.length){var w=(0,Sn.Z)(O),j=w[0],F=w.slice(1);n="".concat(j).concat(u,"(").concat(F.join(", "),")")}else n="".concat(u,"(").concat(O.join(", "),")")}return n};function Mn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Wn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Mn(Object(r),!0).forEach((function(t){(0,P.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Bn=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n={errors:[]},o=Gn(e,t,n,r,null);return n.errors.length&&console.warn("Errors while exporting to string:",n.errors),o},Gn=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(e){var i=e.get("type");return e.get("children1"),"group"===i||"rule_group"===i?zn(e,t,r,n,o):"rule"===i?Jn(e,t,r,n,o):void 0}},zn=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=e.get("type"),a=e.get("properties")||new Z.Map,l=a.get("mode"),u=e.get("children1")||new Z.List,s="rule_group"===i,c=s&&"array"==l?a.get("field"):null,p=s&&"array"==l,f=a.get("not"),d=u.map((function(e){return Gn(e,t,r,n,c)})).filter((function(e){return void 0!==e}));if(p||d.size){var g=a.get("conjunction");g||(g=_e(t));var v,h=t.conjunctions[g],m=d.size?h.formatConj(d,g,f,n):null;if(c){var y=Jn(e,t,r,n,o,!0);if(y){var b,O=y.pop(),w=[m].concat((0,ee.Z)(y));v=(b=t.settings).formatAggr.apply(b,(0,ee.Z)(w)),O&&(v=t.settings.formatReverse(v,null,null,null,null,n))}}else v=m;return v}},Un=function(e,t,r,n,o,i){var a,l=t.get("field"),u=t.get("valueSrc"),s=t.get("valueType"),c=hr(e,l)||{},p=n||t.get("operator"),f=mr(e,p,l)||{},d=A(f.cardinality,1),g=t.get("value"),v=t.get("asyncListValues"),h=[],m=[];if(null!=g){var y=g.map((function(t,n){var a=u?u.get(n):null,d=s?s.get(n):null,g=Or(t,a,e),y=Ft(e,l,p,a),b=x()(yr(e,l,p,y,a),["factory"]),O=Yn(e,r,g,a,d,b,c,p,f,o,i,v);return void 0!==O&&(h.push(a),m.push(d)),O}));y.filter((function(e){return void 0===e})).size>0||y.size<d||(a=1==d?y.first():y)}return[a,h.length>1?h:h[0],m.length>1?m:m[0]]},$n=function(e,t){var r,n=t.labelForFormat||e,o=A(t.cardinality,1);return 0==o?r=function(e,t,r,o,i,a,l,u){return"".concat(e," ").concat(n)}:1==o?r=function(e,t,r,o,i,a,l,u){return"".concat(e," ").concat(n," ").concat(r)}:2==o&&(r=function(e,t,r,o,i,a,l,u){var s=r.first(),c=r.get(1);return"".concat(e," ").concat(n," ").concat(s," AND ").concat(c)}),r},Jn=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=e.get("properties")||new Z.Map,l=a.get("field"),u=a.get("operator"),s=a.get("operatorOptions");if(null!=l&&null!=u){var c=hr(t,l)||{},p=mr(t,u,l)||{},f=p.reversedOp,d=mr(t,f,l)||{},g=!1,v=p.formatOp;if(!v&&f&&(v=d.formatOp)){g=!0;var h=[f,u];u=h[0],f=h[1];var m=[d,p];p=m[0],d=m[1]}if(v||(v=$n(u,p)),v){var y=Hn(t,r,l,n,o),b=Un(t,a,r,u,n,o),O=(0,_.Z)(b,3),w=O[0],j=O[1],F=O[2];if(void 0!==w){var S=[y,u,w,j,F,x()(p,["formatOp","mongoFormatOp","sqlFormatOp","jsonLogic","spelFormatOp"]),s,n,c,g];if(i)return S;var C,E=(C=v).call.apply(C,[t.ctx].concat(S));return g&&(E=t.settings.formatReverse(E,u,f,p,d,n)),E}}}},Yn=function(e,t,r,n,o,i,a,l,u,s){var c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,p=arguments.length>11?arguments[11]:void 0;if(void 0!==r){var f;if("field"==n)f=Hn(e,t,r,s,c);else if("func"==n)f=Kn(e,t,r,s,c);else if("function"==typeof i.formatValue){var d=i.formatValue,g=[r,Wn(Wn({},kt()(a,["fieldSettings","listValues"])),{},{asyncListValues:p}),x()(i,["formatValue","mongoFormatValue","sqlFormatValue","jsonLogic","elasticSearchFormatValue","spelFormatValue"]),s];if(l&&(g.push(l),g.push(u)),"field"==n){var v=hr(e,r)||{};g.push(v)}f=d.call.apply(d,[e.ctx].concat(g))}else f=r;return f}},Hn=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=e.settings,l=a.fieldSeparator,u=a.fieldSeparatorDisplay,s=null;if(r){var c=hr(e,r)||{},p=Array.isArray(r)?r:r.split(l),f=(gt(r,e),ht(r,e,i?o:null)),d=f?f.join(u):null,g=c.label2||d,v=e.settings.formatField,h=St(r,e,t,i?o:null,{useTableName:!0});s=v(h,p,g,c,e,n)}return s},Kn=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=r.get("func"),a=r.get("args"),l=gr(e,i),u=n&&l.label||i,s={},c={};for(var p in l.args){var f=l.args[p],d=hr(e,f),g=a?a.get(p):void 0,v=g?g.get("value"):void 0,h=g?g.get("valueSrc"):void 0,m=g?g.get("asyncListValues"):void 0,y=Yn.call(e.ctx,e,t,v,h,f.type,d,f,null,null,n,o,m),b=n&&f.label||p;void 0!==y&&(s[p]=y,c[b]=y)}var O=null;if("function"==typeof l.formatFunc){var w=l.formatFunc,j=[s,n];O=w.call.apply(w,[e.ctx].concat(j))}else{var F=Object.entries(c).map((function(e){var t=(0,_.Z)(e,2),r=t[0],o=t[1];return n?"".concat(r,": ").concat(o):"".concat(o)})).join(", ");O="".concat(u,"(").concat(F,")")}return O};function Qn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qn(Object(r),!0).forEach((function(t){(0,P.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function eo(e,t,r,n,o,i){if(e&&r&&null!=t){var a=r,l=n.operators[a];if(l){var u=l.elasticSearchQueryType,s=!1;!u&&l.reversedOp&&(s=!0,a=l.reversedOp,u=(l=n.operators[a]).elasticSearchQueryType);var c=Ft(n,e,a,o),p=n.widgets[c];if(p){var f,d,g=p.elasticSearchFormatValue;if(f="function"==typeof u?u(c):u)return d="function"==typeof g?g(f,t,a,e,n):function(e,t,r,n,o,i){var a=function(e,t){return e}(n);switch(e){case"filter":return{script:o.operators[r].elasticSearchScript(n,t)};case"exists":return{field:n};case"match":return(0,P.Z)({},a,t[0]);case"term":return i===ro?(0,P.Z)({},n,{value:t[0]}):(0,P.Z)({},n,t[0]);case"geo_bounding_box":return(0,P.Z)({},n,function(e){if(null==e)return null;var t=e.split(",").map(Number);return{top_left:{lat:t[0],lon:t[1]},bottom_right:{lat:t[2],lon:t[3]}}}(t[0]));case"range":return(0,P.Z)({},n,function(e,t){if(e.length>1)return{gte:"".concat(e[0]),lte:"".concat(e[1])};var r=e[0];switch(t){case"on_date":case"not_on_date":case"equal":case"select_equals":case"not_equal":return{gte:"".concat(r,"||/d"),lte:"".concat(r,"||+1d")};case"less_or_equal":return{lte:"".concat(r)};case"greater_or_equal":return{gte:"".concat(r)};case"less":return{lt:"".concat(r)};case"greater":return{gt:"".concat(r)};default:return}}(t,r));case"wildcard":return(0,P.Z)({},n,function(e){return{value:"*"+e+"*"}}(t[0]));case"regexp":return(0,P.Z)({},n,function(e){return{value:e}}(t[0]));default:return}}(f,t,a,e,n,i),s?{bool:{must_not:(0,P.Z)({},f,Xn({},d))}}:(0,P.Z)({},f,Xn({},d))}}}}function to(e,t,r,n,o,i){if(e&&e.size){var a=e.valueSeq().toArray(),l=function(e,t){switch(e){case"AND":return t?"must_not":"must";case"OR":return t?"should_not":"should";case"NOT":return t?"must":"must_not";default:return}}(t,r),u=a.map((function(e){return n(e,o,i)})).filter((function(e){return void 0!==e}));if(u.length){var s=u.flat(1/0);return{bool:(0,P.Z)({},l,s)}}}}var ro="ES_7_SYNTAX",no="ES_6_SYNTAX";function oo(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:no;if(e){var n=e.get("type"),o=e.get("properties")||new Map;if("rule"===n&&o.get("field")){var i,a,l=o.get("operator"),u=o.get("field"),s=o.get("value").toJS(),c=(null===(i=o.get("valueType"))||void 0===i||i.get(0),null===(a=o.get("valueSrc"))||void 0===a?void 0:a.get(0));if("func"===c)return;return s&&Array.isArray(s[0])?s[0].map((function(e){return eo(u,[e],l,t,c,r)})):eo(u,s,l,t,c,r)}if("group"===n||"rule_group"===n){var p=o.get("not"),f=o.get("conjunction");f||(f=_e(t));var d=e.get("children1");return to(d,f,p,oo,t,r)}}}var io=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e){var n=e;return n=n.toJS(),t&&(n=Je(n,r)),n}},ao=function(e){if(so(e))return e;if(co(e))return po(e);if("string"==typeof e&&e.startsWith('["~#iM"'))throw"You are trying to load query in obsolete serialization format (Immutable string) which is not supported in versions starting from 2.1.17";if("string"==typeof e)return po(JSON.parse(e));throw"Can't load tree!"},lo=function(e,t){if(e){var r=or(t,void 0,!0);return et(e,null,r,r)}},uo=function(e){return 0==$e(e).length},so=function(e){return Z.Map.isMap(e)},co=function(e){return"object"==(0,V.Z)(e)&&("group"==e.type||"switch_group"==e.type)};function po(e){return(0,Z.fromJS)(e,(function(e,t){var r;if("properties"==e){r=t.toOrderedMap();for(var n=0;n<2;n++){var o;null===(null===(o=r.get("value"))||void 0===o?void 0:o.get(n))&&(r=r.setIn(["value",n],void 0))}}else r="value"==e&&R().Iterable.isIndexed(t)?t.map((function(e){var t,r=null==e||null===(t=e.toJS)||void 0===t?void 0:t.call(e);return null!=r&&r.func?e.toOrderedMap():null!=e&&e.toJS?r:e})).toList():"asyncListValues"==e?t.toJS():"children1"==e&&R().Iterable.isIndexed(t)?new(R().OrderedMap)(t.map((function(e){return[e.get("id"),e]}))):R().Iterable.isIndexed(t)?t.toList():t.toOrderedMap();return r}))}function fo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function go(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fo(Object(r),!0).forEach((function(t){(0,P.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var vo=function(e){return Array.from(new Set(e))},ho=function(e,t){return mo(e,t,!1)},mo=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n={errors:[]},o=or(t,void 0,!1),i=yo(o),a=e?bo(e,i,o,"rule",n):void 0;a&&"group"!=a.type&&(a=Eo(a,o));var l=a?ao(a):void 0;return r?[l,n.errors]:(n.errors.length&&console.warn("Errors while importing from JsonLogic:",n.errors),l)},yo=function(e){var t={};for(var r in e.operators){var n=e.operators[r];if("string"==typeof n.jsonLogic){var o=(n._jsonLogicIsRevArgs?"#":"")+n.jsonLogic+"/"+A(n.cardinality,1);t[o]||(t[o]=[]),t[o].push(r)}else if("string"==typeof n.jsonLogic2){var i=n.jsonLogic2+"/"+A(n.cardinality,1);t[i]||(t[i]=[]),t[i].push(r)}}var a={};for(var l in e.conjunctions)a[e.conjunctions[l].jsonLogicConj||l.toLowerCase()]=l;var u={};for(var s in e.funcs){var c=e.funcs[s],p=void 0;c.jsonLogicIsMethod?p="#"+c.jsonLogic:"string"==typeof c.jsonLogic&&(p=c.jsonLogic),p&&(u[p]||(u[p]=[]),u[p].push(s))}var f=e.settings.jsonLogic;return{operators:t,conjunctions:a,funcs:u,varKeys:["var",f.groupVarKey,f.altVarKey]}},bo=function e(t,r,n,o,i){var a,l,u,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],c=arguments.length>6?arguments[6]:void 0,p=arguments.length>7?arguments[7]:void 0,f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;J(t)&&(l=t[a=Object.keys(t)[0]],Array.isArray(l)||(l=[l]));var d=i.errors.length,g=n.settings.jsonLogic.lockedOp,v="!"==a&&1==l.length&&l[0]&&J(l[0])&&r.varKeys.includes(Object.keys(l[0])[0]),h="!"==a&&!v,m=g&&a==g;m?u=e(l[0],r,n,o,i,s,c,p,f,!0):h?u=e(l[0],r,n,o,i,!s,c,p,f):"val"==o?u=wo(a,l,r,n,s,i,f)||jo(a,l,r,n,s,c,i,f)||Oo(t,c,p,n,i):"rule"==o&&(u=Fo(a,l,r,n,s,i,f,!1)||Po(a,l,r,n,s,i,f));var y=i.errors.length;return"!"!=a&&void 0===u&&y==d&&i.errors.push("Can't parse logic ".concat(JSON.stringify(t))),m&&(u.properties.isLocked=!0),u},Oo=function(e,t,r,n,o){if(void 0!==e){var i=n.widgets[r||t.mainWidget];if(i){if(!J(e)){if(t&&"time"==t.type&&"number"==typeof e){var a=Math.floor(e/60/60)%24,l=Math.floor(e/60)%60,u=e%60,s=i.valueFormat;if(s){var c=new Date(e);c.setMilliseconds(0),c.setHours(a),c.setMinutes(l),c.setSeconds(u),e=se()(c).format(s)}else e="".concat(a,":").concat(l,":").concat(u)}if(t&&["date","datetime"].includes(t.type)&&e&&!(e instanceof Date))try{var p=new Date(e);p instanceof Date&&p.toISOString()===e&&(e=p)}catch(t){o.errors.push("Can't convert value ".concat(e," as Date")),e=void 0}if(e instanceof Date&&t){var f=i.valueFormat;f&&(e=se()(e).format(f))}var d;return e&&t.fieldSettings&&t.fieldSettings.asyncFetch&&(d=Array.isArray(e)?e:[e]),{valueSrc:"value",value:e,valueType:i.type,asyncListValues:d}}o.errors.push("Unexpected logic in value: ".concat(JSON.stringify(e)))}else o.errors.push("No widget for type ".concat(t.type))}},wo=function(e,t,r,n,o,i){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,l=n.settings.fieldSeparator;if(r.varKeys.includes(e)&&"string"==typeof t[0]){var u=t[0];a&&(u=[a,u].join(l)),u=dr(n,u);var s=hr(n,u);return s?{valueSrc:"field",value:u,valueType:s.type}:void i.errors.push("No config for field ".concat(u))}},jo=function(e,t,r,n,o,i,a){var l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;if(e){var u,s,c,p="method"==e;if(p){var f,d,g=(0,Sn.Z)(t);f=g[0],u=g[1],d=g.slice(2),s=[f].concat((0,ee.Z)(d))}else u=e,s=t;var v=(p?"#":"")+u,h=(r.funcs[v]||[]).filter((function(e){return!i||n.funcs[e].returnType==i.type}));if(h.length)c=h[0];else for(var m=(0,P.Z)({},e,t),y=0,b=Object.entries(n.funcs||{});y<b.length;y++){var O=(0,_.Z)(b[y],2),w=O[0],j=O[1];if(j.jsonLogicImport&&j.returnType==i.type){var F=void 0;try{F=j.jsonLogicImport(m)}catch(e){}F&&(c=w,s=F)}}if(c&&c){var S=n.funcs[c],C=Object.keys(S.args||{}),E=s.reduce((function(e,t,o){var i=C[o],u=S.args[i],s=bo(t,r,n,"val",a,!1,u,null,l);if(void 0!==s||void 0!==(s=u.defaultValue))return go(go({},e),{},(0,P.Z)({},i,s));a.errors.push("No value for arg ".concat(i," of func ").concat(c))}),{});return{valueSrc:"func",value:{func:c,args:E},valueType:S.returnType}}}},Fo=function(e,t,r,n,o,i){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,l=r.conjunctions[e],u=n.settings.fieldSeparator,s=a?hr(n,a):null;if(null==s||s.type,l){var c="group",p=t.map((function(e){return bo(e,r,n,"rule",i,!1,null,null,a)})).filter((function(e){return void 0!==e})).reduce((function(e,t){return go(go({},e),{},(0,P.Z)({},t.id,t))}),{}),f=Object.values(p).map((function(e){var t;return null==e||null===(t=e.properties)||void 0===t?void 0:t.field})).filter((function(e){return e&&e.includes(u)})),d=Object.fromEntries(vo(f).map((function(e){var t=e.split(u),r=Object.fromEntries(t.slice(0,-1).map((function(e,t,r){return[].concat((0,ee.Z)(r.slice(0,t)),[e])})).map((function(e){return[e.join(u),hr(n,e)]})).filter((function(e){var t=(0,_.Z)(e,2);return t[0],"!group"==t[1].type})));return[e,Object.keys(r)]}))),g=(Object.values(p).map((function(e){var t;return null==e||null===(t=e.properties)||void 0===t?void 0:t.field})).map((function(e){return d[e]})).filter((function(e){return e&&e.length})),vo(Object.values(d).flat())),v=(So(g),{conjunction:l,not:o}),h=oe(),m={},y={};return Object.entries(p).map((function(e){var t=(0,_.Z)(e,2),r=t[0],o=t[1];if("group"==o.type||"rule_group"==o.type)m[r]=o;else{var i,s=null==o||null===(i=o.properties)||void 0===i?void 0:i.field,c=d[s]||[],p=c[c.length-1];if(p){var f=m,g=a?a.split(u):[];I(g,p.split(u).slice(0,g.length))||(g=[]),p.split(u).slice(g.length).map((function(e,t,r){return[].concat((0,ee.Z)(g),(0,ee.Z)(r.slice(0,t)),[e]).join(u)})).map((function(e){return dr(n,e)})).map((function(e){return{f:e,fc:hr(n,e)||{}}})).filter((function(e){return"!struct"!=e.fc.type})).map((function(e,t){var r=e.f,n=e.fc,o=y[r];o||(o=oe(),y[r]=o,f[o]={type:"rule_group",id:o,children1:{},properties:{conjunction:l,not:!1,field:r,mode:n.mode}}),f=f[o].children1})),f[r]=o}else m[r]=o}})),{type:c,id:h,children1:m,properties:v}}},So=function(e){for(var t=(0,ee.Z)(e).sort((function(e,t){return e.length-t.length})),r=0;r<t.length;r++)for(var n=r+1;n<t.length;n++)0==t[n].indexOf(t[r])&&(t.splice(n,1),n--);return t},Co=function(e,t,r,n,o){if(e)return{type:"rule_group",id:oe(),children1:(0,P.Z)({},e.id,e),properties:{conjunction:o||Pe(n,r),not:!1,field:t}}},Eo=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:"group",id:oe(),children1:(0,P.Z)({},e.id,e),properties:{conjunction:_e(t),not:r}}},Lo=function(e,t,r,n,o,i,a){var l=[],u=ko(e,t,r,n,o,i,l,!1)||ko(e,t,r,n,o,i,l,!0);if(u)return u;a.errors.push(l.join("; ")||"Unknown op ".concat(e,"/").concat(t))},ko=function(e,t,r,n,o,i,a,l){var u=!(("all"==e||"some"==e)&&J(r[1])&&"in"==Object.keys(r[1])[0])&&i.settings.groupOperators.includes(e),s=u?0:t-1;u?s=0:["==","!="].includes(e)&&1==s&&null===r[1]&&(t=1,s=0,r=[r[0]]);var c=e+"/"+s,p=i.settings.fieldSeparator,f=o.operators[(l?"#":"")+c];if(f){var d,g=[];if(["<","<=",">",">="].includes(e)&&3==t)d=r[1],g=[r[0],r[2]];else if(l)d=r[1],g=[r[0]];else{var v=r,h=(0,Sn.Z)(v);d=h[0],g=h.slice(1)}if(J(d)){var m,y,b=Object.keys(d)[0],O=Object.values(d)[0];if(o.varKeys.includes(b)&&"string"==typeof O&&(m=O),u&&(y=g[0],g=[]),"reduce"==b&&Array.isArray(O)&&3==O.length){var w=O,j=(0,_.Z)(w,3),F=j[0],S=j[1],C=j[2];if(J(F)&&0==C&&J(S)&&Array.isArray(S["+"])&&1==S["+"][0]&&J(S["+"][1])&&"accumulator"==S["+"][1].var)if(b=Object.keys(F)[0],O=Object.values(F)[0],"filter"==b){var E=O,L=(0,_.Z)(E,2),k=L[0],P=L[1];J(k)&&(b=Object.keys(k)[0],O=Object.values(k)[0],o.varKeys.includes(b)&&"string"==typeof O&&(m=O,y=P))}else o.varKeys.includes(b)&&"string"==typeof O&&(m=O)}if(m){n&&(m=[n,m].join(p)),m=dr(i,m);var V=hr(i,m);if(V){var Z=f[0];if(f.length>1&&V&&V.operators){if(f=f.filter((function(e){return V.operators.includes(e)})),0==f.length)return void a.push("No corresponding ops for field ".concat(m));Z=f[0]}return{field:m,fieldConfig:V,opKey:Z,args:g,having:y}}a.push("No config for field ".concat(m))}else a.push("Unknown field ".concat(JSON.stringify(d)))}else a.push("Incorrect operands for ".concat(e,": ").concat(JSON.stringify(r)))}},Po=function e(t,r,n,o,i,a){var l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if(t){var u=r.length;if(("all"==t||"some"==t)&&J(r[1])){var s=Object.keys(r[1])[0];"in"==s&&(r=[r[0],r[1][s][1]],t=t+"-"+s)}var c=Lo(t,u,r,l,n,o,a);if(c){var p,f,d=c.field,g=c.fieldConfig,v=c.opKey,h=c.args,m=c.having,y=o.operators[v],b=(void 0!==g.showNot?g.showNot:o.settings.showNot,!0),O=!1;if("!group"==g.type&&m){f=m[p=Object.keys(m)[0]],Array.isArray(f)||(f=[f]);var w="!"==p&&1==f.length&&f[0]&&J(f[0])&&n.varKeys.includes(Object.keys(f[0])[0]);"!"!=p||w||(O=!0,f=(m=m["!"])[p=Object.keys(m)[0]],Array.isArray(f)||(f=[f]))}i&&b&&y.reversedOp&&(i=!1,v=y.reversedOp,y=o.operators[v]);var j=Ft(o,d,v),F=h.map((function(e){return bo(e,n,o,"val",a,!1,g,j,l)}));if(!F.filter((function(e){return void 0===e})).length){var S;if("!group"==g.type&&m){if(void 0!==n.conjunctions[p])S=Fo(p,f,n,o,O,a,d,!0),O=!1;else{var C=e(p,f,n,o,O,a,d);O=!1,S=Co(C,d,g,o,n.conjunctions.and)}if(!S)return;S.type="rule_group",Object.assign(S.properties,{field:d,mode:g.mode,operator:v}),"array"==g.mode&&Object.assign(S.properties,{value:F.map((function(e){return e.value})),valueSrc:F.map((function(e){return e.valueSrc})),valueType:F.map((function(e){return e.valueType}))}),i&&(S=Eo(S,o,i))}else if("!group"!=g.type||m){var E=F.map((function(e){return e.asyncListValues})).filter((function(e){return null!=e})),L=E.length?E[0]:void 0;S={type:"rule",id:oe(),properties:go({field:d,operator:v,value:F.map((function(e){return e.value})),valueSrc:F.map((function(e){return e.valueSrc})),valueType:F.map((function(e){return e.valueType}))},L?{asyncListValues:L}:{})},i&&(S=Eo(S,o,i))}else S={type:"rule_group",id:oe(),children1:{},properties:{conjunction:Pe(o,g),not:i,mode:g.mode,field:d,operator:v}},"array"==g.mode&&Object.assign(S.properties,{value:F.map((function(e){return e.value})),valueSrc:F.map((function(e){return e.valueSrc})),valueType:F.map((function(e){return e.valueType}))});return S}}}},_o=r(60226);function Vo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Zo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vo(Object(r),!0).forEach((function(t){(0,P.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ro=function(e,t){return Do(e,t,!0)},Do=function(e,t){var r,n,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i={errors:[]},a=or(t,void 0,!1),l=Ao(a),u=void 0;try{var s=_o.SpelExpressionEvaluator.compile(e);r=s._compiledExpression}catch(e){i.errors.push(e)}r&&(X.debug("compiledExpression:",r),n=xo(r,i),X.debug("convertedObj:",n,i),(u=Bo(n,l,a,i))&&"group"!=u.type&&"switch_group"!=u.type&&(u=Jo(u,a,n.not)),X.debug("jsTree:",u));var c=u?ao(u):void 0;return o?[c,i.errors]:(i.errors.length&&console.warn("Errors while importing from SpEL:",i.errors),c)},xo=function e(t,r){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=t.getType(),a=t.getChildren().map((function(n){return e(n,r,t)}));if("op-or"!=i&&"op-and"!=i||(a=a.reduce((function(e,t){var r=t.type!=i||t.not?[t]:t.children;return[].concat((0,ee.Z)(e),(0,ee.Z)(r))}),[])),"op-not"==i)return 1!=a.length&&r.errors.push("Operator NOT should have 1 child, but got ".concat(a.length,"}")),Zo(Zo({},a[0]),{},{not:!a[0].not});if("compound"==i){var l=(a=a.filter((function(e){return!("selection"==e.type&&1==e.children.length&&"boolean"==e.children[0].type&&1==e.children[0].val)}))).find((function(e){return"selection"==e.type}));l&&1!=l.children.length&&r.errors.push("Selection should have 1 child, but got ".concat(l.children.length));var u=l?l.children[0]:null,s=a[a.length-1],c="method"==s.type&&"size"==s.val.methodName||"!func"==s.type&&"size"==s.methodName,p="property"==s.type&&"length"==s.val,f=a.filter((function(e){return e!==l&&e!==s})),d={type:"compound",children:f};if(c||p)return{type:"!aggr",filter:u,source:d};if(a=(a=a.filter((function(e){var t="variable"==e.type&&"this"==e.val,r="variable"==e.type&&"root"==e.val;return!(t||r)}))).map((function(e){return"indexer"==e.type&&1==e.children.length?{type:"indexer",val:e.children[0].val,itype:e.children[0].type}:e})),"method"==s.type){var g=a.filter((function(e){return e!==s}));return{type:"!func",obj:g,methodName:s.val.methodName,args:s.val.args}}if("!func"==s.type){var v=a.filter((function(e){return e!==s}));return Zo(Zo({},s),{},{obj:v})}}try{t.getRaw?n=t.getRaw():0==t.getValue.length&&(n=t.getValue())}catch(e){X.error("[spel2js] Error in getValue()",e)}if("ternary"==i&&(n=To(a)),"object"===(0,V.Z)(n)&&null!==n&&(n.methodName||n.functionName)&&(n.args=n.args.map((function(n){return e(n,r,t)}))),"list"==i&&(n=n.map((function(n){return e(n,r,t)})),!o&&1==n.length))return n[0];if("constructorref"==i){var h=a.find((function(e){return"qualifiedidentifier"==e.type})),m=null==h?void 0:h.val;if(!m)return void r.errors.push("Can't find qualifiedidentifier in constructorref children: ".concat(JSON.stringify(a)));var y=a.filter((function(e){return"qualifiedidentifier"!=e.type}));return{type:"!new",cls:m,args:y}}if("typeref"==i){var b=a.find((function(e){return"qualifiedidentifier"==e.type})),O=null==b?void 0:b.val;return O?(a.filter((function(e){return"qualifiedidentifier"!=e.type})),{type:"!type",cls:O}):void r.errors.push("Can't find qualifiedidentifier in typeref children: ".concat(JSON.stringify(a)))}if("function"==i||"method"==i){var w=n,j=w.functionName,F=w.methodName,S=w.args;return{type:"!func",methodName:j||F,isVar:"function"==i,args:S}}return{type:i,children:a,val:n}},To=function(e){var t=[];return function e(r){var n=(0,_.Z)(r,3),o=n[0],i=n[1],a=n[2];t.push([o,i]),"ternary"==(null==a?void 0:a.type)?e(a.children):t.push([void 0,a])}(e),t},Ao=function(e){var t={},r=function(r){var n=e.operators[r];if(n.spelOps)n.spelOps.forEach((function(e){var n=e;t[n]||(t[n]=[]),t[n].push(r)}));else if(n.spelOp){var o=n.spelOp;t[o]||(t[o]=[]),t[o].push(r)}else X.log("[spel] No spelOp for operator ".concat(r))};for(var n in e.operators)r(n);var o={};for(var i in e.conjunctions)o[e.conjunctions[i].spelConj||i.toLowerCase()]=i;var a={};for(var l in e.funcs){var u=e.funcs[l],s=void 0;"string"==typeof u.spelFunc&&(s=u.spelFunc),s&&(a[s]||(a[s]=[]),a[s].push(l))}return{operators:t,conjunctions:o,funcs:a}},No=function(e,t){var r=!1,n=e.map((function(e){if("variable"==e.type||"property"==e.type||"indexer"==e.type&&"string"==e.itype)return e.val;r=!0,t.errors.push("Unexpected item in compound: ".concat(JSON.stringify(e)))}));return r?void 0:n},Io=function e(t,r,n,o,i){if(null!=t){var a=n.settings.fieldSeparator,l={number:"number",string:"text",boolean:"boolean",null:"null"},u=null!=i&&i._groupField?[null==i?void 0:i._groupField]:[];if("compound"==t.type){var s,c,p=No(t.children,o);if(!p)return;var f=[].concat(u,(0,ee.Z)(p));return{valueSrc:"field",isVariable:"variable"==(null===(s=t.children)||void 0===s||null===(c=s[0])||void 0===c?void 0:c.type),value:f.join(a)}}if("variable"==t.type||"property"==t.type){var d=[].concat(u,[t.val]);return{valueSrc:"field",isVariable:"variable"==t.type,value:d.join(a)}}if(l[t.type]){var g=t.val,v=l[t.type];return null!=i&&i.isUnary&&(g=-g),{valueSrc:"value",valueType:v,value:g}}if("list"==t.type){var h,m=t.val.map((function(i){return e(i,r,n,o,t)}));return m.length&&(null===(h=m[0])||void 0===h||h.valueType),{valueSrc:"value",valueType:"multiselect",value:m.map((function(e){return null==e?void 0:e.value}))}}if("!func"==t.type){var y,b=t.obj,O=t.methodName,w=t.args,j=(t.isVar,y={},(0,P.Z)(y,".contains","like"),(0,P.Z)(y,".startsWith","starts_with"),(0,P.Z)(y,".endsWith","ends_with"),(0,P.Z)(y,"$contains","select_any_in"),(0,P.Z)(y,".equals","multiselect_equals"),(0,P.Z)(y,"CollectionUtils.containsAny()","multiselect_contains"),y),F=w.map((function(a){return e(a,r,n,o,Zo(Zo({},t),{},{_groupField:null==i?void 0:i._groupField}))}));if("contains"==O&&b&&"list"==b[0].type){var S=b.map((function(i){return e(i,r,n,o,t)}));if(1!=F.length||"field"!=F[0].valueSrc)return void o.errors.push("Expected arg to method ".concat(O," to be field but got: ").concat(JSON.stringify(F)));var C=F[0].value;if(1!=S.length||"multiselect"!=S[0].valueType)return void o.errors.push("Expected object of method ".concat(O," to be inline list but got: ").concat(JSON.stringify(S)));var E=j["$"+O],L=S[0];return qo(n,o,C,E,[L],t)}if(b&&"property"==b[0].type&&j[b[0].val+"."+O+"()"]){var k=j[b[0].val+"."+O+"()"],_=F[0].value,V=F.slice(1);return qo(n,o,_,k,V,t)}if(j["."+O]){var Z=j["."+O],R=No(b,o);if(R&&1==F.length){var D=[].concat(u,(0,ee.Z)(R)).join(a);return qo(n,o,D,Z,F,t)}}else{if("parse"==O&&b&&"!new"==b[0].type&&"SimpleDateFormat"==b[0].cls.at(-1)){var x=b[0].args.map((function(a){return e(a,r,n,o,Zo(Zo({},t),{},{_groupField:null==i?void 0:i._groupField}))}));if(1!=x.length||"text"!=x[0].valueType)return void o.errors.push("Expected args of ".concat(b[0].cls.join("."),".").concat(O," to be 1 string but got: ").concat(JSON.stringify(x)));if(1!=F.length||"text"!=F[0].valueType)return void o.errors.push("Expected args of ".concat(b[0].cls.join(".")," to be 1 string but got: ").concat(JSON.stringify(F)));var T=x[0].value,A=F[0].value,N=T.includes(" ")?"datetime":"date",I=N,q=hr(n,null),M=n.widgets[I||(null==q?void 0:q.mainWidget)].valueFormat,W=se()(A,se().ISO_8601);return{valueSrc:"value",valueType:N,value:W.isValid()?W.format(M):void 0}}if("parse"==O&&b&&"!type"==b[0].type&&"LocalTime"==b[0].cls.at(-1)){if(1!=F.length||"text"!=F[0].valueType)return void o.errors.push("Expected args of ".concat(b[0].cls.join(".")," to be 1 string but got: ").concat(JSON.stringify(F)));var B=F[0].value,G="time",z=G,U=hr(n,null),$=n.widgets[z||(null==U?void 0:U.mainWidget)].valueFormat,J=se()(B,"HH:mm:ss");return{valueSrc:"value",valueType:G,value:J.isValid()?J.format($):void 0}}o.errors.push("Unsupported method ".concat(O))}}else{if("op-plus"==t.type&&"ternary"==(null==i?void 0:i.type))return Uo(t,r,n,o);o.errors.push("Can't convert arg of type ".concat(t.type))}}},qo=function(e,t,r,n,o,i){if(!o.filter((function(e){return void 0===e})).length){var a=hr(e,r);if(a){var l=!1;if(null!=i&&i.not){var u=e.operators[n];u.reversedOp?(n=u.reversedOp,i.not=!1):l=!0}var s=Ft(e,r,n),c=e.widgets[s||a.mainWidget],p=o.map((function(e){return e.asyncListValues})).filter((function(e){return null!=e})),f=p.length?p[0]:void 0,d={type:"rule",id:oe(),properties:Zo({field:r,operator:n,value:o.map((function(e){return e.value})),valueSrc:o.map((function(e){return e.valueSrc})),valueType:o.map((function(e){return"value"==e.valueSrc&&((null==c?void 0:c.type)||(null==a?void 0:a.type))||e.valueType}))},f?{asyncListValues:f}:{})};return l&&(d=Jo(d,e,null==i?void 0:i.not),null!=i&&i.not&&(i.not=!1)),d}t.errors.push("No config for field ".concat(r))}},Mo=function(e,t,r,n,o){var i=e.groupFilter,a=e.groupFieldValue;if("field"!=a.valueSrc)throw"Bad groupFieldValue: ".concat(JSON.stringify(a));var l=a.value,u=qo(n,o,l,t,r);if(u){var s=hr(n,l),c=null==s?void 0:s.mode,p=Zo(Zo({},i||{}),{},{type:"rule_group",properties:Zo(Zo(Zo({},u.properties),(null==i?void 0:i.properties)||{}),{},{mode:c})});return p.id||(p.id=oe()),p}},Wo=function(e,t,r,n,o,i){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if(e.type==t.type){if("!aggr"==e.type){var l=[e.source,t.source].map((function(e){return Io(e,n,o,i,Zo(Zo({},r),{},{_groupField:null==a?void 0:a._groupField}))})),u=(0,_.Z)(l,2),s=u[0],c=u[1];return s.value==c.value}var p=[e,t].map((function(e){return Io(e,n,o,i,Zo(Zo({},r),{},{_groupField:null==a?void 0:a._groupField}))})),f=(0,_.Z)(p,2),d=f[0],g=f[1];return d.value==g.value}return!1},Bo=function e(t,r,n,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(t){var a;if(0==t.type.indexOf("op-")){var l=t.type.slice("op-".length),u=("minus"==l||"plus"==l)&&1==t.children.length;if(u)return t.isUnary=!0,e(t.children[0],r,n,o,t);var s="and"==l&&2==t.children.length&&"op-ge"==t.children[0].type&&"op-le"==t.children[1].type,c="or"==l&&2==t.children.length&&"op-lt"==t.children[0].type&&"op-gt"==t.children[1].type,p=s||c;if(p){var f=(0,_.Z)(t.children[0].children,2),d=f[0],g=f[1],v=(0,_.Z)(t.children[1].children,2),h=v[0],m=v[1],y="number"==g.type&&"number"==m.type,b=Wo(d,h,t,r,n,o,i);if(y&&b){g.val,m.val;var O={type:"op-between",children:[d,g,m]};return e(O,r,n,o,i)}}var w=r.operators[l];"eq"==l&&"null"==t.children[1].type?w=["is_null"]:"ne"==l&&"null"==t.children[1].type?w=["is_not_null"]:"le"==l&&"string"==t.children[1].type&&""==t.children[1].val?w=["is_empty"]:"gt"==l&&"string"==t.children[1].type&&""==t.children[1].val?w=["is_not_empty"]:"between"==l&&(w=["between"]);var j=function(){return t.children.map((function(a){return e(a,r,n,o,Zo(Zo({},t),{},{_groupField:null==i?void 0:i._groupField}))}))};if("and"==l||"or"==l){var F={},S=j();S.forEach((function(e){if(e){var t=oe();e.id=t,null!=e.type?F[t]=e:o.errors.push("Bad item in AND/OR: ".concat(JSON.stringify(e)))}})),a={type:"group",id:oe(),children1:F,properties:{conjunction:r.conjunctions[l],not:t.not}}}else if(w){var C,E,L=j(),k=L[0],P=L.slice(1),V=null==k||null===(C=k.groupFieldValue)||void 0===C?void 0:C.value,Z=null===(E=P)||void 0===E?void 0:E[0],R=w[0];if(w.length>1){X.warn("[spel] Spel operator ".concat(l," can be mapped to ").concat(w));var D=null==k?void 0:k.value,x=w.map((function(e){return{op:e,widget:Ft(n,D,e)}}));if("eq"==l||"ne"==l){var T=x.find((function(e){e.op;var t=e.widget;return t&&"field"!=t}));T&&(R=T.op)}}null!=k&&k.groupFieldValue&&(Z&&Z.groupFieldValue&&"field"==Z.groupFieldValue.valueSrc&&Z.groupFieldValue.value==V?(R="all",P=[]):"equal"==R&&"value"==Z.valueSrc&&"number"==Z.valueType&&0==Z.value?(R="none",P=[]):"greater"==R&&"value"==Z.valueSrc&&"number"==Z.valueType&&0==Z.value&&(R="some",P=[]));var A=!0,N=!1;if(t.not&&A){var I=n.operators[R];I.reversedOp?(R=I.reversedOp,t.not=!1):N=!0}if(k)if(k.groupFieldValue)"field"!=k.groupFieldValue.valueSrc&&o.errors.push("Expected group field ".concat(JSON.stringify(k))),a=Mo(k,R,P,n,o);else{"field"!=k.valueSrc&&o.errors.push("Expected field ".concat(JSON.stringify(k)));var q=k.value;a=qo(n,o,q,R,P)}N&&("group"!==a.type?a=Jo(a,n,t.not):a.properties.not=!a.properties.not)}else i||(a=Go(t,r,n,o)),a||o.errors.push("Can't convert op ".concat(l))}else if("!aggr"==t.type){var M,W=e(t.source,r,n,o,Zo(Zo({},t),{},{_groupField:null==i?void 0:i._groupField})),B=e(t.filter,r,n,o,Zo(Zo({},t),{},{_groupField:null==W?void 0:W.value}));"rule"==(null===(M=B)||void 0===M?void 0:M.type)&&(B=Jo(B,n,t.filter.not)),a={groupFilter:B,groupFieldValue:W},i||(a=void 0,o.errors.push("Unexpected !aggr in root"))}else if("ternary"==t.type){var G={};t.val.forEach((function(e){var i=(0,_.Z)(e,2),a=i[0],l=i[1],u=zo(a,l,r,n,o,t);u&&(G[u.id]=u)})),a={type:"switch_group",id:oe(),children1:G,properties:{}}}else if((a=Io(t,r,n,o,i))&&!a.type&&!i){var z=Go(t,r,n,o);z?a=z:(a=void 0,o.errors.push("Can't convert rule of type ".concat(t.type,", it looks like var/literal")))}return a}},Go=function(e,t,r,n){var o={},i=zo(null,e,t,r,n);return i&&(o[i.id]=i),{type:"switch_group",id:oe(),children1:o,properties:{}}},zo=function(e,t,r,n,o){var i,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,l=$o(n,o,r,t,a);return e?(i=Bo(e,r,n,o,a))&&i.type?("group"!=i.type&&(i=Jo(i,n)),i.type="case_group"):(o.errors.push("Unexpected case: ".concat(JSON.stringify(i))),i=void 0):i={id:oe(),type:"case_group",properties:{}},i&&(i.properties=Zo(Zo({},i.properties),l)),i},Uo=function(e,t,r,n){var o=[];return function i(a){a.map((function(a){if("op-plus"==a.type)i(a.children);else{var l=Io(a,t,r,n,e);l?o.push(l):n.errors.push("Can't convert ".concat(a.type," in concatenation"))}}))}(e.children),{valueSrc:"value",valueType:"case_value",value:o}},$o=function(e,t,r,n){var o,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a={};o="op-plus"==(null==n?void 0:n.type)?Uo(n,r,e,t):Io(n,r,e,t,i);var l=e.widgets.case_value,u=null==l?void 0:l.spelImportValue;if(u){var s=u(o),c=(0,_.Z)(s,2),p=c[0],f=c[1];f.map((function(e){return t.errors.push(e)})),p&&(a={value:[p],valueSrc:["value"],valueType:["case_value"]})}else t.errors.push("No fucntion to import case value");return a},Jo=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:"group",id:oe(),children1:(0,P.Z)({},e.id,e),properties:{conjunction:_e(t),not:r||!1}}},Yo=r(18774),Ho=r(12409),Ko=r.n(Ho);function Qo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qo(Object(r),!0).forEach((function(t){(0,P.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ei=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;return function(){var n=(0,Yo.Z)(Ko().mark((function n(o,i,a){var l,u,s,c,p,f;return Ko().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(l=null!=(null==a?void 0:a.pageSize)?a.pageSize:t,u=he(e).filter((function(e){var t=e.title,r=e.value;return null==o||-1!=t.toUpperCase().indexOf(o.toUpperCase())||-1!="".concat(r).toUpperCase().indexOf(o.toUpperCase())})),l&&Math.ceil(u.length/l),s=i||0,l&&Math.ceil(s/l),c=l?u.slice(s,s+l):u,p=l?s+c.length:null,f=!!l&&p<u.length,!r){n.next=12;break}return console.debug("simulateAsyncFetch",{search:o,offset:i,values:c,hasMore:f,filtered:u}),n.next=12,Y(r);case 12:return n.abrupt("return",{values:c,hasMore:f});case 13:case"end":return n.stop()}}),n)})));return function(e,t,r){return n.apply(this,arguments)}}()},ti=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!t)return e;var o=e||[],i=t.filter((function(e){return null==o.find((function(t){return""+t.value==""+e.value}))})).map((function(e){return n?Xo(Xo({},e),{},{isHidden:!0}):e})),a=r?[].concat((0,ee.Z)(i),(0,ee.Z)(o)):[].concat((0,ee.Z)(o),(0,ee.Z)(i));return a},ri=function(e,t,r){var n,o=null==e||""==e?void 0:null!==(n=null==e?void 0:e.value)&&void 0!==n?n:e,i=je(o,t),a=r&&!i?ve(o):void 0,l=i||a;return[o,l?[l]:void 0]},ni=function(e,t,r){var n=e.map((function(e,n){var o,i=null==e||""==e?void 0:null!==(o=null==e?void 0:e.value)&&void 0!==o?o:e,a=je(i,t),l=r&&!a?ve(i):void 0;return a||l})).filter((function(e){return null!=e})),o=n.map((function(e){var t;return null!==(t=null==e?void 0:e.value)&&void 0!==t?t:e}));return o.length||(o=void 0),[o,n]},oi=function(e){if(null==e)return null;var t=e.title,r=e.value,n=e.disabled,o=e.groupTitle,i=e.renderTitle,a=e.children,l=e.label,u=e.isCustom,s=e.isHidden,c={value:r,title:t||l||a};return n&&(c.disabled=n),o&&(c.groupTitle=o),i&&(c.renderTitle=i),u&&(c.isCustom=u),s&&(c.isHidden=s),c},ii={label:"Now",returnType:"datetime",jsonLogic:"now",jsonLogicCustomOps:{now:{}},spelFunc:"new java.util.Date()",sqlFormatFunc:function(){return"NOW()"},mongoFormatFunc:function(){return new Date},formatFunc:function(){return"NOW"}},ai={label:"Relative",returnType:"datetime",renderBrackets:["",""],renderSeps:["","",""],jsonLogic:function(e){var t=e.date,r=e.op;return{date_add:[t,e.val*("minus"==r?-1:1),e.dim]}},jsonLogicImport:function(e){var t=e.date_add[0],r=Math.abs(e.date_add[1]);return[t,e.date_add[1]>=0?"plus":"minus",r,e.date_add[2]]},jsonLogicCustomOps:{date_add:{}},sqlFormatFunc:function(e){var t=e.date,r=e.op,n=e.val,o=e.dim;return"DATE_ADD(".concat(t,", INTERVAL ").concat(parseInt(n)*("minus"==r?-1:1)," ").concat(o.replace(/^'|'$/g,""),")")},mongoFormatFunc:null,formatFunc:function(e){var t=e.date,r=e.op,n=e.val,o=e.dim;return n?"".concat(t," ").concat("minus"==r?"-":"+"," ").concat(n," ").concat(o):t},args:{date:{label:"Date",type:"datetime",defaultValue:{func:"NOW",args:[]},valueSources:["func","field"]},op:{label:"Op",type:"select",defaultValue:"plus",valueSources:["value"],mainWidgetProps:{customProps:{showSearch:!1}},fieldSettings:{listValues:{plus:"+",minus:"-"}}},val:{label:"Value",type:"number",fieldSettings:{min:0},defaultValue:0,valueSources:["value"]},dim:{label:"Dimension",type:"select",defaultValue:"day",valueSources:["value"],mainWidgetProps:{customProps:{showSearch:!1}},fieldSettings:{listValues:{day:"day",week:"week",month:"month",year:"year"}}}}},li={label:"Lowercase",mongoFunc:"$toLower",jsonLogic:"toLowerCase",spelFunc:".toLowerCase",jsonLogicCustomOps:{toLowerCase:{}},returnType:"text",args:{str:{label:"String",type:"text",valueSources:["value","field"]}}},ui={label:"Uppercase",mongoFunc:"$toUpper",jsonLogic:"toUpperCase",spelFunc:".toUpperCase",jsonLogicCustomOps:{toUpperCase:{}},returnType:"text",args:{str:{label:"String",type:"text",valueSources:["value","field"]}}},si={label:"Linear regression",returnType:"number",formatFunc:function(e,t){var r=e.coef,n=e.bias,o=e.val;return"(".concat(r," * ").concat(o," + ").concat(n,")")},sqlFormatFunc:function(e){var t=e.coef,r=e.bias,n=e.val;return"(".concat(t," * ").concat(n," + ").concat(r,")")},spelFormatFunc:function(e){var t=e.coef,r=e.bias,n=e.val;return"(".concat(t," * ").concat(n," + ").concat(r,")")},mongoFormatFunc:function(e){var t=e.coef,r=e.bias;return{$sum:[{$multiply:[t,e.val]},r]}},jsonLogic:function(e){var t=e.coef,r=e.bias;return{"+":[{"*":[t,e.val]},r]}},jsonLogicImport:function(e){return[e["+"][0]["*"][0],e["+"][0]["*"][1],e["+"][1]]},renderBrackets:["",""],renderSeps:[" * "," + "],args:{coef:{label:"Coef",type:"number",defaultValue:1,valueSources:["value"]},val:{label:"Value",type:"number",valueSources:["value","field"]},bias:{label:"Bias",type:"number",defaultValue:0,valueSources:["value"]}}};const ci={utils:{SqlString:nn,moment:se(),mongoFormatOp1:function(e,t,r,n,o,i,a,l,u,s,c,p){var f="string"!=typeof n||n.startsWith("$")?n:"$"+n,d=t(i,p);if(void 0!==d)return r?a||e&&"$eq"!=e?a?{$not:(0,P.Z)({},e,[f,d])}:(0,P.Z)({},n,{$not:(0,P.Z)({},e,d)}):(0,P.Z)({},n,{$ne:d}):a||e&&"$eq"!=e?a?(0,P.Z)({},e,[f,d]):(0,P.Z)({},n,(0,P.Z)({},e,d)):(0,P.Z)({},n,d)},mongoFormatOp2:function(e,t,r,n,o,i,a,l,u,s,c){var p,f,d="string"!=typeof r||r.startsWith("$")?r:"$"+r;return t?i?{$not:{$and:[(0,P.Z)({},e[0],[d,o[0]]),(0,P.Z)({},e[1],[d,o[1]])]}}:(0,P.Z)({},r,{$not:(p={},(0,P.Z)(p,e[0],o[0]),(0,P.Z)(p,e[1],o[1]),p)}):i?{$and:[(0,P.Z)({},e[0],[d,o[0]]),(0,P.Z)({},e[1],[d,o[1]])]}:(0,P.Z)({},r,(f={},(0,P.Z)(f,e[0],o[0]),(0,P.Z)(f,e[1],o[1]),f))},mongoEmptyValue:an,escapeRegExp:function(e){return e.replace(/[.*+?^${}()|[\]\\/]/g,"\\$&")},sqlEmptyValue:on,stringifyForDisplay:dn,getTitleInListValues:ye,spelEscape:cn,spelFixList:sn}};function pi(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return fi(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fi(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}function fi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function di(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?di(Object(r),!0).forEach((function(t){(0,P.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):di(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var vi={equal:{label:"==",labelForFormat:"==",sqlOp:"=",spelOp:"==",spelOps:["==","eq"],reversedOp:"not_equal",formatOp:function(e,t,r,n,o,i,a,l,u){var s=l?"=":i.label;return"boolean"==o&&l?"No"==r?"NOT ".concat(e):"".concat(e):"".concat(e," ").concat(s," ").concat(r)},mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$eq",function(e){return e},!1].concat(r))},jsonLogic:"==",elasticSearchQueryType:"term"},not_equal:{isNotOp:!0,label:"!=",labelForFormat:"!=",sqlOp:"<>",spelOp:"!=",spelOps:["!=","ne"],reversedOp:"equal",formatOp:function(e,t,r,n,o,i,a,l,u){return"boolean"==o&&l?"No"==r?"".concat(e):"NOT ".concat(e):"".concat(e," ").concat(i.label," ").concat(r)},mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$ne",function(e){return e},!1].concat(r))},jsonLogic:"!="},less:{label:"<",labelForFormat:"<",sqlOp:"<",spelOp:"<",spelOps:["<","lt"],reversedOp:"greater_or_equal",mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$lt",function(e){return e},!1].concat(r))},jsonLogic:"<",elasticSearchQueryType:"range"},less_or_equal:{label:"<=",labelForFormat:"<=",sqlOp:"<=",spelOp:"<=",spelOps:["<=","le"],reversedOp:"greater",mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$lte",function(e){return e},!1].concat(r))},jsonLogic:"<=",elasticSearchQueryType:"range"},greater:{label:">",labelForFormat:">",sqlOp:">",spelOp:">",spelOps:[">","gt"],reversedOp:"less_or_equal",mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$gt",function(e){return e},!1].concat(r))},jsonLogic:">",elasticSearchQueryType:"range"},greater_or_equal:{label:">=",labelForFormat:">=",sqlOp:">=",spelOp:">=",spelOps:[">=","ge"],reversedOp:"less",mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$gte",function(e){return e},!1].concat(r))},jsonLogic:">=",elasticSearchQueryType:"range"},like:{label:"Contains",labelForFormat:"Contains",reversedOp:"not_like",sqlOp:"LIKE",spelOp:".contains",spelOps:["matches",".contains"],mongoFormatOp:function(){for(var e,t=this,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=this.utils).mongoFormatOp1.apply(e,["$regex",function(e){return"string"==typeof e?t.utils.escapeRegExp(e):void 0},!1].concat(n))},jsonLogic:"in",_jsonLogicIsRevArgs:!0,valueSources:["value"],elasticSearchQueryType:"regexp"},not_like:{isNotOp:!0,label:"Not contains",reversedOp:"like",labelForFormat:"Not Contains",sqlOp:"NOT LIKE",mongoFormatOp:function(){for(var e,t=this,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=this.utils).mongoFormatOp1.apply(e,["$regex",function(e){return"string"==typeof e?t.utils.escapeRegExp(e):void 0},!0].concat(n))},valueSources:["value"]},starts_with:{label:"Starts with",labelForFormat:"Starts with",sqlOp:"LIKE",spelOp:".startsWith",spelOps:["matches",".startsWith"],mongoFormatOp:function(){for(var e,t=this,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=this.utils).mongoFormatOp1.apply(e,["$regex",function(e){return"string"==typeof e?"^"+t.utils.escapeRegExp(e):void 0},!1].concat(n))},jsonLogic:void 0,valueSources:["value"]},ends_with:{label:"Ends with",labelForFormat:"Ends with",sqlOp:"LIKE",spelOp:".endsWith",spelOps:["matches",".endsWith"],mongoFormatOp:function(){for(var e,t=this,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=this.utils).mongoFormatOp1.apply(e,["$regex",function(e){return"string"==typeof e?t.utils.escapeRegExp(e)+"$":void 0},!1].concat(n))},jsonLogic:void 0,valueSources:["value"]},between:{label:"Between",labelForFormat:"BETWEEN",sqlOp:"BETWEEN",cardinality:2,formatOp:function(e,t,r,n,o,i,a,l){var u=r.first(),s=r.get(1);return l?"".concat(e," BETWEEN ").concat(u," AND ").concat(s):"".concat(e," >= ").concat(u," && ").concat(e," <= ").concat(s)},spelFormatOp:function(e,t,r,n,o,i,a,l){var u=r[0],s=r[1];return"".concat(e," >= ").concat(u," && ").concat(e," <= ").concat(s)},mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp2.apply(e,[["$gte","$lte"],!1].concat(r))},valueLabels:["Value from","Value to"],textSeparators:[null,"and"],reversedOp:"not_between",jsonLogic:"<=",validateValues:function(e){return null!=e[0]&&null!=e[1]?e[0]<=e[1]?null:"Invalid range":null},elasticSearchQueryType:function(e){return"time"===e?"filter":"range"}},not_between:{isNotOp:!0,label:"Not between",labelForFormat:"NOT BETWEEN",sqlOp:"NOT BETWEEN",cardinality:2,formatOp:function(e,t,r,n,o,i,a,l){var u=r.first(),s=r.get(1);return l?"".concat(e," NOT BETWEEN ").concat(u," AND ").concat(s):"(".concat(e," < ").concat(u," || ").concat(e," > ").concat(s,")")},spelFormatOp:function(e,t,r,n,o,i,a,l){var u=r[0],s=r[1];return"(".concat(e," < ").concat(u," || ").concat(e," > ").concat(s,")")},mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp2.apply(e,[["$gte","$lte"],!0].concat(r))},valueLabels:["Value from","Value to"],textSeparators:[null,"and"],reversedOp:"between",validateValues:function(e){return null!=e[0]&&null!=e[1]?e[0]<=e[1]?null:"Invalid range":null}},is_empty:{label:"Is empty",labelForFormat:"IS EMPTY",cardinality:0,reversedOp:"is_not_empty",formatOp:function(e,t,r,n,o,i,a,l){return l?"".concat(e," IS EMPTY"):"!".concat(e)},sqlFormatOp:function(e,t,r,n,o,i,a,l){var u=this.utils.sqlEmptyValue(l);return"COALESCE(".concat(e,", ").concat(u,") = ").concat(u)},spelFormatOp:function(e,t,r,n,o,i,a,l){return"".concat(e," <= ''")},mongoFormatOp:function(){for(var e,t=this,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=this.utils).mongoFormatOp1.apply(e,["$in",function(e,r){return[t.utils.mongoEmptyValue(r),null]},!1].concat(n))},jsonLogic:"!"},is_not_empty:{isNotOp:!0,label:"Is not empty",labelForFormat:"IS NOT EMPTY",cardinality:0,reversedOp:"is_empty",formatOp:function(e,t,r,n,o,i,a,l){return l?"".concat(e," IS NOT EMPTY"):"!!".concat(e)},sqlFormatOp:function(e,t,r,n,o,i,a,l){var u=this.utils.sqlEmptyValue(l);return"COALESCE(".concat(e,", ").concat(u,") <> ").concat(u)},spelFormatOp:function(e,t,r,n,o,i,a,l){return"".concat(e," > ''")},mongoFormatOp:function(){for(var e,t=this,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=this.utils).mongoFormatOp1.apply(e,["$nin",function(e,r){return[t.utils.mongoEmptyValue(r),null]},!1].concat(n))},jsonLogic:"!!",elasticSearchQueryType:"exists"},is_null:{label:"Is null",labelForFormat:"IS NULL",sqlOp:"IS NULL",cardinality:0,reversedOp:"is_not_null",formatOp:function(e,t,r,n,o,i,a,l){return l?"".concat(e," IS NULL"):"!".concat(e)},spelFormatOp:function(e,t,r,n,o,i,a,l){return"".concat(e," == null")},mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$eq",function(e){return null},!1].concat(r))},jsonLogic:"=="},is_not_null:{label:"Is not null",labelForFormat:"IS NOT NULL",sqlOp:"IS NOT NULL",cardinality:0,reversedOp:"is_null",formatOp:function(e,t,r,n,o,i,a,l){return l?"".concat(e," IS NOT NULL"):"!!".concat(e)},spelFormatOp:function(e,t,r,n,o,i,a,l){return"".concat(e," != null")},mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$ne",function(e){return null},!1].concat(r))},jsonLogic:"!=",elasticSearchQueryType:"exists"},select_equals:{label:"==",labelForFormat:"==",sqlOp:"=",formatOp:function(e,t,r,n,o,i,a,l){var u=l?"=":"==";return"".concat(e," ").concat(u," ").concat(r)},spelOp:"==",spelOps:["==","eq"],mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$eq",function(e){return e},!1].concat(r))},reversedOp:"select_not_equals",jsonLogic:"==",elasticSearchQueryType:"term"},select_not_equals:{isNotOp:!0,label:"!=",labelForFormat:"!=",sqlOp:"<>",formatOp:function(e,t,r,n,o,i,a,l){return"".concat(e," != ").concat(r)},spelOp:"!=",spelOps:["!=","ne"],mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$ne",function(e){return e},!1].concat(r))},reversedOp:"select_equals",jsonLogic:"!="},select_any_in:{label:"Any in",labelForFormat:"IN",sqlOp:"IN",formatOp:function(e,t,r,n,o,i,a,l){return"value"==n?"".concat(e," IN (").concat(r.join(", "),")"):"".concat(e," IN (").concat(r,")")},sqlFormatOp:function(e,t,r,n,o,i,a,l){return"value"==n?"".concat(e," IN (").concat(r.join(", "),")"):void 0},spelOp:"$contains",mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$in",function(e){return e},!1].concat(r))},reversedOp:"select_not_any_in",jsonLogic:"in",elasticSearchQueryType:"term"},select_not_any_in:{isNotOp:!0,label:"Not in",labelForFormat:"NOT IN",sqlOp:"NOT IN",formatOp:function(e,t,r,n,o,i,a,l){return"value"==n?"".concat(e," NOT IN (").concat(r.join(", "),")"):"".concat(e," NOT IN (").concat(r,")")},sqlFormatOp:function(e,t,r,n,o,i,a,l){return"value"==n?"".concat(e," NOT IN (").concat(r.join(", "),")"):void 0},mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$nin",function(e){return e},!1].concat(r))},reversedOp:"select_any_in"},multiselect_contains:{label:"Contains",labelForFormat:"CONTAINS",formatOp:function(e,t,r,n,o,i,a,l){return"value"==n?"".concat(e," CONTAINS [").concat(r.join(", "),"]"):"".concat(e," CONTAINS ").concat(r)},reversedOp:"multiselect_not_contains",jsonLogic2:"some-in",jsonLogic:function(e,t,r){return{some:[e,{in:[{var:""},r]}]}},spelOp:"CollectionUtils.containsAny()",elasticSearchQueryType:"term",mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$in",function(e){return e},!1].concat(r))}},multiselect_not_contains:{isNotOp:!0,label:"Not contains",labelForFormat:"NOT CONTAINS",formatOp:function(e,t,r,n,o,i,a,l){return"value"==n?"".concat(e," NOT CONTAINS [").concat(r.join(", "),"]"):"".concat(e," NOT CONTAINS ").concat(r)},reversedOp:"multiselect_contains"},multiselect_equals:{label:"Equals",labelForFormat:"==",sqlOp:"=",formatOp:function(e,t,r,n,o,i,a,l){var u=l?"=":"==";return"value"==n?"".concat(e," ").concat(u," [").concat(r.join(", "),"]"):"".concat(e," ").concat(u," ").concat(r)},sqlFormatOp:function(e,t,r,n,o,i,a,l){var u=this;return"value"==n?"".concat(e," = '").concat(r.map((function(e){return u.utils.SqlString.trim(e)})).join(","),"'"):void 0},spelOp:".equals",mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$eq",function(e){return e},!1].concat(r))},reversedOp:"multiselect_not_equals",jsonLogic2:"all-in",jsonLogic:function(e,t,r){return{all:[e,{in:[{var:""},r]}]}},elasticSearchQueryType:"term"},multiselect_not_equals:{isNotOp:!0,label:"Not equals",labelForFormat:"!=",sqlOp:"<>",formatOp:function(e,t,r,n,o,i,a,l){return"value"==n?"".concat(e," != [").concat(r.join(", "),"]"):"".concat(e," != ").concat(r)},sqlFormatOp:function(e,t,r,n,o,i,a,l){var u=this;return"value"==n?"".concat(e," != '").concat(r.map((function(e){return u.utils.SqlString.trim(e)})).join(","),"'"):void 0},mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$ne",function(e){return e},!1].concat(r))},reversedOp:"multiselect_equals"},proximity:{label:"Proximity search",cardinality:2,valueLabels:[{label:"Word 1",placeholder:"Enter first word"},{label:"Word 2",placeholder:"Enter second word"}],textSeparators:[],formatOp:function(e,t,r,n,o,i,a,l){var u=r.first(),s=r.get(1),c=a.get("proximity");return"".concat(e," ").concat(u," NEAR/").concat(c," ").concat(s)},sqlFormatOp:function(e,t,r,n,o,i,a,l){var u=r.first(),s=r.get(1),c=this.utils.SqlString.trim(u),p=this.utils.SqlString.trim(s),f=a.get("proximity");return"CONTAINS(".concat(e,", 'NEAR((").concat(c,", ").concat(p,"), ").concat(f,")')")},mongoFormatOp:void 0,jsonLogic:void 0,options:{optionLabel:"Near",optionTextBefore:"Near",optionPlaceholder:"Select words between",minProximity:2,maxProximity:10,defaults:{proximity:2}}},some:{label:"Some",labelForFormat:"SOME",cardinality:0,jsonLogic:"some",spelFormatOp:function(e){return"".concat(e," > 0")},mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$gt",function(e){return 0},!1].concat(r))}},all:{label:"All",labelForFormat:"ALL",cardinality:0,jsonLogic:"all",spelFormatOp:function(e,t,r){return"".concat(e," == ").concat(r)},mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$eq",function(e){return e},!1].concat(r))}},none:{label:"None",labelForFormat:"NONE",cardinality:0,jsonLogic:"none",spelFormatOp:function(e){return"".concat(e," == 0")},mongoFormatOp:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.utils).mongoFormatOp1.apply(e,["$eq",function(e){return 0},!1].concat(r))}}},hi={text:{type:"text",jsType:"string",valueSrc:"value",valueLabel:"String",valuePlaceholder:"Enter string",formatValue:function(e,t,r,n){return n?this.utils.stringifyForDisplay(e):JSON.stringify(e)},spelFormatValue:function(e,t,r,n,o){var i;return"matches"==o.spelOp&&"regex"!=n?(i="starts_with"==n?"(?s)^".concat(this.utils.escapeRegExp(e),".*"):"(?s).*".concat(this.utils.escapeRegExp(e),"ends_with"==n?"$":".*"),this.utils.spelEscape(i)):this.utils.spelEscape(e)},sqlFormatValue:function(e,t,r,n,o){return"LIKE"==o.sqlOp||"NOT LIKE"==o.sqlOp?this.utils.SqlString.escapeLike(e,"starts_with"!=n,"ends_with"!=n):this.utils.SqlString.escape(e)},toJS:function(e,t){return e},mongoFormatValue:function(e,t,r){return e}},textarea:{type:"text",jsType:"string",valueSrc:"value",valueLabel:"Text",valuePlaceholder:"Enter text",formatValue:function(e,t,r,n){return n?this.utils.stringifyForDisplay(e):JSON.stringify(e)},sqlFormatValue:function(e,t,r,n,o){return"LIKE"==o.sqlOp||"NOT LIKE"==o.sqlOp?this.utils.SqlString.escapeLike(e,"starts_with"!=n,"ends_with"!=n):this.utils.SqlString.escape(e)},spelFormatValue:function(e){return this.utils.spelEscape(e)},toJS:function(e,t){return e},mongoFormatValue:function(e,t,r){return e},fullWidth:!0},number:{type:"number",jsType:"number",valueSrc:"value",valueLabel:"Number",valuePlaceholder:"Enter number",valueLabels:[{label:"Number from",placeholder:"Enter number from"},{label:"Number to",placeholder:"Enter number to"}],formatValue:function(e,t,r,n){return n?this.utils.stringifyForDisplay(e):JSON.stringify(e)},sqlFormatValue:function(e,t,r,n,o){return this.utils.SqlString.escape(e)},spelFormatValue:function(e,t,r){var n=r.step&&!Number.isInteger(r.step);return this.utils.spelEscape(e,n)},toJS:function(e,t){return e},mongoFormatValue:function(e,t,r){return e}},slider:{type:"number",jsType:"number",valueSrc:"value",valueLabel:"Number",valuePlaceholder:"Enter number or move slider",formatValue:function(e,t,r,n){return n?this.utils.stringifyForDisplay(e):JSON.stringify(e)},sqlFormatValue:function(e,t,r,n,o){return this.utils.SqlString.escape(e)},spelFormatValue:function(e){return this.utils.spelEscape(e)},toJS:function(e,t){return e},mongoFormatValue:function(e,t,r){return e}},select:{type:"select",jsType:"string",valueSrc:"value",valueLabel:"Value",valuePlaceholder:"Select value",formatValue:function(e,t,r,n){var o=this.utils.getTitleInListValues(t.fieldSettings.listValues||t.asyncListValues,e);return n?this.utils.stringifyForDisplay(o):JSON.stringify(e)},sqlFormatValue:function(e,t,r,n,o){return this.utils.SqlString.escape(e)},spelFormatValue:function(e){return this.utils.spelEscape(e)},toJS:function(e,t){return e},mongoFormatValue:function(e,t,r){return e}},multiselect:{type:"multiselect",jsType:"array",valueSrc:"value",valueLabel:"Values",valuePlaceholder:"Select values",formatValue:function(e,t,r,n){var o=this,i=e.map((function(e){return o.utils.getTitleInListValues(t.fieldSettings.listValues||t.asyncListValues,e)}));return n?i.map(this.utils.stringifyForDisplay):e.map(JSON.stringify)},sqlFormatValue:function(e,t,r,n,o){var i=this;return e.map((function(e){return i.utils.SqlString.escape(e)}))},spelFormatValue:function(e,t,r,n,o){var i=o.spelOp&&"$"==o.spelOp[0],a=this.utils.spelEscape(e);return i&&(a=this.utils.spelFixList(a)),a},toJS:function(e,t){return e},mongoFormatValue:function(e,t,r){return e}},date:{type:"date",jsType:"string",valueSrc:"value",dateFormat:"DD.MM.YYYY",valueFormat:"YYYY-MM-DD",valueLabel:"Date",valuePlaceholder:"Enter date",valueLabels:[{label:"Date from",placeholder:"Enter date from"},{label:"Date to",placeholder:"Enter date to"}],formatValue:function(e,t,r,n){var o=this.utils.moment(e,r.valueFormat);return n?o.format(r.dateFormat):JSON.stringify(e)},sqlFormatValue:function(e,t,r,n,o){var i=this.utils.moment(e,r.valueFormat);return this.utils.SqlString.escape(i.format("YYYY-MM-DD"))},spelFormatValue:function(e,t,r,n,o){var i=this.utils.moment(e,r.valueFormat);return"new java.text.SimpleDateFormat('yyyy-MM-dd').parse('".concat(i.format("YYYY-MM-DD"),"')")},jsonLogic:function(e,t,r){return this.utils.moment(e,r.valueFormat).toDate()},toJS:function(e,t){var r=this.utils.moment(e,t.valueFormat);return r.isValid()?r.toDate():void 0},mongoFormatValue:function(e,t,r){var n=this.utils.moment(e,r.valueFormat);return n.isValid()?n.toDate():void 0}},time:{type:"time",jsType:"string",valueSrc:"value",timeFormat:"HH:mm",valueFormat:"HH:mm:ss",use12Hours:!1,valueLabel:"Time",valuePlaceholder:"Enter time",valueLabels:[{label:"Time from",placeholder:"Enter time from"},{label:"Time to",placeholder:"Enter time to"}],formatValue:function(e,t,r,n){var o=this.utils.moment(e,r.valueFormat);return n?o.format(r.timeFormat):JSON.stringify(e)},sqlFormatValue:function(e,t,r,n,o){var i=this.utils.moment(e,r.valueFormat);return this.utils.SqlString.escape(i.format("HH:mm:ss"))},spelFormatValue:function(e,t,r,n,o){var i=this.utils.moment(e,r.valueFormat);return"T(java.time.LocalTime).parse('".concat(i.format("HH:mm:ss"),"')")},jsonLogic:function(e,t,r){var n=this.utils.moment(e,r.valueFormat);return 60*n.get("hour")*60+60*n.get("minute")+n.get("second")},toJS:function(e,t){var r=this.utils.moment(e,t.valueFormat);return r.isValid()?60*r.get("hour")*60+60*r.get("minute")+r.get("second"):void 0},mongoFormatValue:function(e,t,r){var n=this.utils.moment(e,r.valueFormat);return 60*n.get("hour")*60+60*n.get("minute")+n.get("second")},elasticSearchFormatValue:function(e,t,r,n){return{script:{script:{source:"doc[".concat(n,"][0].getHour() >== params.min && doc[").concat(n,"][0].getHour() <== params.max"),params:{min:t[0],max:t[1]}}}}}},datetime:{type:"datetime",jsType:"string",valueSrc:"value",timeFormat:"HH:mm",dateFormat:"DD.MM.YYYY",valueFormat:"YYYY-MM-DD HH:mm:ss",use12Hours:!1,valueLabel:"Datetime",valuePlaceholder:"Enter datetime",valueLabels:[{label:"Datetime from",placeholder:"Enter datetime from"},{label:"Datetime to",placeholder:"Enter datetime to"}],formatValue:function(e,t,r,n){var o=this.utils.moment(e,r.valueFormat);return n?o.format(r.dateFormat+" "+r.timeFormat):JSON.stringify(e)},sqlFormatValue:function(e,t,r,n,o){var i=this.utils.moment(e,r.valueFormat);return this.utils.SqlString.escape(i.toDate())},spelFormatValue:function(e,t,r,n,o){var i=this.utils.moment(e,r.valueFormat);return"new java.text.SimpleDateFormat('yyyy-MM-dd HH:mm:ss').parse('".concat(i.format("YYYY-MM-DD HH:mm:ss"),"')")},jsonLogic:function(e,t,r){return this.utils.moment(e,r.valueFormat).toDate()},toJS:function(e,t){var r=this.utils.moment(e,t.valueFormat);return r.isValid()?r.toDate():void 0},mongoFormatValue:function(e,t,r){var n=this.utils.moment(e,r.valueFormat);return n.isValid()?n.toDate():void 0}},boolean:{type:"boolean",jsType:"boolean",valueSrc:"value",labelYes:"Yes",labelNo:"No",formatValue:function(e,t,r,n){return n?e?"Yes":"No":JSON.stringify(!!e)},sqlFormatValue:function(e,t,r,n,o){return this.utils.SqlString.escape(e)},spelFormatValue:function(e,t,r,n,o){return this.utils.spelEscape(e)},defaultValue:!1,toJS:function(e,t){return e},mongoFormatValue:function(e,t,r){return e}},field:{valueSrc:"field",formatValue:function(e,t,r,n,o,i,a){return n&&a.label||e},sqlFormatValue:function(e,t,r,n,o,i){return e},spelFormatValue:function(e,t,r,n,o){return e},valueLabel:"Field to compare",valuePlaceholder:"Select field to compare"},func:{valueSrc:"func",valueLabel:"Function",valuePlaceholder:"Select function"},case_value:{valueSrc:"value",type:"case_value",spelFormatValue:function(e){return this.utils.spelEscape(""===e?null:e)},spelImportValue:function(e){return[e.value,[]]}}},mi=gi(gi({},le),{},{convertableWidgets:{number:["slider","rangeslider"],slider:["number","rangeslider"],rangeslider:["number","slider"],text:["textarea"],textarea:["text"]},formatSpelField:function(e,t,r,n,o,i){var a=this,l=n.map((function(e,t){var r=e.key,n=e.parent;return 0==t?"[map]"==n?"#this[".concat(a.utils.spelEscape(r),"]"):r:"map"==n||"[map]"==n?"[".concat(a.utils.spelEscape(r),"]"):".".concat(r)})).join("");return o.isSpelVariable&&(l="#"+l),l},sqlFormatReverse:function(e){if(null!=e)return"NOT("+e+")"},spelFormatReverse:function(e){if(null!=e)return"!("+e+")"},formatReverse:function(e,t,r,n,o,i){if(null!=e)return i?"NOT ("+e+")":"!("+e+")"},formatAggr:function(e,t,r,n,o,i,a,l,u,s){var c=a.labelForFormat,p=a.cardinality;if(0==p){var f=e?" HAVE ".concat(e):"";return"".concat(c," OF ").concat(t).concat(f)}if(null==p||1==p){var d=e?" WHERE ".concat(e):"";return"COUNT OF ".concat(t).concat(d," ").concat(c," ").concat(n)}if(2==p){var g=e?" WHERE ".concat(e):"",v=n.first(),h=n.get(1);return"COUNT OF ".concat(t).concat(g," ").concat(c," ").concat(v," AND ").concat(h)}},jsonLogic:{groupVarKey:"var",altVarKey:"var",lockedOp:"locked"},canCompareFieldWithField:function(e,t,r,n){return!0},valueSourcesInfo:{value:{label:"Value"},field:{label:"Field",widget:"field"},func:{label:"Function",widget:"func"}}}),yi=function(e,t){var r,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o={rangeslider:wi,treeselect:ji,treemultiselect:Fi,rangeable__date:Oi("date","date")},i=pi(t);try{for(i.s();!(r=i.n()).done;){var a=r.value,l=o[a];if(!l)throw new Error("Can't ".concat(n?"add":"remove"," mixin ").concat(a));e=l(e,n)}}catch(e){i.e(e)}finally{i.f()}return e},bi=function(e,t){return yi(e,t,!0)},Oi=function(e,t){return function(r){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=r.types;return o=gi(gi({},o),{},(0,P.Z)({},e,gi(gi({},o[e]),{},{widgets:gi({},o[e].widgets)}))),n?o[e].widgets[t]=gi({opProps:{between:{isSpecialRange:!0,textSeparators:[null,null]},not_between:{isSpecialRange:!0,textSeparators:[null,null]}}},o[e].widgets[t]):delete o[e].widgets[t],gi(gi({},r),{},{types:o})}},wi=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.widgets,n=e.types;return r=gi({},r),t?r.rangeslider=gi({type:"number",jsType:"number",valueSrc:"value",valueLabel:"Range",valuePlaceholder:"Select range",valueLabels:[{label:"Number from",placeholder:"Enter number from"},{label:"Number to",placeholder:"Enter number to"}],formatValue:function(e,t,r,n){return n?this.utils.stringifyForDisplay(e):JSON.stringify(e)},sqlFormatValue:function(e,t,r,n,o){return this.utils.SqlString.escape(e)},spelFormatValue:function(e){return this.utils.spelEscape(e)},singleWidget:"slider",toJS:function(e,t){return e}},r.rangeslider):delete r.rangeslider,n=gi(gi({},n),{},{number:gi(gi({},n.number),{},{widgets:gi({},n.number.widgets)})}),t?n.number.widgets.rangeslider=gi({opProps:{between:{isSpecialRange:!0},not_between:{isSpecialRange:!0}},operators:["between","not_between","is_null","is_not_null"]},n.number.widgets.rangeslider):delete n.number.widgets.rangeslider,gi(gi({},e),{},{widgets:r,types:n})},ji=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.widgets,n=e.types;return r=gi({},r),t?r.treeselect=gi({type:"treeselect",jsType:"string",valueSrc:"value",valueLabel:"Value",valuePlaceholder:"Select value",formatValue:function(e,t,r,n){var o=t.fieldSettings.treeValues||t.fieldSettings.listValues||t.asyncListValues,i=this.utils.getTitleInListValues(o,e);return n?this.utils.stringifyForDisplay(i):JSON.stringify(e)},sqlFormatValue:function(e,t,r,n,o){return this.utils.SqlString.escape(e)},spelFormatValue:function(e){return this.utils.spelEscape(e)},toJS:function(e,t){return e}},r.treeselect):delete r.treeselect,n=gi({},n),t?n.treeselect=gi({mainWidget:"treeselect",defaultOperator:"select_equals",widgets:{treeselect:{operators:["select_equals","select_not_equals"]},treemultiselect:{operators:["select_any_in","select_not_any_in"]}}},n.treeselect):delete n.treeselect,gi(gi({},e),{},{widgets:r,types:n})},Fi=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.widgets,n=e.types;return r=gi({},r),t?r.treemultiselect=gi({type:"treemultiselect",jsType:"array",valueSrc:"value",valueLabel:"Values",valuePlaceholder:"Select values",formatValue:function(e,t,r,n){var o=this,i=t.fieldSettings.treeValues||t.fieldSettings.listValues||t.asyncListValues,a=e.map((function(e){return o.utils.getTitleInListValues(i,e)}));return n?a.map(this.utils.stringifyForDisplay):e.map(JSON.stringify)},sqlFormatValue:function(e,t,r,n,o){var i=this;return e.map((function(e){return i.utils.SqlString.escape(e)}))},spelFormatValue:function(e){return this.utils.spelEscape(e)},toJS:function(e,t){return e}},r.treemultiselect):delete r.treemultiselect,n=gi({},n),t?n.treemultiselect=gi({defaultOperator:"multiselect_equals",widgets:{treemultiselect:{operators:["multiselect_equals","multiselect_not_equals"]}}},n.treemultiselect):delete n.treemultiselect,gi(gi({},e),{},{widgets:r,types:n})},Si={addMixins:bi,removeMixins:function(e,t){return yi(e,t,!1)}},Ci={conjunctions:{AND:{label:"And",mongoConj:"$and",jsonLogicConj:"and",sqlConj:"AND",spelConj:"and",spelConjs:["and","&&"],reversedConj:"OR",formatConj:function(e,t,r,n){return e.size>1?(r?"NOT ":"")+"("+e.join(" "+(n?"AND":"&&")+" ")+")":(r?"NOT (":"")+e.first()+(r?")":"")},sqlFormatConj:function(e,t,r){return e.size>1?(r?"NOT ":"")+"("+e.join(" AND ")+")":(r?"NOT (":"")+e.first()+(r?")":"")},spelFormatConj:function(e,t,r,n){return r&&(n=!1),e.size>1?(r?"!":"")+(n?"":"(")+e.join(" && ")+(n?"":")"):(r?"!(":"")+e.first()+(r?")":"")}},OR:{label:"Or",mongoConj:"$or",jsonLogicConj:"or",sqlConj:"OR",spelConj:"or",spelConjs:["or","||"],reversedConj:"AND",formatConj:function(e,t,r,n){return e.size>1?(r?"NOT ":"")+"("+e.join(" "+(n?"OR":"||")+" ")+")":(r?"NOT (":"")+e.first()+(r?")":"")},sqlFormatConj:function(e,t,r){return e.size>1?(r?"NOT ":"")+"("+e.join(" OR ")+")":(r?"NOT (":"")+e.first()+(r?")":"")},spelFormatConj:function(e,t,r,n){return r&&(n=!1),e.size>1?(r?"!":"")+(n?"":"(")+e.join(" || ")+(n?"":")"):(r?"!(":"")+e.first()+(r?")":"")}}},operators:vi,widgets:hi,types:{text:{defaultOperator:"equal",mainWidget:"text",widgets:{text:{operators:["equal","not_equal","like","not_like","starts_with","ends_with","proximity","is_empty","is_not_empty","is_null","is_not_null"],widgetProps:{},opProps:{}},textarea:{operators:["equal","not_equal","like","not_like","starts_with","ends_with","is_empty","is_not_empty","is_null","is_not_null"],widgetProps:{},opProps:{}},field:{operators:["equal","not_equal","proximity"]}}},number:{defaultOperator:"equal",mainWidget:"number",widgets:{number:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"]},slider:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","is_null","is_not_null"]}}},date:{defaultOperator:"equal",widgets:{date:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"]}}},time:{defaultOperator:"equal",widgets:{time:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"]}}},datetime:{defaultOperator:"equal",widgets:{datetime:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"]}}},select:{mainWidget:"select",defaultOperator:"select_equals",widgets:{select:{operators:["select_equals","select_not_equals","is_null","is_not_null"]},multiselect:{operators:["select_any_in","select_not_any_in","is_null","is_not_null"]}}},multiselect:{defaultOperator:"multiselect_equals",widgets:{multiselect:{operators:["multiselect_contains","multiselect_not_contains","multiselect_equals","multiselect_not_equals","is_null","is_not_null"]}}},boolean:{defaultOperator:"equal",widgets:{boolean:{operators:["equal","not_equal","is_null","is_not_null"],widgetProps:{}},field:{operators:["equal","not_equal"]}}},"!group":{defaultOperator:"some",mainWidget:"number",widgets:{number:{widgetProps:{min:0},operators:["some","all","none","equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between"],opProps:{equal:{label:"Count =="},not_equal:{label:"Count !="},less:{label:"Count <"},less_or_equal:{label:"Count <="},greater:{label:"Count >"},greater_or_equal:{label:"Count >="},between:{label:"Count between"},not_between:{label:"Count not between"}}}}},case_value:{mainWidget:"case_value",widgets:{case_value:{}}}},settings:mi,ctx:ci};const Ei=Ci=bi(Ci,["rangeslider","treeselect","treemultiselect"]);var Li="ADD_GROUP",ki="ADD_CASE_GROUP",Pi="REMOVE_GROUP",_i="SET_CONJUNCTION",Vi="SET_NOT",Zi="ADD_RULE",Ri="REMOVE_RULE",Di="SET_FIELD",xi="SET_OPERATOR",Ti="SET_VALUE",Ai="SET_VALUE_SRC",Ni="SET_OPERATOR_OPTION",Ii="SET_LOCK",qi="SET_TREE",Mi="MOVE_ITEM",Wi="after",Bi="before",Gi="append",zi="prepend",Ui="SET_DRAG_PROGRESS",$i="SET_DRAG_START",Ji="SET_DRAG_END",Yi=r(61230),Hi=r.n(Yi);function Ki(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Qi(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Qi(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}function Qi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Xi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ea(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xi(Object(r),!0).forEach((function(t){(0,P.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ta=function(e,t,r,n,o,i){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},u=i.settings.shouldCreateEmptyGroup,s=t.push(n),c=!u,p=!(null==l||!l.isDefaultCase),f=e;return(e=ua(e,t,r,n,Ve(i).merge(o||{}),i,a))!==f&&(a||p||(e=e.setIn(Ae(s,"children1"),new(R().OrderedMap)),c&&(e=ua(e,s,"rule",oe(),ke(i),i))),e=We(e)),e},ra=function(e,t,r){e=sa(e,t);var n=r.settings.canLeaveEmptyGroup,o=t.slice(0,-1);return!Ke(e,o)&&!n&&(e=Be(e),He(e)&&!n&&(e=ua(e,new(R().List),"rule",oe(),ke(r),r))),We(e)},na=function(e,t,r){e=sa(e,t);var n=r.settings.canLeaveEmptyGroup,o=t.pop(),i=e.getIn(Ae(o)),a=i.getIn(["properties","field"]),l=i.getIn(["properties","operator"]),u=(i.getIn(["properties","value",0]),a?hr(r,a):null),s=l?mr(r,l,a):null,c=a&&l&&0!=s.cardinality,p="rule_group"==i.get("type"),f=!Ke(e,o),d=p?c&&u.initialEmptyWhere:n;return f&&!d&&(p&&(e=e.deleteIn(Ae(o))),e=Be(e),He(e)&&!n&&(e=ua(e,new(R().List),"rule",oe(),ke(r),r))),We(e)},oa=function(e,t,r){return e.setIn(Ae(t,"properties","not"),r)},ia=function(e,t,r){return Me(e.setIn(Ae(t,"properties","isLocked"),r))},aa=function(e,t,r){return e.setIn(Ae(t,"properties","conjunction"),r)},la=function e(t,r,n){n&&Array.isArray(n)&&(r.children1=new(R().OrderedMap)(n.reduce((function(r,n){var o=oe(),i=ea(ea({},n),{},{properties:Ze(t,n).merge(n.properties||{}),id:o});return e(t,i,i.children1),ea(ea({},r),{},(0,P.Z)({},o,new(R().Map)(i)))}),{})))},ua=function(e,t,r,n,o,i){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if("switch_group"==r)throw new Error("Can't add switch_group programmatically");var l,u,s=i.settings,c=s.maxNumberOfCases,p=s.maxNumberOfRules,f=s.maxNesting,d=e.get("type"),g="switch_group"==d,v=e.getIn(Ae(t)),h=g?e.getIn(Ae(t.take(2))):null,m=Ae(t,"children1"),y=e.getIn(m),b=!!y&&y.size,O=b?y.size:null;"case_group"==r?(l=O,u=c):"group"==r?(l=t.size,u=f):"rule_group"==(null==v?void 0:v.get("type"))||(l=Ue(g?h:e),u=p);var w=!u||!l||l<u,j={type:r,id:n,properties:o};la(i,j,a);var F="case_group"==r&&b&&null==y.last().get("children1");if(w){var S=new(R().OrderedMap)((0,P.Z)({},n,new(R().Map)(j)));if(b)if(F){var C,E=y.last(),L=new(R().OrderedMap)((C={},(0,P.Z)(C,n,new(R().Map)(j)),(0,P.Z)(C,E.get("id"),E),C));e=(e=e.deleteIn(Ae(m,"children1",E.get("id")))).mergeIn(m,L)}else e=e.mergeIn(m,S);else e=e.setIn(m,S);e=We(e)}return e},sa=function(e,t){return e=e.deleteIn(Ae(t)),We(e)},ca=function(e,t,r,n,o){var i=Ie(e,t),a=t.pop(),l=t.size>1?Ie(e,a):null,u=l?l.get("children1"):null,s=Ie(e,r),c=n==Gi||n==zi?r:r.pop(),p=n==Gi||n==zi?s:r.size>1?Ie(e,c):null,f=p?p.get("children1"):null;if(!l||!p||!i)return e;var d=l.get("id")==p.get("id"),g=c.size<a.size&&N(c.toArray(),a.toArray().slice(0,c.size)),v=c.size>a.size&&N(a.toArray(),c.toArray().slice(0,a.size)),h=null,m=null;g?h=R().List(a.toArray().slice(c.size)):v&&(m=R().List(c.toArray().slice(a.size)));var y=f,b=u;return v||(b=b.delete(i.get("id"))),d?y=b:g&&(y=y.updateIn(Ne(h,"children1"),(function(e){return b}))),n==Bi||n==Wi?y=R().OrderedMap().withMutations((function(e){var t,r=Ki(y.entries());try{for(r.s();!(t=r.n()).done;){var o=(0,_.Z)(t.value,2),a=o[0],l=o[1];a==s.get("id")&&n==Bi&&e.set(i.get("id"),i),e.set(a,l),a==s.get("id")&&n==Wi&&e.set(i.get("id"),i)}}catch(e){r.e(e)}finally{r.f()}})):n==Gi?y=y.merge((0,P.Z)({},i.get("id"),i)):n==zi&&(y=R().OrderedMap((0,P.Z)({},i.get("id"),i)).merge(y)),v&&(b=(b=b.updateIn(Ne(m,"children1"),(function(e){return y}))).delete(i.get("id"))),d||g||(e=e.updateIn(Ae(a,"children1"),(function(e){return b}))),v||(e=e.updateIn(Ae(c,"children1"),(function(e){return y}))),We(e)},pa=function(e,t,r,n){if(!r)return sa(e,t);var o=n.settings,i=o.fieldSeparator,a=o.setOpOnChangeField,l=o.showErrorMessage;Array.isArray(r)&&(r=r.join(i));var u=e.getIn(Ae(t,"type")),s=e.getIn(Ae(t,"properties")),c="rule_group"==u,p=hr(n,r),f="!group"==p.type,d=f&&"array"==p.mode,g=c!=f,v=s.get("operator"),h=s.get("operatorOptions"),m=(s.get("field"),s.get("value"),s.get("valueSrc",new(R().List)),s.get("valueType",new(R().List)),p&&-1!==p.operators.indexOf(v)?v:null),y=null,b=ft(n,r);if(b&&1==b.length)y=b[0];else if(b&&b.length>1){var O,w=Ki(a||[]);try{for(w.s();!(O=w.n()).done;){var j=O.value;if("keep"!=j||g?"default"==j?y=Ee(n,r,!1):"first"==j&&(y=dt(n,r)):y=m,y)break}}catch(e){w.e(e)}finally{w.f()}}if(!f&&!p.operators)return console.warn("Type ".concat(p.type," is not supported")),e;if(c&&!f&&(e=(e=(e=e.setIn(Ae(t,"type"),"rule")).deleteIn(Ae(t,"children1"))).setIn(Ae(t,"properties"),new(R().OrderedMap))),f){e=e.setIn(Ae(t,"type"),"rule_group");var F=ct(n,n,s,r,y,"field",!0),S=(F.canReuseValue,F.newValue),C=F.newValueSrc,E=F.newValueType,L=F.operatorCardinality,k=Ve(n,p).merge({field:r,mode:p.mode});return d&&(k=k.merge({operator:y,value:S,valueSrc:C,valueType:E})),e=(e=e.setIn(Ae(t,"children1"),new(R().OrderedMap))).setIn(Ae(t,"properties"),k),p.initialEmptyWhere&&1==L||(e=ua(e,t,"rule",oe(),ke(n,r),n)),We(e)}return e.updateIn(Ae(t,"properties"),(function(e){return e.withMutations((function(e){var t=ct(n,n,e,r,y,"field",!0),o=t.canReuseValue,i=t.newValue,a=t.newValueSrc,u=t.newValueType,s=t.newValueError;l&&(e=e.set("valueError",s));var c=o?h:Le(n,y,r);return e.set("field",r).set("operator",y).set("operatorOptions",c).set("value",i).set("valueSrc",a).set("valueType",u).delete("asyncListValues")}))}))},fa=function(e,t,r,n){var o=n.settings.showErrorMessage,i=e.getIn(Ae(t,"properties")),a=e.getIn(Ae(t,"children1")),l=i.get("field"),u="!group"==hr(n,l).type,s=mr(n,r,l),c=s?A(s.cardinality,1):null;return e=e.updateIn(Ae(t,"properties"),(function(e){return e.withMutations((function(e){var t=e.get("field"),i=e.get("operatorOptions"),a=(e.get("value",new(R().List)),e.get("valueSrc",new(R().List)),e.get("operator"),ct(n,n,e,t,r,"operator",!0)),l=a.canReuseValue,u=a.newValue,s=a.newValueSrc,c=a.newValueType,p=a.newValueError;o&&(e=e.set("valueError",p));var f=l?i:Le(n,r,t);return l||(e=e.delete("asyncListValues")),e.set("operator",r).set("operatorOptions",f).set("value",u).set("valueSrc",s).set("valueType",c)}))})),u&&0==c&&0==a.size&&(e=ua(e,t,"rule",oe(),ke(n,l),n)),e},da=function(e,t,r,n,o,i,a,l){var u,s=i.settings,c=s.fieldSeparator,p=s.showErrorMessage,f=e.getIn(Ae(t,"properties","valueSrc",r+""))||null;"field"===f&&Array.isArray(n)&&(n=n.join(c));var d=e.getIn(Ae(t,"properties","field"))||null,g=e.getIn(Ae(t,"properties","operator"))||null,v=mr(i,g,d),h=g?A(v.cardinality,1):null,m=o||ma(n,f,i),y=rt(i,d,d,g,n,m,f,a,!1,!1),b=(0,_.Z)(y,2),O=b[0],w=b[1],j=!O;if(w!==n&&(n=w),p){var F=Ft(i,d,g,f),S=yr(i,d,g,F,f),C=Array.from({length:h},(function(r,n){return e.getIn(Ae(t,"properties","valueSrc",n+""))||null}));if(v&&v.validateValues&&C.filter((function(e){return"value"==e||null==e})).length==h){var E=Array.from({length:h},(function(o,i){return i==r?n:e.getIn(Ae(t,"properties","value",i+""))||null})),L=S&&S.toJS?E.map((function(e){return S.toJS.call(i.ctx,e,S)})):E,k=v.validateValues(L);e=e.setIn(Ae(t,"properties","valueError",h),k)}}e.getIn(Ae(t,"properties","value"))||(e=e.setIn(Ae(t,"properties","value"),new(R().List)(new Array(h))).setIn(Ae(t,"properties","valueType"),new(R().List)(new Array(h))).setIn(Ae(t,"properties","valueError"),new(R().List)(new Array(h))));var P=null==e.getIn(Ae(t,"properties","value",r+"")),V=!!e.getIn(Ae(t,"properties","valueError",r));return(j||p)&&(e=e.deleteIn(Ae(t,"properties","asyncListValues")),void 0===n?e=(e=e.setIn(Ae(t,"properties","value",r+""),void 0)).setIn(Ae(t,"properties","valueType",r+""),null):(a&&(e=e.setIn(Ae(t,"properties","asyncListValues"),a)),e=(e=e.setIn(Ae(t,"properties","value",r+""),n)).setIn(Ae(t,"properties","valueType",r+""),m),u=l&&!P&&!V)),p&&(e=e.setIn(Ae(t,"properties","valueError",r),O)),l&&(j&&V||!j&&!V)&&(e=e.setIn(Ae(t,"properties","valueError",r),O),u=!1),{tree:e,isInternalValueChange:u}},ga=function(e,t,r,n,o){var i=o.settings.showErrorMessage,a=e.getIn(Ae(t,"properties","field"))||null,l=e.getIn(Ae(t,"properties","operator"))||null;if(e=(e=(e=e.setIn(Ae(t,"properties","value",r+""),void 0)).setIn(Ae(t,"properties","valueType",r+""),null)).deleteIn(Ae(t,"properties","asyncListValues")),i){e=e.setIn(Ae(t,"properties","valueError",r),null);var u=mr(o,l,a),s=l?A(u.cardinality,1):null;u.validateValues&&(e=e.setIn(Ae(t,"properties","valueError",s),null))}if(e=void 0===n?e.setIn(Ae(t,"properties","valueSrc",r+""),null):e.setIn(Ae(t,"properties","valueSrc",r+""),n),n){var c=e.getIn(Ae(t,"properties")),p=ct(o,o,c,a,l,"valueSrc",!0),f=p.canReuseValue,d=p.newValue,g=p.newValueSrc,v=p.newValueType;p.newValueError,f||g.get(r)!=n||(e=(e=e.setIn(Ae(t,"properties","value",r+""),d.get(r))).setIn(Ae(t,"properties","valueType",r+""),v.get(r)))}return e},va=function(e,t,r,n){return e.setIn(Ae(t,"properties","operatorOptions",r),n)},ha=function(e,t){return t.settings.canLeaveEmptyGroup||(e=Be(e)),e},ma=function(e,t,r){var n=null;if(e)if("field"===t){var o=hr(r,e);o&&(n=o.type)}else if("func"===t){var i=e.get("func");if(i){var a=gr(r,i);a&&(n=a.returnType)}}return n},ya={dragging:{id:null,x:null,y:null,w:null,h:null},mousePos:{},dragStart:{id:null}},ba=function(e,t){if(!e||!e.type)return null;var r=[qi,$i,Ui,Ji],n=Hi()(x()(e,["config","asyncListValues","__isInternal"]),G),o=e.path&&function(e,t){return e.getIn(Ae(t,"properties","field"))||null}(t.tree,e.path)||e.field;return o&&(n.affectedField=o),(r.includes(e.type)||0==e.type.indexOf("@@redux"))&&(n=null),n},Oa=function(e,t){return{type:qi,tree:t,config:e}},wa=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"rule",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return{type:Zi,ruleType:n,children:o,path:B(t),id:oe(),properties:ke(e).merge(r||{}),config:e}},ja=function(e,t){return{type:Ri,path:B(t),config:e}},Fa=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return{type:ki,path:B(t),children:n,id:oe(),properties:Ve(e).merge(r||{}),config:e,meta:{isDefaultCase:!0}}},Sa=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return{type:ki,path:B(t),children:n,id:oe(),properties:Ve(e).merge(r||{}),config:e}},Ca=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return{type:Li,path:B(t),children:n,id:oe(),properties:Ve(e).merge(r||{}),config:e}},Ea=function(e,t){return{type:Pi,path:B(t),config:e}},La=function(e,t,r,n){return{type:Mi,fromPath:B(t),toPath:B(r),placement:n,config:e}},ka=function(e,t,r){return{type:_i,path:B(t),conjunction:r}},Pa=function(e,t,r){return{type:Vi,path:B(t),not:r}},_a=function(e,t,r){return{type:Ii,path:B(t),lock:r}},Va=function(e,t,r){return{type:Di,path:B(t),field:r,config:e}},Za=function(e,t,r){return{type:xi,path:B(t),operator:r,config:e}},Ra=function(e,t,r,n,o,i,a){return{type:Ti,path:B(t),delta:r,value:n,valueType:o,asyncListValues:i,config:e,__isInternal:a}},Da=function(e,t,r,n){return{type:Ai,path:B(t),delta:r,srcKey:n,config:e}},xa=function(e,t,r,n){return{type:Ni,path:B(t),name:r,value:n,config:e}};function Ta(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Aa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ta(Object(r),!0).forEach((function(t){(0,P.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ta(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Na=Aa(Aa(Aa(Aa({},d),c),p),{},{ConfigMixins:Si}),Ia=r(7862),qa=r.n(Ia);const Ma=k.createContext();var Wa=r(82923),Ba=r(79541),Ga="after",za="before",Ua="append",$a="prepend",Ja=function(e,t){return{type:"SET_DRAG_PROGRESS",mousePos:e,dragging:t}},Ya=function(e,t,r){return{type:"SET_DRAG_START",dragStart:e,dragging:t,mousePos:r}},Ha=function(){return{type:"SET_DRAG_END"}},Ka=v,Qa=h,Xa=m;function el(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return tl(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?tl(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}function tl(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var rl=Na.ConfigUtils,nl=rl.extendConfig,ol=rl.configKeys,il=function(){var e=new Map,t=0;return{getExtended:function(r){return function(r){return function(t){var r,n=el(e.keys());try{var o=function(){var n=r.value;if(0===ol.map((function(e){return n[e]===t[e]})).filter((function(e){return!e})).length)return{v:e.get(n)}};for(n.s();!(r=n.n()).done;){var i=o();if("object"===(0,V.Z)(i))return i.v}}catch(e){n.e(e)}finally{n.f()}var a,l=el(e.values());try{var u=function(){var e=a.value;if(0===ol.map((function(r){return e[r]===t[r]})).filter((function(e){return!e})).length)return{v:e}};for(l.s();!(a=l.n()).done;){var s=u();if("object"===(0,V.Z)(s))return s.v}}catch(e){l.e(e)}finally{l.f()}return null}(r)||function(r){var n=nl(r,++t);return e.size+1>2&&e.delete(e.keys()[0]),e.set(r,n),n}(r)}(function(e){return kt()(e,ol)}(r))},getBasic:function(t){var r,n=el(e.keys());try{var o=function(){var n=r.value,o=e.get(n);if(0===ol.map((function(e){return o[e]===t[e]})).filter((function(e){return!e})).length)return{v:n}};for(n.s();!(r=n.n()).done;){var i=o();if("object"===(0,V.Z)(i))return i.v}}catch(e){n.e(e)}finally{n.f()}return t}}},al=r(73656),ll=function(e,t,r){if(!t||e.length<=t)return e;var n=e.substr(0,t-1);return(r?n.substr(0,n.lastIndexOf(" ")):n)+"..."},ul=function(e,t){return e===t||e.equals(t)},sl=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e===t||(Array.isArray(e)?cl(e,t,r):e&&"function"==typeof e.equals?e.equals(t):"object"===(0,V.Z)(e)?pl(e,t,r):e===t)};function cl(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e===t)return!0;if(!e||!t)return!1;var n=e.length;if(t.length!==n)return!1;for(var o=0;o<n;o++){var i=r?sl(e[o],t[o],r):e[o]===t[o];if(!i)return!1}return!0}function pl(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e===t)return!0;if(!e||!t)return!1;var n=Object.keys(e),o=Object.keys(t),i=n.length;if(o.length!==i)return!1;for(var a=0;a<i;a++){var l=n[a],u=r?sl(e[l],t[l],r):e[l]===t[l];if(!u)return!1}return!0}var fl=function(){return void 0!==al&&{NODE_ENV:"production"}&&!1},dl=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=null!=e?e:fl();return t?console:{error:function(){},log:function(){},warn:function(){},debug:function(){},info:function(){}}}(),gl=Na.validateAndFixTree,vl=function e(t){if(t){var r,n=(r=t)._reactRootContainer?"root":Object.getOwnPropertyNames(r).filter((function(e){return e.startsWith("__reactContainer")})).length>0?"container":void 0;return void 0!==n?n:e(t.parentNode)}},hl=function(e){return"root"===vl(e)},ml=function(e,t){return function(r,n){var o=e.props,i=e.state,a=r!=o||n!=i;if(a&&i==n&&o!=r){var l=[];for(var u in r){var s=r[u]!=o[u];s&&("ignore"==t[u]?s=!1:"shallow_deep"==t[u]?s=!sl(r[u],o[u],!0):"shallow"==t[u]?s=!sl(r[u],o[u]):"function"==typeof t[u]&&(s=t[u](r[u],o[u],n))),s&&l.push(u)}l.length||(a=!1)}return a}},yl=function(e){return function(t,r){return!sl(e.props,t)||!sl(e.state,r)}},bl=function(e){if(e.shouldComponentUpdate||(e.shouldComponentUpdate=yl(e)),16==(r=k.version.split(".").map(parseInt.bind(null,10)))[0]&&r[1]<3||r[0]<16)e.componentWillReceiveProps=function(t){e.onPropsChanged(t)};else{var t=e.shouldComponentUpdate;e.shouldComponentUpdate=function(r,n){return!sl(e.props,r)&&e.onPropsChanged(r),t.call(e,r,n)}.bind(e)}var r},Ol=function(e,t,r){return Hi()(e,(function(e){return function(){for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return r(e.apply(void 0,[t].concat(o)))}}))};function wl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function jl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wl(Object(r),!0).forEach((function(t){(0,P.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Fl=function(e){(0,C.Z)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,L.Z)(t);if(r){var o=(0,L.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,E.Z)(this,e)});function o(e){var t;return(0,j.Z)(this,o),(t=n.call(this,e)).shouldComponentUpdate=ml((0,S.Z)(t),{tree:function(e){return e!==t.oldValidatedTree||t.oldValidatedTree!==t.validatedTree}}),bl((0,S.Z)(t)),t._updateActions(e),t.validatedTree=e.getMemoizedTree(e.config,e.tree,void 0,e.sanitizeTree),t.oldValidatedTree=t.validatedTree,t}return(0,F.Z)(o,[{key:"_updateActions",value:function(e){var t=e.config,r=e.dispatch;this.actions=Ol(jl(jl(jl({},Ka),Qa),Xa),t,r)}},{key:"onPropsChanged",value:function(e){var t=e.onChange,r=this.props.config,n=e.tree,o=(this.props.tree,e.config);if(this.oldValidatedTree=this.validatedTree,this.validatedTree=n,r!==o&&(this._updateActions(e),this.validatedTree=e.getMemoizedTree(o,n,r)),!ul(this.validatedTree,this.oldValidatedTree)){var i=e.getBasicConfig(o);t&&t(this.validatedTree,i,e.__lastAction)}}},{key:"render",value:function(){var e=this.props,t=e.config,r=e.renderBuilder,n=e.dispatch,o=e.__isInternalValueChange;return r({tree:this.validatedTree,actions:this.actions,config:t,dispatch:n,__isInternalValueChange:o})}}]),o}(k.Component);Fl.propTypes={config:qa().object.isRequired,onChange:qa().func,renderBuilder:qa().func,tree:qa().any};var Sl=(0,Ba.$j)((function(e){return{tree:e.tree,__isInternalValueChange:e.__isInternalValueChange,__lastAction:e.__lastAction}}),null,null,{context:Ma})(Fl);Sl.displayName="ConnectedQuery";const Cl=Sl;var El=Na.DefaultUtils.defaultRoot,Ll=function(e){(0,C.Z)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,L.Z)(t);if(r){var o=(0,L.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,E.Z)(this,e)});function o(e,t){var r;(0,j.Z)(this,o),(r=n.call(this,e,t)).setLastTree=function(e){r.prevTree&&(r.prevprevTree=r.prevTree),r.prevTree=e},r.shouldComponentUpdate=ml((0,S.Z)(r),{value:function(e,t,r){return!1}}),bl((0,S.Z)(r));var i=il(),a=i.getExtended,l=i.getBasic;r.getMemoizedConfig=a,r.getBasicConfig=l,r.getMemoizedTree=function(){var e,t,r;return function(n,o){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return o?n.__configId===r&&(ul(o,e)||ul(o,t))?t:(r=n.__configId,e=o,t=!1===a?gl(o,null,n,i||n,!1,!1):gl(o,null,n,i||n)):null}}();var u=r.getMemoizedConfig(e),s=e.value,c=r.getMemoizedTree(u,s),p=function(e,t,r,n){var o=De(e),i=ea({tree:t||o},ya);return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,o=arguments.length>1?arguments[1]:void 0,a={__isInternalValueChange:void 0,__lastAction:void 0},l={},u=ba(o,t);switch(null==o?void 0:o.type){case qi:var s=r(o.config,o.tree);l.tree=s;break;case ki:l.tree=ta(t.tree,o.path,"case_group",o.id,o.properties,o.config,o.children,o.meta);break;case Li:l.tree=ta(t.tree,o.path,"group",o.id,o.properties,o.config,o.children,o.meta);break;case Pi:l.tree=ra(t.tree,o.path,o.config);break;case Zi:l.tree=ua(t.tree,o.path,o.ruleType,o.id,o.properties,o.config,o.children);break;case Ri:l.tree=na(t.tree,o.path,o.config);break;case _i:l.tree=aa(t.tree,o.path,o.conjunction);break;case Vi:l.tree=oa(t.tree,o.path,o.not);break;case Di:l.tree=pa(t.tree,o.path,o.field,o.config);break;case Ii:l.tree=ia(t.tree,o.path,o.lock);break;case xi:l.tree=fa(t.tree,o.path,o.operator,o.config);break;case Ti:var c=da(t.tree,o.path,o.delta,o.value,o.valueType,o.config,o.asyncListValues,o.__isInternal),p=c.tree,f=c.isInternalValueChange;l.__isInternalValueChange=f,l.tree=p;break;case Ai:l.tree=ga(t.tree,o.path,o.delta,o.srcKey,o.config);break;case Ni:l.tree=va(t.tree,o.path,o.name,o.value);break;case Mi:l.tree=ca(t.tree,o.fromPath,o.toPath,o.placement,o.config);break;case $i:l.dragStart=o.dragStart,l.dragging=o.dragging,l.mousePos=o.mousePos;break;case Ui:l.mousePos=o.mousePos,l.dragging=o.dragging;break;case Ji:l.tree=ha(t.tree,e),l=ea(ea({},l),ya)}return u&&(l.__lastAction=u),n&&l.tree&&t.tree&&n(t.tree),ea(ea(ea({},t),a),l)}}(u,c,r.getMemoizedTree,r.setLastTree),f=(0,Wa.MT)(p);return r.config=u,r.state={store:f},r.QueryWrapper=function(e){return u.settings.renderProvider(e,u.ctx)},r}return(0,F.Z)(o,[{key:"onPropsChanged",value:function(e){var t=this.props,r=this.config,n=this.getMemoizedConfig(e),o=r!==n,i=this.state.store.getState().tree,a=!ul(e.value,this.props.value)&&!ul(e.value,i),l=a?e.value||El(e):i,u=a&&!ul(e.value,this.prevTree)&&!ul(e.value,this.prevprevTree);if(this.sanitizeTree=u||o,o&&(t.settings.renderProvider!==e.settings.renderProvider&&(this.QueryWrapper=function(e){return n.settings.renderProvider(e,n.ctx)}),this.config=n),a||o){var s=this.getMemoizedTree(n,l,r,this.sanitizeTree);this.state.store.dispatch(Ka.setTree(n,s))}}},{key:"render",value:function(){var e=this.props,t=e.renderBuilder,r=e.get_children,n=e.onChange,o=this.state.store,i=this.config,a=this.QueryWrapper;return k.createElement(a,{config:i},k.createElement(Ba.zt,{store:o,context:Ma},k.createElement(Cl,{config:i,getMemoizedTree:this.getMemoizedTree,getBasicConfig:this.getBasicConfig,sanitizeTree:this.sanitizeTree,onChange:n,renderBuilder:t||r})))}}]),o}(k.Component);Ll.propTypes={conjunctions:qa().object.isRequired,fields:qa().object.isRequired,types:qa().object.isRequired,operators:qa().object.isRequired,widgets:qa().object.isRequired,settings:qa().object.isRequired,ctx:qa().object.isRequired,onChange:qa().func,renderBuilder:qa().func,value:qa().any};var kl=r(16867),Pl=r(5248),_l=r(87608),Vl=r.n(_l);var Zl=Na.ConfigUtils.getFieldConfig;function Rl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,L.Z)(e);if(t){var o=(0,L.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,E.Z)(this,r)}}var Dl=Na.clone,xl=Na.TreeUtils.getFlatTree,Tl=!1,Al=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t=function(t){(0,C.Z)(o,t);var n=Rl(o);function o(e){var t;return(0,j.Z)(this,o),(t=n.call(this,e))._getEventTarget=function(e,t){return e&&e.__mocked_window||document.body||window},t.onDragStart=function(e,r,n){var o=r.closest(".query-builder");void 0===t._isUsingLegacyReactDomRender&&(t._isUsingLegacyReactDomRender=hl(o)),document.body.classList.add("qb-dragging"),o.classList.add("qb-dragging");var i,a=o.closest(".query-builder-container")||o,l=(a=t._getScrollParent(a)||document.body).scrollTop,u=(t._getDraggableNodeEl(o),t._getPlaceholderNodeEl(o),o.querySelectorAll(".group--children")),s=u.length?u[0]:null;s&&(i=window.getComputedStyle(s,null).getPropertyValue("padding-left"),i=parseInt(i));var c={id:e,x:r.offsetLeft,y:r.offsetTop,w:r.offsetWidth,h:r.offsetHeight,itemInfo:t.tree.items[e],paddingLeft:i},p={id:e,x:r.offsetLeft,y:r.offsetTop,scrollTop:l,clientX:n.clientX,clientY:n.clientY,itemInfo:Dl(t.tree.items[e]),treeEl:o,treeElContainer:a},f={clientX:n.clientX,clientY:n.clientY},d=t._getEventTarget(n,p);t.eventTarget=d,d.addEventListener("mousemove",t.onDrag),d.addEventListener("mouseup",t.onDragEnd),t.props.setDragStart(p,c,f)},t.onDrag=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=Object.assign({},t.props.dragging),i=t.props.dragStart,a=o.paddingLeft,l=i.treeElContainer,u=l.scrollTop;if(o.itemInfo=t.tree.items[o.id],o.itemInfo){var s={clientX:e.clientX,clientY:e.clientY},c={clientX:i.clientX,clientY:i.clientY};if(e.__mock_dom){var p=i.treeEl,f=t._getDraggableNodeEl(p),d=t._getPlaceholderNodeEl(p);e.__mock_dom({treeEl:p,dragEl:f,plhEl:d})}if(!i.plX){var g=i.treeEl,v=t._getPlaceholderNodeEl(g);v&&(i.plX=v.getBoundingClientRect().left+window.scrollX,i.plY=v.getBoundingClientRect().top+window.scrollY)}var h=i.x,m=i.y,y=i.clientX,b=i.clientY,O=i.scrollTop,w={x:h+(e.clientX-y),y:m+(e.clientY-b)+(u-O)};o.x=w.x,o.y=w.y,o.paddingLeft=a,o.mousePos=s,o.startMousePos=c,t.props.setDragProgress(s,o);var j=!!n&&t.handleDrag(o,e,r);j||e.preventDefault&&e.preventDefault()}},t.onDragEnd=function(){var e=t.props.dragStart.treeEl;t.props.setDragEnd(),e.classList.remove("qb-dragging"),document.body.classList.remove("qb-dragging"),t._cacheEls={};var r=t.eventTarget||t._getEventTarget();r.removeEventListener("mousemove",t.onDrag),r.removeEventListener("mouseup",t.onDragEnd)},t.pureShouldComponentUpdate=yl((0,S.Z)(t)),bl((0,S.Z)(t)),t.onPropsChanged(e),t}return(0,F.Z)(o,[{key:"onPropsChanged",value:function(e){this.tree=xl(e.tree)}},{key:"shouldComponentUpdate",value:function(e,t){var r=this.props,n=this.state,o=this.pureShouldComponentUpdate(e,t);if(o&&n==t&&r!=e){var i=[];for(var a in e)e[a]!=r[a]&&"dragging"!=a&&"mousePos"!=a&&i.push(a);i.length||(o=!1)}return o}},{key:"componentDidUpdate",value:function(e,t){var r=this.props.dragging,n=this.props.dragStart;if(Tl=!1,n&&n.id&&(r.itemInfo=this.tree.items[r.id],r.itemInfo&&(r.itemInfo.index!=n.itemInfo.index||r.itemInfo.parent!=n.itemInfo.parent))){var o=n.treeEl,i=n.treeElContainer,a=this._getPlaceholderNodeEl(o,!0);if(a){var l=a.getBoundingClientRect().left+window.scrollX,u=a.getBoundingClientRect().top+window.scrollY,s=n.plX,c=n.plY,p=i.scrollTop;n.plX=l,n.plY=u,n.itemInfo=Dl(r.itemInfo),n.y=a.offsetTop,n.x=a.offsetLeft,n.clientY+=u-c,n.clientX+=l-s,i!=document.body&&(n.scrollTop=p),this.onDrag(this.props.mousePos,!1)}}}},{key:"_getNodeElById",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t)return null;this._cacheEls||(this._cacheEls={});var n=this._cacheEls[t];return n&&document.contains(n)&&!r||(n=e.querySelector('.group-or-rule-container[data-id="'+t+'"]'),this._cacheEls[t]=n),n}},{key:"_getDraggableNodeEl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._cacheEls||(this._cacheEls={});var r=this._cacheEls.draggable;if(r&&document.contains(r)&&!t)return r;var n=e.getElementsByClassName("qb-draggable");return r=n.length?n[0]:null,this._cacheEls.draggable=r,r}},{key:"_getPlaceholderNodeEl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._cacheEls||(this._cacheEls={});var r=this._cacheEls.placeholder;if(r&&document.contains(r)&&!t)return r;var n=e.getElementsByClassName("qb-placeholder");return r=n.length?n[0]:null,this._cacheEls.placeholder=r,r}},{key:"_isScrollable",value:function(e){var t=window.getComputedStyle(e)["overflow-y"];return("scroll"===t||"auto"===t)&&e.scrollHeight>e.offsetHeight}},{key:"_getScrollParent",value:function(e){return null==e?null:e===document.body||this._isScrollable(e)?e:this._getScrollParent(e.parentNode)}},{key:"handleDrag",value:function(e,t,r){var n,o,i,a,l=this,u=e.itemInfo,s=e.paddingLeft,c=null,p=this.props.dragStart.treeEl,f=e.id,d=this._getDraggableNodeEl(p),g=this._getPlaceholderNodeEl(p);if(d&&g){if(n=d.getBoundingClientRect(),!(o=g.getBoundingClientRect()).width)return;var v={hrz:0,vrt:0};n.top<o.top?v.vrt=-1:n.bottom>o.bottom&&(v.vrt=1),n.left>o.left?v.hrz=1:n.left<o.left&&(v.hrz=-1);var h,m={x:(a=p.getBoundingClientRect()).left+(a.right-a.left)/2,y:v.vrt>=0?n.bottom:n.top};if(t.__mocked_hov_container)h=t.__mocked_hov_container;else{var y=document.elementFromPoint(m.x,m.y-1);if(!(h=y?y.closest(".group-or-rule-container"):null)&&y&&y.classList.contains("query-builder-container")){var b,O=null==y||null===(b=y.firstChild)||void 0===b?void 0:b.firstChild;O&&O.classList.contains("group-or-rule-container")&&(h=O)}}if(h){var w=h.classList.contains("group-container"),j=h.getAttribute("data-id"),F=h,S=!1,C=!1;if(F){var E=(i=F.getBoundingClientRect()).bottom-i.top,L=this.tree.items[j];if(!L)throw new Error("There is an issue with rendering. If you use Next.js, please check getServerSideProps() method.");var k=null,P=null,_=null,V=null;if(0==v.vrt)_=u,(P=g)&&(k=P.getBoundingClientRect());else if(w){if(v.vrt>0){var Z=h.getElementsByClassName("group--header"),R=Z.length?Z[0]:null;if(R){var D=R.getBoundingClientRect(),x=D.bottom-D.top;n.bottom-D.top>3*x/4&&L.top>e.itemInfo.top&&(_=L,k=D,P=R,C=!0)}}else v.vrt<0&&L.lev>=u.lev&&i.bottom-n.top>=2&&L.top<e.itemInfo.top&&(_=L,k=i,P=F,S=!0);(v.vrt<0?i.bottom-n.top>E-5:n.bottom-i.top>E-5)&&(C||S||(_=L,k=i,P=F),V=L)}else(v.vrt<0?i.bottom-n.top>E/2:n.bottom-i.top>E/2)&&(_=L,k=i,P=F);var T=_&&_.id==f;if(k){var A=n.left-a.left,N=(k.left,a.left,Math.max(0,Math.round(A/s))),I=[],q=[];if(T);else{if(w&&(S?I.push([Ua,_,_.lev+1]):C&&I.push([$a,_,_.lev+1]),V)){var M=0==V.lev,W="case_group"==V.type&&"case_group"!=u.type,B=V.prev&&this.tree.items[V.prev].caseId,G=V.next&&this.tree.items[V.next].caseId;u.caseId==B&&(B=null),u.caseId==G&&(G=null);var z=B&&this.tree.items[B],U=G&&this.tree.items[G];v.vrt>0?M?q.push([Ua,V,V.lev+1]):W&&U?q.push([$a,U,U.lev+1]):q.push([Ga,V,V.lev]):v.vrt<0&&(M?q.push([$a,V,V.lev+1]):W&&z?q.push([Ua,z,z.lev+1]):q.push([za,V,V.lev]))}S||C||(v.vrt<0?I.push([za,_,_.lev]):v.vrt>0&&I.push([Ga,_,_.lev]))}var $=function(e){var t=e[1],r=u.caseId?l.tree.items[u.caseId]:null,n=t.caseId?l.tree.items[t.caseId]:null;return[].concat((0,ee.Z)(e),[r,n])};I=I.map($),q=q.map($);var J=null,Y=(I=I.filter((function(e){var t=e[0],r=e[1];if((t==za||t==Ga)&&null==r.parent)return!1;if(r.collapsed&&(t==Ua||t==$a))return!1;var n=r.id==u.id;if(!n)for(var o=r;o.parent;)if((o=l.tree.items[o.parent]).id==u.id){n=!0;break}return!n})).map((function(e){var t=e[0],r=e[1],n=(e[2],e[3],e[4],null);return(n=t==Ua||t==$a?r:l.tree.items[r.parent])&&null==n.parent&&(n=null),e[5]=n,e}))).filter((function(e){return l.canMove(u,e[1],e[0],e[3],e[4],e[5],r)}));0==Y.length&&q.length>0&&(Y=q.filter((function(e){return l.canMove(u,e[1],e[0],e[3],e[4],e[5],r)})));var H=Y.map((function(e){return e[2]})),K=u.lev,Q=H.concat(K),X=null;-1!=Q.indexOf(N)?X=N:N>Math.max.apply(Math,(0,ee.Z)(Q))?X=Math.max.apply(Math,(0,ee.Z)(Q)):N<Math.min.apply(Math,(0,ee.Z)(Q))&&(X=Math.min.apply(Math,(0,ee.Z)(Q))),J=Y.find((function(e){return e[2]==X})),T||J||!Y.length||(J=Y[0]),c=J}}}else dl.log("out of tree bounds!")}return!!c&&(this.move(u,c[1],c[0],c[3]),!0)}},{key:"canMove",value:function(e,t,r,n,o,i,a){if(!e||!t)return!1;if(e.id===t.id)return!1;var l=this.props.config.settings,u=l.canRegroup,s=l.canRegroupCases,c=l.maxNesting,p=l.maxNumberOfRules,f=l.canLeaveEmptyCase,d=i?i.lev+1:t.lev,g=r==za||r==Ga,v=r==$a||r==Ua,h=g&&1==t.lev||v&&0==t.lev,m=e.parent!=t.parent,y=v||m,b="case_group"==e.type&&!h||"rule_group"==e.parentType||"rule_group"==t.type||"rule_group"==t.parentType||"case_group"!=e.type&&"case_group"==t.type&&g||"case_group"!=e.type&&"switch_group"==t.type||!s&&e.caseId!=t.caseId,O=t.isLocked||e.isLocked||i&&i.isLocked;if(c&&d>c)return!1;if(y&&(!u||b||O))return!1;if("case_group"!=e.type&&e.caseId!=t.caseId){var w=!!n&&2==n._height,j=o?o.leafsCount+1:0;if(p&&j>p)return!1;if(w&&!f)return!1}if("case_group"==e.type&&(e.isDefaultCase||t.isDefaultCase||"switch_group"==t.type&&r==Ua))return!1;var F=!0;return a&&(F=a(e.node.toJS(),t.node.toJS(),r,i?i.node.toJS():null)),F}},{key:"move",value:function(e,t,r,n){this._isUsingLegacyReactDomRender||(Tl=!0),this.props.actions.moveItem(e.path,t.path,r)}},{key:"render",value:function(){return k.createElement(e,(0,Pl.Z)({},this.props,{onDragStart:this.onDragStart}))}}]),o}(k.Component),t.propTypes={tree:qa().any.isRequired,actions:qa().object.isRequired},t},Nl=["isDraggingTempo","isDraggingMe","dragging"];const Il=function(e){return function(t){var r;return r=function(r){(0,C.Z)(a,r);var n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,L.Z)(n);if(o){var r=(0,L.Z)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,E.Z)(this,e)});function a(e){var t;return(0,j.Z)(this,a),(t=i.call(this,e)).handleDraggerMouseDown=function(e){var r=t.props.id,n=t.wrapper.current;t.props.onDragStart&&t.props.onDragStart(r,n,e)},t.wrapper=k.createRef(),t}return(0,F.Z)(a,[{key:"render",value:function(){var r=this.props,n=r.isDraggingTempo,o=r.isDraggingMe,i=r.dragging,a=(0,kl.Z)(r,Nl),l=a.isTrueLocked,u={};o&&n&&(Tl||(u={top:i.y,left:i.x,width:i.w}));var s=Vl()(e,"group-or-rule",o&&n?"qb-draggable":null,o&&!n?"qb-placeholder":null,l?"locked":null);return k.createElement("div",{className:s,style:u,ref:this.wrapper,"data-id":this.props.id},k.createElement(t,(0,Pl.Z)({handleDraggerMouseDown:this.handleDraggerMouseDown,isDraggingMe:o,isDraggingTempo:n},a)))}}]),a}(k.PureComponent),r.propTypes={isDraggingTempo:qa().bool,isDraggingMe:qa().bool,onDragStart:qa().func,dragging:qa().object,isLocked:qa().bool,isTrueLocked:qa().bool},r}};var ql=r(62096),Ml=r.n(ql),Wl=r(57383),Bl=r.n(Wl);function Gl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var zl=Na.ConfigUtils,Ul=zl.getFieldConfig,$l=zl.getOperatorConfig,Jl=function(e){(0,C.Z)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,L.Z)(t);if(r){var o=(0,L.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,E.Z)(this,e)});function o(e){var t;return(0,j.Z)(this,o),t=n.call(this,e),bl((0,S.Z)(t)),t.onPropsChanged(e),t}return(0,F.Z)(o,[{key:"onPropsChanged",value:function(e){var t=this.props;(!this.meta||["config","selectedField","selectedOperator"].map((function(r){return e[r]!==t[r]})).filter((function(e){return e})).length>0)&&(this.meta=this.getMeta(e))}},{key:"getMeta",value:function(e){var t=e.config,r=e.selectedField,n=e.selectedOperator,o=Ul(t,r),i=null==o?void 0:o.operators,a=Hi()(Bl()(t.operators,(function(e,t){return-1!==(null==i?void 0:i.indexOf(t))})),(function(e,n){return $l(t,n,r)})),l=this.buildOptions(t,a,i),u=!!n,s=(u?a[n]:null)||{},c=u?[n]:null;return{placeholder:this.props.config.settings.operatorPlaceholder,items:l,selectedKey:n,selectedKeys:c,selectedPath:c,selectedLabel:s.label,selectedOpts:s,fieldConfig:o}}},{key:"buildOptions",value:function(e,t,r){return t&&r?Ml()(t).sort((function(e,t){return r.indexOf(e)-r.indexOf(t)})).map((function(e){return{key:e,path:e,label:t[e].label}})):null}},{key:"render",value:function(){var e=this.props,t=e.config,r=e.customProps,n=e.setOperator,o=e.readonly,i=e.id,a=e.groupId,l=t.settings.renderOperator,u=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gl(Object(r),!0).forEach((function(t){(0,P.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({id:i,groupId:a,config:t,customProps:r,readonly:o,setField:n},this.meta);return u.items?l(u,t.ctx):null}}]),o}(k.Component);Jl.propTypes={id:qa().string,groupId:qa().string,config:qa().object.isRequired,selectedField:qa().string,selectedOperator:qa().string,readonly:qa().bool,setOperator:qa().func.isRequired};var Yl=["children"],Hl=function(e){var t=e.children,r=(0,kl.Z)(e,Yl);return k.createElement("div",r,t)},Kl=function(){},Ql=function(){return k.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"gray",width:"18px",height:"18px"},k.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),k.createElement("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}))},Xl=function(e){return function(t){var r=t.config.settings.useConfirm,n=r?r.call(t.config.ctx,t.config.ctx):null;return k.createElement(e,(0,Pl.Z)({},t,{confirmFn:n}))}};var eu=function(e){(0,C.Z)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,L.Z)(t);if(r){var o=(0,L.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,E.Z)(this,e)});function o(){return(0,j.Z)(this,o),n.apply(this,arguments)}return(0,F.Z)(o,[{key:"render",value:function(){var e=this.props,t=e.config,r=e.selectedField,n=e.selectedOperator,o=e.setOperator,i=e.selectedFieldPartsLabels,a=e.showOperator,l=e.showOperatorLabel,u=e.selectedFieldWidgetConfig,s=e.readonly,c=e.id,p=e.groupId;return[a&&k.createElement(Hl,{key:"operators-for-"+(i||[]).join("_"),className:"rule--operator"},t.settings.showLabels&&k.createElement("label",{className:"rule--label"},t.settings.operatorLabel),k.createElement(Jl,{key:"operator",config:t,selectedField:r,selectedOperator:n,setOperator:o,readonly:s,id:c,groupId:p})),l&&k.createElement(Hl,{key:"operators-for-"+(i||[]).join("_"),className:"rule--operator"},k.createElement("div",{className:"rule--operator-wrapper"},t.settings.showLabels?k.createElement("label",{className:"rule--label"}," "):null,k.createElement("div",{className:"rule--operator-text-wrapper"},k.createElement("span",{className:"rule--operator-text"},u.operatorInlineLabel))))]}}]),o}(k.PureComponent);function tu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var ru=Na.RuleUtils,nu=ru.getFieldPath,ou=ru.getFieldPathLabels,iu=Na.ConfigUtils.getFieldConfig,au=function(e){(0,C.Z)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,L.Z)(t);if(r){var o=(0,L.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,E.Z)(this,e)});function o(e){var t;return(0,j.Z)(this,o),t=n.call(this,e),bl((0,S.Z)(t)),t.onPropsChanged(e),t}return(0,F.Z)(o,[{key:"onPropsChanged",value:function(e){var t=this.props;(!this.meta||["selectedField","config","parentField"].map((function(r){return e[r]!==t[r]})).filter((function(e){return e})).length>0)&&(this.meta=this.getMeta(e))}},{key:"getMeta",value:function(e){var t=e.selectedField,r=e.config,n=e.parentField,o=t,i=r.settings,a=i.maxLabelsLength,l=i.fieldSeparatorDisplay,u=i.fieldPlaceholder,s=i.fieldSeparator,c=!!t,p=c?null:ll(u,a),f=c?iu(r,o):null,d=f||{},g=nu(o,r),v=nu(o,r,!0),h=this.getFieldLabel(f,o,r),m=ou(o,r),y=m?m.join(l):null;(y==h||n)&&(y=null);var b=d.label2,O="string"==typeof n?n.split(s):n,w=n?iu(r,n):null,j=n?w&&w.subfields:r.fields;return{placeholder:p,items:this.buildOptions(O,r,j,O),parentField:n,selectedKey:o,selectedKeys:g,selectedPath:v,selectedLabel:h,selectedOpts:d,selectedAltLabel:b,selectedFullLabel:y}}},{key:"getFieldLabel",value:function(e,t,r){if(!t)return null;var n=r.settings.fieldSeparator,o=r.settings.maxLabelsLength,i=Array.isArray(t)?t:t.split(n),a=e&&e.label||ut()(i);return ll(a,o)}},{key:"buildOptions",value:function(e,t,r){var n=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(!r)return null;var a=t.settings,l=a.fieldSeparator,u=a.fieldSeparatorDisplay,s=o?o.join(l)+l:"";return Ml()(r).map((function(a){var l=r[a],c=n.getFieldLabel(l,a,t),p=ou(s+a,t).join(u);(p==c||e)&&(p=null);var f=l.label2,d=l.tooltip,g=(o||[]).concat(a),v=l.disabled;if(!l.hideForSelect)return"!struct"==l.type?{disabled:v,key:a,path:s+a,label:c,fullLabel:p,altLabel:f,tooltip:d,items:n.buildOptions(e,t,l.subfields,g,c)}:{disabled:v,key:a,path:s+a,label:c,fullLabel:p,altLabel:f,tooltip:d,grouplabel:i}})).filter((function(e){return!!e}))}},{key:"render",value:function(){var e=this.props,t=e.config,r=e.customProps,n=e.setField,o=e.readonly,i=e.id,a=e.groupId,l=t.settings.renderField,u=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tu(Object(r),!0).forEach((function(t){(0,P.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({id:i,groupId:a,config:t,customProps:r,readonly:o,setField:n},this.meta);return l(u,t.ctx)}}]),o}(k.Component);au.propTypes={id:qa().string,groupId:qa().string,config:qa().object.isRequired,selectedField:qa().string,parentField:qa().string,customProps:qa().object,readonly:qa().bool,setField:qa().func.isRequired};var lu=function(e){(0,C.Z)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,L.Z)(t);if(r){var o=(0,L.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,E.Z)(this,e)});function o(){return(0,j.Z)(this,o),n.apply(this,arguments)}return(0,F.Z)(o,[{key:"render",value:function(){var e=this.props,t=e.config,r=e.selectedField,n=e.setField,o=e.parentField,i=e.classname,a=e.readonly,l=e.id,u=e.groupId;return k.createElement(Hl,{className:i},t.settings.showLabels&&k.createElement("label",{className:"rule--label"},t.settings.fieldLabel),k.createElement(au,{config:t,selectedField:r,parentField:o,setField:n,customProps:t.settings.customFieldSelectProps,readonly:a,id:l,groupId:u}))}}]),o}(k.PureComponent),uu=r(38569),su=r.n(uu),cu=["factory"],pu=Na.ListUtils.getTitleInListValues;const fu=function(e){var t=e.delta,r=e.isFuncArg,n=(e.valueSrc,e.value),o=e.valueError,i=e.asyncListValues,a=e.isSpecialRange,l=e.fieldDefinition,u=(e.widget,e.widgetDefinition),s=e.widgetValueLabel,c=e.valueLabels,p=e.textSeparators,f=e.setValueHandler,d=e.config,g=e.field,v=e.operator,h=e.readonly,m=e.parentField,y=e.parentFuncs,b=e.id,O=e.groupId,w=u.factory,j=(0,kl.Z)(u,cu),F=r&&l.valueSources&&1==l.valueSources.length&&"const"==l.valueSources[0],S=l.defaultValue;if(!w)return"?";var C=a?[n.get(0),n.get(1)]:n?n.get(t):void 0,E=o&&(a?[o.get(0),o.get(1)]:o.get(t))||null;a&&void 0===C[0]&&void 0===C[1]&&(C=void 0);var L=(l||{}).fieldSettings,k=Object.assign({},j,L,{config:d,field:g,parentField:m,parentFuncs:y,fieldDefinition:l,operator:v,delta:t,isSpecialRange:a,isFuncArg:r,value:C,valueError:E,label:s.label,placeholder:s.placeholder,placeholders:c?c.placeholder:null,textSeparators:p,setValue:f,readonly:h,asyncListValues:i,id:b,groupId:O});if(F&&S){var P=L.treeValues||L.listValues;return"boolean"==typeof S?S?k.labelYes||"YES":k.labelNo||"NO":P?Array.isArray(S)?S.map((function(e){return pu(P,e)||e})).join(", "):pu(P,S)||S:""+S}return w(k,d.ctx)};var du=Na.ConfigUtils,gu=du.getFieldConfig,vu=du.getOperatorConfig,hu=du.getFieldWidgetConfig,mu=Na.RuleUtils,yu=mu.getValueSourcesForFieldOp,bu=mu.getWidgetsForFieldOp,Ou=mu.getWidgetForFieldOp,wu=mu.getValueLabel,ju=Na.DefaultUtils.createListFromArray,Fu={cardinality:1},Su=function(e){(0,C.Z)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,L.Z)(t);if(r){var o=(0,L.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,E.Z)(this,e)});function o(e){var t;return(0,j.Z)(this,o),(t=n.call(this,e))._setValue=function(e,r,n,o,i,a){if(e&&Array.isArray(o)){var l=[t.props.value.get(0),t.props.value.get(1)];l[0]!=o[0]&&t.props.setValue(0,o[0],n,i,a),l[1]!=o[1]&&t.props.setValue(1,o[1],n,i,a)}else t.props.setValue(r,o,n,i,a)},t._onChangeValueSrc=function(e,r){t.props.setValueSrc(e,r)},t.renderWidget=function(e,t,r){var n=r.config,o=r.isFuncArg,i=r.leftField,a=r.operator,l=r.value,u=r.valueError,s=r.readonly,c=r.parentField,p=r.parentFuncs,f=r.id,d=r.groupId,g=n.settings,v=t.widgets,h=t.iValues,m=t.aField,y=o?h:l,b=o?i:m,O=v[e],w=O.valueSrc,j=O.valueLabel,F=g.showLabels?k.createElement("label",{className:"rule--label"},j.label):null;return k.createElement("div",{key:"widget-"+b+"-"+e,className:"widget--widget"},"func"==w?null:F,k.createElement(fu,(0,Pl.Z)({id:f,groupId:d,valueSrc:w,delta:e,value:y,valueError:u,isFuncArg:o},kt()(t,["isSpecialRange","fieldDefinition","asyncListValues"]),kt()(v[e],["widget","widgetDefinition","widgetValueLabel","valueLabels","textSeparators","setValueHandler"]),{config:n,field:b,parentField:c,parentFuncs:p,operator:a,readonly:s})))},t.renderValueSources=function(e,t,r){var n=r.config,o=r.isFuncArg,i=r.leftField,a=r.operator,l=r.readonly,u=n.settings,s=t.valueSources,c=t.widgets,p=t.aField,f=o?i:p,d=c[e],g=d.valueSrc,v=d.setValueSrcHandler,h=u.valueSourcesInfo,m=u.renderValueSources,y=s.map((function(e){return[e,{label:h[e].label}]})),b=function(e){return m(e,n.ctx)},O=u.showLabels?k.createElement("label",{className:"rule--label"}," "):null;return s.length>1&&!l&&k.createElement("div",{key:"valuesrc-"+f+"-"+e,className:"widget--valuesrc"},O,k.createElement(b,{key:"valuesrc-"+e,delta:e,valueSources:y,valueSrc:g,config:n,field:f,operator:a,setValueSrc:v,readonly:l,title:u.valueSourcesPopupTitle}))},t.renderSep=function(e,t,r){var n=r.config,o=t.widgets,i=n.settings,a=o[e].sepText,l=i.showLabels?k.createElement("label",{className:"rule--label"}," "):null;return a&&k.createElement("div",{key:"widget-separators-"+e,className:"widget--sep"},l,k.createElement("span",null,a))},t.renderWidgetDelta=function(e){return[t.renderSep(e,t.meta,t.props),t.renderValueSources(e,t.meta,t.props),t.renderWidget(e,t.meta,t.props)]},bl((0,S.Z)(t)),t.onPropsChanged(e),t}return(0,F.Z)(o,[{key:"onPropsChanged",value:function(e){var t=this.props;(!this.meta||["config","field","fieldFunc","fieldArg","leftField","operator","valueSrc","isFuncArg","asyncListValues"].map((function(r){return e[r]!==t[r]||"isFuncArg"==r&&e.isFuncArg&&e.value!==t.value})).filter((function(e){return e})).length>0)&&(this.meta=this.getMeta(e))}},{key:"getMeta",value:function(e){var t=this,r=e.config,n=e.field,o=e.fieldFunc,i=e.fieldArg,a=e.operator,l=e.valueSrc,u=e.value,s=e.isForRuleGruop,c=e.isCaseValue,p=e.isFuncArg,f=e.leftField,d=e.asyncListValues,g=p?{func:o,arg:i}:n,v=l,h=u;(p||s||c)&&(v=ju([l]),h=ju([u]));var m=gu(r,g),y=Ou(r,g,a),b=(bu(r,g,a),p?Fu:vu(r,a,g));if((null==m||null==b)&&!c)return null;var O,w=null==b?void 0:b.isSpecialRange,j=w&&("field"==v.get(0)||"field"==v.get(1)),F=w&&!j,S=F?1:(1,void 0===(O=null==b?void 0:b.cardinality)?1:O);if(0===S)return null;var C=yu(r,g,a,m,p?f:null),E=su()(0,S).map((function(e){var n,o=v.get(e)||null,i=Ou(r,g,a,o),l=hu(r,g,a,i,o);j&&(i=l.singleWidget,l=hu(r,g,a,i,o));var u=null===(n=l)||void 0===n?void 0:n.type,s=wu(r,g,a,e,o,F),c=wu(r,g,a,e,null,F),p=null!=b&&b.textSeparators?null==b?void 0:b.textSeparators[e]:null,f=t._onChangeValueSrc.bind(t,e),d=null,h=null;return w&&(d={placeholder:[(d=[wu(r,g,a,0),wu(r,g,a,1)])[0].placeholder,d[1].placeholder],label:[d[0].label,d[1].label]},h=null==b?void 0:b.textSeparators),{valueSrc:o,valueLabel:s,widget:i,sepText:p,setValueSrcHandler:f,widgetDefinition:l,widgetValueLabel:c,valueLabels:d,textSeparators:h,setValueHandler:t._setValue.bind(t,w,e,u)}}));return{defaultWidget:y,fieldDefinition:m,operatorDefinition:b,isSpecialRange:F,cardinality:S,valueSources:C,widgets:E,iValues:h,aField:g,asyncListValues:d}}},{key:"render",value:function(){if(!this.meta)return null;var e=this.meta,t=e.defaultWidget,r=e.cardinality;if(!t)return null;var n=t;return k.createElement(Hl,{className:"rule--widget rule--widget--".concat(n.toUpperCase()),key:"widget-col-"+n},su()(0,r).map(this.renderWidgetDelta))}}]),o}(k.Component);Su.propTypes={config:qa().object.isRequired,value:qa().any,valueSrc:qa().any,valueError:qa().any,field:qa().string,operator:qa().string,readonly:qa().bool,asyncListValues:qa().array,id:qa().string,groupId:qa().string,setValue:qa().func,setValueSrc:qa().func,isFuncArg:qa().bool,fieldFunc:qa().string,fieldArg:qa().string,leftField:qa().string,isForRuleGruop:qa().bool,parentField:qa().string,parentFuncs:qa().array,isCaseValue:qa().bool};var Cu=["factory"];var Eu=Na.ConfigUtils.getOperatorConfig,Lu=function(e){(0,C.Z)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,L.Z)(t);if(r){var o=(0,L.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,E.Z)(this,e)});function o(){return(0,j.Z)(this,o),n.apply(this,arguments)}return(0,F.Z)(o,[{key:"render",value:function(){if(!this.props.selectedOperator)return null;var e=Eu(this.props.config,this.props.selectedOperator,this.props.selectedField);if(void 0===e.options)return null;var t=e.options,r=t.factory,n=(0,kl.Z)(t,Cu),o=r(Object.assign({},n,{config:this.props.config,field:this.props.selectedField,operator:this.props.selectedOperator,options:this.props.operatorOptions,setOption:this.props.setOperatorOption,readonly:this.props.readonly}),this.props.config.ctx),i=this.props.selectedOperator;return k.createElement("div",{className:"rule--operator rule--operator--".concat(i.toUpperCase())},o)}}]),o}(k.PureComponent);function ku(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ku(Object(r),!0).forEach((function(t){(0,P.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ku(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}Lu.propTypes={config:qa().object.isRequired,operatorOptions:qa().any.isRequired,selectedField:qa().string.isRequired,selectedOperator:qa().string.isRequired,readonly:qa().bool,setOperatorOption:qa().func.isRequired};var _u=Na.ConfigUtils,Vu=_u.getFieldConfig,Zu=_u.getOperatorConfig,Ru=_u.getFieldWidgetConfig,Du=Na.RuleUtils.getFieldPathLabels,xu=function(e){(0,C.Z)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,L.Z)(t);if(r){var o=(0,L.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,E.Z)(this,e)});function o(e){var t;return(0,j.Z)(this,o),t=n.call(this,e),bl((0,S.Z)(t)),t.removeSelf=t.removeSelf.bind((0,S.Z)(t)),t.setLock=t.setLock.bind((0,S.Z)(t)),t.onPropsChanged(e),t}return(0,F.Z)(o,[{key:"onPropsChanged",value:function(e){var t=this.props;(!this.meta||["selectedField","selectedOperator","config","reordableNodesCnt","isLocked"].map((function(r){return e[r]!==t[r]})).filter((function(e){return e})).length>0)&&(this.meta=this.getMeta(e))}},{key:"getMeta",value:function(e){var t=e.selectedField,r=e.selectedOperator,n=e.config,o=e.reordableNodesCnt,i=e.isLocked,a=Du(t,n),l=Vu(n,t),u=l&&"!struct"==l.type,s=t&&r&&!u,c=Zu(n,r,t),p=c&&null!=c.options,f=Ru(n,t,r)||{},d=f.hideOperator;return{selectedFieldPartsLabels:a,selectedFieldWidgetConfig:f,showDragIcon:n.settings.canReorder&&o>1&&!i,showOperator:t&&!d,showOperatorLabel:t&&d&&f.operatorInlineLabel,showWidget:s,showOperatorOptions:s&&p}}},{key:"setLock",value:function(e){this.props.setLock(e)}},{key:"removeSelf",value:function(){var e=this,t=this.props,r=t.confirmFn,n=t.config,o=n.settings,i=o.renderConfirm,a=o.removeRuleConfirmOptions,l=function(){e.props.removeSelf()};a&&!this.isEmptyCurrentRule()?i.call(n.ctx,Pu(Pu({},a),{},{onOk:l,onCancel:null,confirmFn:r}),n.ctx):l()}},{key:"isEmptyCurrentRule",value:function(){return!(null!==this.props.selectedField&&null!==this.props.selectedOperator&&this.props.value.filter((function(e){return void 0!==e})).size>0)}},{key:"renderField",value:function(){var e=this.props,t=e.config,r=e.isLocked,n=t.settings.immutableFieldsMode;return k.createElement(lu,{key:"field",classname:"rule--field",config:t,selectedField:this.props.selectedField,setField:n?Kl:this.props.setField,parentField:this.props.parentField,readonly:n||r,id:this.props.id,groupId:this.props.groupId})}},{key:"renderOperator",value:function(){var e=this.props,t=e.config,r=e.isLocked,n=this.meta,o=n.selectedFieldPartsLabels,i=n.selectedFieldWidgetConfig,a=n.showOperator,l=n.showOperatorLabel,u=t.settings.immutableOpsMode;return k.createElement(eu,{key:"operator",config:t,selectedField:this.props.selectedField,selectedOperator:this.props.selectedOperator,setOperator:u?Kl:this.props.setOperator,selectedFieldPartsLabels:o,showOperator:a,showOperatorLabel:l,selectedFieldWidgetConfig:i,readonly:u||r,id:this.props.id,groupId:this.props.groupId})}},{key:"renderWidget",value:function(){var e=this.props,t=e.config,r=e.valueError,n=e.isLocked,o=this.meta.showWidget,i=t.settings.immutableValuesMode;if(!o)return null;var a=k.createElement(Su,{key:"values",field:this.props.selectedField,parentField:this.props.parentField,operator:this.props.selectedOperator,value:this.props.value,valueSrc:this.props.valueSrc,asyncListValues:this.props.asyncListValues,valueError:r,config:t,setValue:i?Kl:this.props.setValue,setValueSrc:i?Kl:this.props.setValueSrc,readonly:i||n,id:this.props.id,groupId:this.props.groupId});return k.createElement(Hl,{key:"widget-for-"+this.props.selectedOperator,className:"rule--value"},a)}},{key:"renderOperatorOptions",value:function(){var e=this.props.config,t=this.meta.showOperatorOptions,r=e.settings,n=r.immutableOpsMode,o=r.immutableValuesMode;if(!t)return null;var i=k.createElement(Lu,{key:"operatorOptions",selectedField:this.props.selectedField,selectedOperator:this.props.selectedOperator,operatorOptions:this.props.operatorOptions,setOperatorOption:n?Kl:this.props.setOperatorOption,config:e,readonly:o});return k.createElement(Hl,{key:"op-options-for-"+this.props.selectedOperator,className:"rule--operator-options"},i)}},{key:"renderBeforeWidget",value:function(){var e=this.props.config,t=e.settings.renderBeforeWidget;return t&&k.createElement(Hl,{key:"before-widget-for-"+this.props.selectedOperator,className:"rule--before-widget"},"function"==typeof t?t(this.props,e.ctx):t)}},{key:"renderAfterWidget",value:function(){var e=this.props.config,t=e.settings.renderAfterWidget;return t&&k.createElement(Hl,{key:"after-widget-for-"+this.props.selectedOperator,className:"rule--after-widget"},"function"==typeof t?t(this.props,e.ctx):t)}},{key:"renderError",value:function(){var e=this.props,t=e.config,r=e.valueError,n=t.settings,o=n.renderRuleError,i=n.showErrorMessage,a=r&&r.toArray().filter((function(e){return!!e})).shift()||null;return i&&a&&k.createElement("div",{className:"rule--error"},o?o({error:a},t.ctx):a)}},{key:"renderDrag",value:function(){return this.meta.showDragIcon&&k.createElement("span",{key:"rule-drag-icon",className:"qb-drag-handler rule--drag-handler",onMouseDown:this.props.handleDraggerMouseDown},k.createElement(Ql,null)," ")}},{key:"renderDel",value:function(){var e=this.props,t=e.config,r=e.isLocked,n=t.settings,o=n.deleteLabel,i=n.immutableGroupsMode,a=n.renderButton,l=n.canDeleteLocked,u=function(e){return a(e,t.ctx)};return!i&&(!r||r&&l)&&k.createElement(u,{type:"delRule",onClick:this.removeSelf,label:o,config:t})}},{key:"renderLock",value:function(){var e=this.props,t=e.config,r=e.isLocked,n=e.isTrueLocked,o=e.id,i=t.settings,a=i.lockLabel,l=i.lockedLabel,u=i.showLock,s=i.renderSwitch,c=function(e){return s(e,t.ctx)};return u&&!(r&&!n)&&k.createElement(c,{type:"lock",id:o,value:r,setValue:this.setLock,label:a,checkedLabel:l,hideLabel:!0,config:t})}},{key:"render",value:function(){var e=this.meta,t=e.showOperatorOptions,r=e.selectedFieldWidgetConfig,n=this.props,o=n.valueSrc,i=n.value,a=n.config,l="value"==o.first()&&!t&&1==i.size&&r.fullWidth,u=a.settings.renderButtonGroup,s=function(e){return u(e,a.ctx)},c=[this.renderField(),this.renderOperator(),this.renderBeforeWidget(),this.renderWidget(),this.renderAfterWidget(),this.renderOperatorOptions()],p=k.createElement("div",{key:"rule-body",className:Vl()("rule--body",l&&"can--shrink--value")},c),f=this.renderError(),d=this.renderDrag(),g=this.renderLock(),v=this.renderDel();return k.createElement(k.Fragment,null,d,k.createElement("div",{className:"rule--body--wrapper"},p,f),k.createElement("div",{className:"rule--header"},k.createElement(s,{config:a},g,v)))}}]),o}(k.Component);xu.propTypes={id:qa().string.isRequired,groupId:qa().string,selectedField:qa().string,selectedOperator:qa().string,operatorOptions:qa().object,config:qa().object.isRequired,value:qa().any,valueSrc:qa().any,asyncListValues:qa().array,isDraggingMe:qa().bool,isDraggingTempo:qa().bool,parentField:qa().string,valueError:qa().any,isLocked:qa().bool,isTrueLocked:qa().bool,handleDraggerMouseDown:qa().func,setField:qa().func,setOperator:qa().func,setOperatorOption:qa().func,setLock:qa().func,removeSelf:qa().func,setValue:qa().func,setValueSrc:qa().func,reordableNodesCnt:qa().number,totalRulesCnt:qa().number,parentReordableNodesCnt:qa().number};const Tu=function(e){var t=(0,Ba.$j)((function(e){return{dragging:e.dragging}}),null,null,{context:Ma})(function(e){var t;return t=function(t){(0,C.Z)(i,t);var r,n,o=(r=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,L.Z)(r);if(n){var o=(0,L.Z)(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return(0,E.Z)(this,e)});function i(e){var t;return(0,j.Z)(this,i),(t=o.call(this,e)).dummyFn=function(){},t.removeSelf=function(){t.props.actions.removeRule(t.props.path)},t.setLock=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t.props.actions.setLock(t.props.path,e)},t.setField=function(e){t.props.actions.setField(t.props.path,e)},t.setOperator=function(e){t.props.actions.setOperator(t.props.path,e)},t.setOperatorOption=function(e,r){t.props.actions.setOperatorOption(t.props.path,e,r)},t.setValue=function(e,r,n,o,i){t.props.actions.setValue(t.props.path,e,r,n,o,i)},t.setValueSrc=function(e,r){t.props.actions.setValueSrc(t.props.path,e,r)},t.pureShouldComponentUpdate=yl((0,S.Z)(t)),t.dummyFn.isDummyFn=!0,t}return(0,F.Z)(i,[{key:"shouldComponentUpdate",value:function(e,t){var r=this.props,n=this.state,o=this.pureShouldComponentUpdate(e,t);if(o&&n==t&&r!=e){var i=(e.dragging.id||r.dragging.id)==e.id,a=[];for(var l in e){var u=e[l]!=r[l];"dragging"!=l||i||(u=!1),u&&a.push(l)}a.length||(o=!1)}return o}},{key:"render",value:function(){var t=this.props.dragging.id==this.props.id,r=Zl(this.props.config,this.props.field),n=this.props.config.settings.showErrorMessage,o=(r&&r.type,!t&&this.props.isDraggingTempo),i=this.props.valueError,a=null!=(i&&i.toArray().filter((function(e){return!!e})).shift()||null)&&n;return k.createElement("div",{className:Vl()("group-or-rule-container","rule-container",a?"rule-with-error":null),"data-id":this.props.id},[t?k.createElement(e,{key:"dragging",id:this.props.id,groupId:this.props.groupId,isDraggingMe:!0,isDraggingTempo:!0,dragging:this.props.dragging,setField:this.dummyFn,setOperator:this.dummyFn,setOperatorOption:this.dummyFn,setLock:this.dummyFn,removeSelf:this.dummyFn,setValue:this.dummyFn,setValueSrc:this.dummyFn,selectedField:this.props.field||null,parentField:this.props.parentField||null,selectedOperator:this.props.operator||null,value:this.props.value||null,valueSrc:this.props.valueSrc||null,valueError:this.props.valueError||null,operatorOptions:this.props.operatorOptions,config:this.props.config,reordableNodesCnt:this.props.reordableNodesCnt,totalRulesCnt:this.props.totalRulesCnt,asyncListValues:this.props.asyncListValues,isLocked:this.props.isLocked,isTrueLocked:this.props.isTrueLocked,parentReordableNodesCnt:this.props.parentReordableNodesCnt}):null,k.createElement(e,{key:this.props.id,id:this.props.id,groupId:this.props.groupId,isDraggingMe:t,isDraggingTempo:o,onDragStart:this.props.onDragStart,setLock:o?this.dummyFn:this.setLock,removeSelf:o?this.dummyFn:this.removeSelf,setField:o?this.dummyFn:this.setField,setOperator:o?this.dummyFn:this.setOperator,setOperatorOption:o?this.dummyFn:this.setOperatorOption,setValue:o?this.dummyFn:this.setValue,setValueSrc:o?this.dummyFn:this.setValueSrc,selectedField:this.props.field||null,parentField:this.props.parentField||null,selectedOperator:this.props.operator||null,value:this.props.value||null,valueSrc:this.props.valueSrc||null,valueError:this.props.valueError||null,operatorOptions:this.props.operatorOptions,config:this.props.config,reordableNodesCnt:this.props.reordableNodesCnt,totalRulesCnt:this.props.totalRulesCnt,asyncListValues:this.props.asyncListValues,isLocked:this.props.isLocked,isTrueLocked:this.props.isTrueLocked,parentReordableNodesCnt:this.props.parentReordableNodesCnt})])}}]),i}(k.Component),t.propTypes={id:qa().string.isRequired,groupId:qa().string,config:qa().object.isRequired,path:qa().any.isRequired,operator:qa().string,field:qa().string,actions:qa().object.isRequired,onDragStart:qa().func,value:qa().any,valueSrc:qa().any,asyncListValues:qa().array,valueError:qa().any,operatorOptions:qa().object,reordableNodesCnt:qa().number,parentField:qa().string,isLocked:qa().bool,isTrueLocked:qa().bool,dragging:qa().object,isDraggingTempo:qa().bool},t}(e));return t.displayName="ConnectedRuleContainer",t}(Il("rule")(Xl(xu)));var Au=r(63869),Nu=r.n(Au);var Iu=Na.DefaultUtils.defaultGroupConjunction;const qu=function(e){var t=(0,Ba.$j)((function(e){return{dragging:e.dragging}}),null,null,{context:Ma})(function(e){var t;return t=function(t){(0,C.Z)(i,t);var r,n,o=(r=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,L.Z)(r);if(n){var o=(0,L.Z)(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return(0,E.Z)(this,e)});function i(e){var t;return(0,j.Z)(this,i),(t=o.call(this,e))._selectedConjunction=function(e){return(e=e||t.props).conjunction||Iu(e.config,e.field)},t.setConjunction=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t.props.actions.setConjunction(t.props.path,e)},t.setNot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t.props.actions.setNot(t.props.path,e)},t.setLock=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t.props.actions.setLock(t.props.path,e)},t.dummyFn=function(){},t.removeSelf=function(){t.props.actions.removeGroup(t.props.path)},t.addGroup=function(){t.props.actions.addGroup(t.props.path)},t.addCaseGroup=function(){t.props.actions.addCaseGroup(t.props.path)},t.addDefaultCaseGroup=function(){t.props.actions.addDefaultCaseGroup(t.props.path)},t.addRule=function(){t.props.actions.addRule(t.props.path)},t.setField=function(e){t.props.actions.setField(t.props.path,e)},t.setOperator=function(e){t.props.actions.setOperator(t.props.path,e)},t.setValue=function(e,r,n){t.props.actions.setValue(t.props.path,e,r,n)},t.pureShouldComponentUpdate=yl((0,S.Z)(t)),bl((0,S.Z)(t)),t.selectedConjunction=t._selectedConjunction(e),t.conjunctionOptions=t._getConjunctionOptions(e),t.dummyFn.isDummyFn=!0,t}return(0,F.Z)(i,[{key:"shouldComponentUpdate",value:function(e,t){var r=this.props,n=this.state,o=this.pureShouldComponentUpdate(e,t);if(o&&n==t&&r!=e){var i=(e.dragging.id||r.dragging.id)==e.id,a=[];for(var l in e){var u=e[l]!=r[l];"dragging"!=l||i||(u=!1),u&&a.push(l)}a.length||(o=!1)}return o}},{key:"onPropsChanged",value:function(e){var t=e.config,r=(e.id,e.conjunction),n=this.props.config,o=this.props.conjunction;n==t&&o==r||(this.selectedConjunction=this._selectedConjunction(e),this.conjunctionOptions=this._getConjunctionOptions(e))}},{key:"_getConjunctionOptions",value:function(e){var t=this;return Hi()(e.config.conjunctions,(function(r,n){return{id:"conjunction-".concat(e.id,"-").concat(n),name:"conjunction[".concat(e.id,"]"),key:n,label:r.label,checked:n===t._selectedConjunction(e)}}))}},{key:"render",value:function(){var t=this.props.dragging.id==this.props.id,r=this.props.path.size,n=this.props.config.settings.maxNesting,o=!t&&this.props.isDraggingTempo,i=void 0===n||r<n,a=1==r;return k.createElement("div",{className:"group-or-rule-container group-container","data-id":this.props.id},[t?k.createElement(e,{key:"dragging",id:this.props.id,groupId:this.props.groupId,isDraggingMe:!0,isDraggingTempo:!0,dragging:this.props.dragging,isRoot:a,allowFurtherNesting:i,conjunctionOptions:this.conjunctionOptions,not:this.props.not,selectedConjunction:this.selectedConjunction,setConjunction:this.dummyFn,setNot:this.dummyFn,setLock:this.dummyFn,removeSelf:this.dummyFn,addGroup:this.dummyFn,addCaseGroup:this.dummyFn,addDefaultCaseGroup:this.dummyFn,addRule:this.dummyFn,setField:this.dummyFn,setOperator:this.dummyFn,setValue:this.dummyFn,value:this.props.value||null,config:this.props.config,children1:this.props.children1,actions:this.props.actions,reordableNodesCnt:this.props.reordableNodesCnt,totalRulesCnt:this.props.totalRulesCnt,selectedField:this.props.field||null,parentField:this.props.parentField||null,selectedOperator:this.props.operator||null,isLocked:this.props.isLocked,isTrueLocked:this.props.isTrueLocked,parentReordableNodesCnt:this.props.parentReordableNodesCnt}):null,k.createElement(e,{key:this.props.id,id:this.props.id,groupId:this.props.groupId,isDraggingMe:t,isDraggingTempo:o,onDragStart:this.props.onDragStart,isRoot:a,allowFurtherNesting:i,conjunctionOptions:this.conjunctionOptions,not:this.props.not,selectedConjunction:this.selectedConjunction,setConjunction:o?this.dummyFn:this.setConjunction,setNot:o?this.dummyFn:this.setNot,setLock:o?this.dummyFn:this.setLock,removeSelf:o?this.dummyFn:this.removeSelf,addGroup:o?this.dummyFn:this.addGroup,addCaseGroup:o?this.dummyFn:this.addCaseGroup,addDefaultCaseGroup:o?this.dummyFn:this.addDefaultCaseGroup,addRule:o?this.dummyFn:this.addRule,setField:o?this.dummyFn:this.setField,setOperator:o?this.dummyFn:this.setOperator,setValue:o?this.dummyFn:this.setValue,value:this.props.value||null,config:this.props.config,children1:this.props.children1,actions:this.props.actions,reordableNodesCnt:this.props.reordableNodesCnt,totalRulesCnt:this.props.totalRulesCnt,selectedField:this.props.field||null,parentField:this.props.parentField||null,selectedOperator:this.props.operator||null,isLocked:this.props.isLocked,isTrueLocked:this.props.isTrueLocked,parentReordableNodesCnt:this.props.parentReordableNodesCnt})])}}]),i}(k.Component),t.propTypes={config:qa().object.isRequired,actions:qa().object.isRequired,path:qa().any.isRequired,id:qa().string.isRequired,groupId:qa().string,not:qa().bool,conjunction:qa().string,children1:qa().any,onDragStart:qa().func,reordableNodesCnt:qa().number,field:qa().string,parentField:qa().string,isLocked:qa().bool,isTrueLocked:qa().bool,dragging:qa().object,isDraggingTempo:qa().bool},t}(e));return t.displayName="ConnectedGroupContainer",t};var Mu={topLeft:"group--actions--tl",topCenter:"group--actions--tc",topRight:"group--actions--tr",bottomLeft:"group--actions--bl",bottomCenter:"group--actions--bc",bottomRight:"group--actions--br"},Wu=function(e){(0,C.Z)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,L.Z)(t);if(r){var o=(0,L.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,E.Z)(this,e)});function o(){return(0,j.Z)(this,o),n.apply(this,arguments)}return(0,F.Z)(o,[{key:"render",value:function(){var e=this.props,t=e.config,r=e.addRule,n=e.addGroup,o=e.removeSelf,i=e.setLock,a=e.isLocked,l=e.isTrueLocked,u=e.id,s=e.canAddGroup,c=e.canAddRule,p=e.canDeleteGroup,f=t.settings,d=f.immutableGroupsMode,g=f.addRuleLabel,v=f.addGroupLabel,h=f.delGroupLabel,m=f.groupActionsPosition,y=f.renderButton,b=f.renderSwitch,O=f.renderButtonGroup,w=f.lockLabel,j=f.lockedLabel,F=f.showLock,S=f.canDeleteLocked,C=function(e){return y(e,t.ctx)},E=function(e){return b(e,t.ctx)},L=function(e){return O(e,t.ctx)},P=Mu[m||"topRight"],_=F&&!(a&&!l)&&k.createElement(E,{type:"lock",id:u,value:a,setValue:i,label:w,checkedLabel:j,config:t}),V=!d&&c&&!a&&k.createElement(C,{type:"addRule",onClick:r,label:g,readonly:a,config:t}),Z=!d&&s&&!a&&k.createElement(C,{type:"addGroup",onClick:n,label:v,readonly:a,config:t}),R=!d&&p&&(!a||a&&S)&&k.createElement(C,{type:"delGroup",onClick:o,label:h,config:t});return k.createElement("div",{className:"group--actions ".concat(P)},k.createElement(L,{config:t},_,V,Z,R))}}]),o}(k.PureComponent);function Bu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Gu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Bu(Object(r),!0).forEach((function(t){(0,P.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var zu=function(e){(0,C.Z)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,L.Z)(t);if(r){var o=(0,L.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,E.Z)(this,e)});function o(e){var t;return(0,j.Z)(this,o),(t=n.call(this,e)).childrenClassName=function(){return""},t.renderBeforeActions=function(){var e=t.props.config.settings.renderBeforeActions;return null==e?null:"function"==typeof e?e(t.props,t.props.config.ctx):e},t.renderAfterActions=function(){var e=t.props.config.settings.renderAfterActions;return null==e?null:"function"==typeof e?e(t.props,t.props.config.ctx):e},t.removeSelf=t.removeSelf.bind((0,S.Z)(t)),t.setLock=t.setLock.bind((0,S.Z)(t)),t.renderItem=t.renderItem.bind((0,S.Z)(t)),t}return(0,F.Z)(o,[{key:"isGroupTopPosition",value:function(){return Nu()(this.props.config.settings.groupActionsPosition||"topRight","top")}},{key:"setLock",value:function(e){this.props.setLock(e)}},{key:"removeSelf",value:function(){var e=this,t=this.props,r=t.confirmFn,n=t.config,o=n.settings,i=o.renderConfirm,a=o.removeGroupConfirmOptions,l=function(){e.props.removeSelf()};a&&!this.isEmptyCurrentGroup()?i.call(n.ctx,Gu(Gu({},a),{},{onOk:l,onCancel:null,confirmFn:r}),n.ctx):l()}},{key:"isEmptyCurrentGroup",value:function(){var e=this.props.children1;return!e||0==e.size||1==e.size&&this.isEmpty(e.first())}},{key:"isEmpty",value:function(e){return"group"==e.get("type")||"rule_group"==e.get("type")?this.isEmptyGroup(e):this.isEmptyRule(e)}},{key:"isEmptyGroup",value:function(e){var t=e.get("children1");return!t||0==t.size||1==t.size&&this.isEmpty(t.first())}},{key:"isEmptyRule",value:function(e){var t=e.get("properties");return!(null!==t.get("field")&&null!==t.get("operator")&&t.get("value").filter((function(e){return void 0!==e})).size>0)}},{key:"render",value:function(){return k.createElement(k.Fragment,null,this.renderHeaderWrapper(),this.renderChildrenWrapper(),this.renderFooterWrapper())}},{key:"showNot",value:function(){return this.props.config.settings.showNot}},{key:"showConjs",value:function(){var e=this.props,t=e.conjunctionOptions;return e.children1,e.config,Object.keys(t).length>1||this.showNot()}},{key:"isNoChildren",value:function(){var e=this.props.children1;return!e||0==e.size}},{key:"isOneChild",value:function(){var e=this.props.children1;return!e||e.size<2}},{key:"renderChildrenWrapper",value:function(){return this.props.children1&&k.createElement("div",{key:"group-children",className:Vl()("group--children",this.showConjs()?"":"hide--conjs",this.isOneChild()?"hide--line":"",this.isOneChild()?"one--child":"",this.childrenClassName())},this.renderChildren())}},{key:"renderHeaderWrapper",value:function(){var e=this.isGroupTopPosition();return k.createElement("div",{key:"group-header",className:Vl()("group--header",this.isOneChild()?"one--child":"",this.showConjs()?"":"hide--conjs",this.isOneChild()?"hide--line":"",this.isNoChildren()?"no--children":"")},this.renderHeader(),e&&this.renderBeforeActions(),e&&this.renderActions(),e&&this.renderAfterActions())}},{key:"renderFooterWrapper",value:function(){return!this.isGroupTopPosition()&&k.createElement("div",{key:"group-footer",className:"group--footer"},this.renderBeforeActions(),this.renderActions(),this.renderAfterActions())}},{key:"renderActions",value:function(){var e=this.props,t=e.config,r=e.addRule,n=e.addGroup,o=e.isLocked,i=e.isTrueLocked,a=e.id;return k.createElement(Wu,{config:t,addRule:r,addGroup:n,canAddGroup:this.canAddGroup(),canAddRule:this.canAddRule(),canDeleteGroup:this.canDeleteGroup(),removeSelf:this.removeSelf,setLock:this.setLock,isLocked:o,isTrueLocked:i,id:a})}},{key:"canAddGroup",value:function(){return this.props.allowFurtherNesting}},{key:"canAddRule",value:function(){var e=this.props.config.settings.maxNumberOfRules,t=this.props.totalRulesCnt;return!e||t<e}},{key:"canDeleteGroup",value:function(){return!this.props.isRoot}},{key:"renderChildren",value:function(){var e=this.props.children1;return e?e.map(this.renderItem).toList():null}},{key:"renderItem",value:function(e){var t=this.props,r=t.config,n=t.actions,o=t.onDragStart,i=t.isLocked,a="group"==e.get("type")&&null!=e.getIn(["properties","field"])?"rule_group":e.get("type");return k.createElement(Cs,(0,Pl.Z)({},this.extraPropsForItem(e),{key:e.get("id"),id:e.get("id"),groupId:t.id,path:e.get("path"),type:a,properties:e.get("properties"),config:r,actions:n,children1:e.get("children1"),reordableNodesCnt:this.reordableNodesCntForItem(e),totalRulesCnt:this.totalRulesCntForItem(e),parentReordableNodesCnt:this.reordableNodesCnt(),onDragStart:o,isDraggingTempo:this.props.isDraggingTempo,isParentLocked:i}))}},{key:"extraPropsForItem",value:function(e){return{}}},{key:"reordableNodesCnt",value:function(){return this.props.isLocked?0:this.props.reordableNodesCnt}},{key:"totalRulesCntForItem",value:function(e){return this.props.totalRulesCnt}},{key:"reordableNodesCntForItem",value:function(e){return this.props.isLocked?0:this.reordableNodesCnt()}},{key:"showDragIcon",value:function(){var e=this.props,t=e.config,r=e.isRoot,n=e.isLocked,o=this.reordableNodesCnt();return t.settings.canReorder&&!r&&o>1&&!n}},{key:"renderDrag",value:function(){var e=this.props.handleDraggerMouseDown;return this.showDragIcon()&&k.createElement("span",{key:"group-drag-icon",className:"qb-drag-handler group--drag-handler",onMouseDown:e},k.createElement(Ql,null)," ")}},{key:"conjunctionOptions",value:function(){return this.props.conjunctionOptions}},{key:"renderConjs",value:function(){var e=this.props,t=e.config,r=e.children1,n=e.id,o=e.selectedConjunction,i=e.setConjunction,a=e.not,l=e.setNot,u=e.isLocked,s=t.settings,c=s.immutableGroupsMode,p=s.renderConjs,f=(s.showNot,s.notLabel),d=this.conjunctionOptions();return this.showConjs()&&r&&r.size?p({disabled:this.isOneChild(),readonly:c||u,selectedConjunction:o,setConjunction:c?Kl:i,conjunctionOptions:d,config:t,not:a||!1,id:n,setNot:c?Kl:l,notLabel:f,showNot:this.showNot(),isLocked:u},t.ctx):null}},{key:"renderHeader",value:function(){return k.createElement("div",{className:"group--conjunctions"},this.renderConjs(),this.renderDrag())}}]),o}(k.Component);zu.propTypes={reordableNodesCnt:qa().number,conjunctionOptions:qa().object.isRequired,allowFurtherNesting:qa().bool.isRequired,isRoot:qa().bool.isRequired,not:qa().bool,selectedConjunction:qa().string,config:qa().object.isRequired,id:qa().string.isRequired,groupId:qa().string,path:qa().any,children1:qa().any,isDraggingMe:qa().bool,isDraggingTempo:qa().bool,isLocked:qa().bool,isTrueLocked:qa().bool,handleDraggerMouseDown:qa().func,onDragStart:qa().func,addRule:qa().func.isRequired,addGroup:qa().func.isRequired,removeSelf:qa().func.isRequired,setConjunction:qa().func.isRequired,setNot:qa().func.isRequired,setLock:qa().func.isRequired,actions:qa().object.isRequired};const Uu=qu(Il("group")(Xl(zu)));var $u=r(99795);var Ju=function(e){(0,C.Z)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,L.Z)(t);if(r){var o=(0,L.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,E.Z)(this,e)});function o(){return(0,j.Z)(this,o),n.apply(this,arguments)}return(0,F.Z)(o,[{key:"render",value:function(){var e=this.props,t=e.config,r=e.addRule,n=e.canAddRule,o=e.canDeleteGroup,i=e.removeSelf,a=e.setLock,l=e.isLocked,u=e.isTrueLocked,s=e.id,c=t.settings,p=c.immutableGroupsMode,f=c.addRuleLabel,d=c.delGroupLabel,g=c.renderButton,v=c.renderSwitch,h=c.renderButtonGroup,m=c.lockLabel,y=c.lockedLabel,b=c.showLock,O=c.canDeleteLocked,w=function(e){return g(e,t.ctx)},j=function(e){return v(e,t.ctx)},F=function(e){return h(e,t.ctx)},S=b&&!(l&&!u)&&k.createElement(j,{type:"lock",id:s,value:l,setValue:a,label:m,checkedLabel:y,hideLabel:!0,config:t}),C=!p&&n&&!l&&k.createElement(w,{type:"addRuleGroup",onClick:r,label:f,readonly:l,config:t}),E=!p&&o&&(!l||l&&O)&&k.createElement(w,{type:"delRuleGroup",onClick:i,label:d,config:t});return k.createElement("div",{className:"group--actions"},k.createElement(F,{config:t},S,C,E))}}]),o}(k.PureComponent);function Yu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Hu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Yu(Object(r),!0).forEach((function(t){(0,P.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ku=function(e){(0,C.Z)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,L.Z)(t);if(r){var o=(0,L.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,E.Z)(this,e)});function o(e){var t;return(0,j.Z)(this,o),(t=n.call(this,e)).childrenClassName=function(){return"rule_group--children"},t.renderHeaderWrapper=function(){return null},t.renderFooterWrapper=function(){return null},t.renderConjs=function(){return null},t.canAddGroup=function(){return!1},t.canAddRule=function(){return!0},t.canDeleteGroup=function(){return!1},bl((0,S.Z)(t)),t.onPropsChanged(e),t}return(0,F.Z)(o,[{key:"onPropsChanged",value:function(e){}},{key:"reordableNodesCntForItem",value:function(e){if(this.props.isLocked)return 0;var t=this.props.children1;return(null==t?void 0:t.size)||0}},{key:"renderChildrenWrapper",value:function(){return k.createElement(k.Fragment,null,this.renderDrag(),this.renderField(),this.renderActions(),(0,$u.Z)((0,L.Z)(o.prototype),"renderChildrenWrapper",this).call(this))}},{key:"renderField",value:function(){var e=this.props,t=e.config,r=e.selectedField,n=e.setField,o=e.parentField,i=e.id,a=e.groupId,l=e.isLocked,u=t.settings.immutableFieldsMode;return k.createElement(lu,{key:"field",classname:"group--field",config:t,selectedField:r,setField:n,parentField:o,readonly:u||l,id:i,groupId:a})}},{key:"renderActions",value:function(){var e=this.props,t=e.config,r=e.addRule,n=e.isLocked,o=e.isTrueLocked,i=e.id;return k.createElement(Ju,{config:t,addRule:r,canAddRule:this.canAddRule(),canDeleteGroup:this.canDeleteGroup(),removeSelf:this.removeSelf,setLock:this.setLock,isLocked:n,isTrueLocked:o,id:i})}},{key:"extraPropsForItem",value:function(e){return{parentField:this.props.selectedField}}}]),o}(zu);Ku.propTypes=Hu(Hu({},zu.propTypes),{},{selectedField:qa().string,parentField:qa().string,setField:qa().func});const Qu=qu(Il("group rule_group")(Xl(Ku)));var Xu=function(e){(0,C.Z)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,L.Z)(t);if(r){var o=(0,L.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,E.Z)(this,e)});function o(){return(0,j.Z)(this,o),n.apply(this,arguments)}return(0,F.Z)(o,[{key:"render",value:function(){var e=this.props,t=e.config,r=e.addRule,n=e.canAddRule,o=e.canDeleteGroup,i=e.removeSelf,a=e.setLock,l=e.isLocked,u=e.isTrueLocked,s=e.id,c=t.settings,p=c.immutableGroupsMode,f=c.addSubRuleLabel,d=c.delGroupLabel,g=c.renderButton,v=c.renderSwitch,h=c.renderButtonGroup,m=c.lockLabel,y=c.lockedLabel,b=c.showLock,O=c.canDeleteLocked,w=function(e){return g(e,t.ctx)},j=function(e){return v(e,t.ctx)},F=function(e){return h(e,t.ctx)},S=b&&!(l&&!u)&&k.createElement(j,{type:"lock",id:s,value:l,setValue:a,label:m,checkedLabel:y,config:t}),C=!p&&n&&!l&&k.createElement(w,{type:"addRuleGroupExt",onClick:r,label:f,readonly:l,config:t}),E=!p&&o&&(!l||l&&O)&&k.createElement(w,{type:"delRuleGroup",onClick:i,label:d,config:t});return k.createElement("div",{className:"group--actions group--actions--tr"},k.createElement(F,{config:t},S,C,E))}}]),o}(k.PureComponent);function es(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ts(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?es(Object(r),!0).forEach((function(t){(0,P.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):es(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function rs(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ns=Na.ConfigUtils,os=ns.getFieldConfig,is=ns.getFieldWidgetConfig,as=function(e){(0,C.Z)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,L.Z)(t);if(r){var o=(0,L.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,E.Z)(this,e)});function o(e){var t;return(0,j.Z)(this,o),(t=n.call(this,e)).childrenClassName=function(){return"rule_group_ext--children"},t.renderFooterWrapper=function(){return null},t.canAddGroup=function(){return!1},t.canAddRule=function(){return!0},t.canDeleteGroup=function(){return!0},bl((0,S.Z)(t)),t.onPropsChanged(e),t}return(0,F.Z)(o,[{key:"onPropsChanged",value:function(e){}},{key:"renderHeaderWrapper",value:function(){return k.createElement("div",{key:"group-header",className:Vl()("group--header",this.isOneChild()?"one--child":"",this.isOneChild()?"hide--line":"",this.isNoChildren()?"no--children":"",this.showDragIcon()?"with--drag":"hide--drag",!this.showConjs()||this.isOneChild()&&!this.showNot()?"hide--conjs":"with--conjs")},this.renderHeader(),this.renderGroupField(),this.renderActions())}},{key:"renderHeader",value:function(){return k.createElement("div",{className:"group--conjunctions"},this.renderConjs(),this.renderDrag())}},{key:"renderGroupField",value:function(){return k.createElement("div",{className:"group--field--count--rule"},this.renderField(),this.renderOperator(),this.renderWidget())}},{key:"showNot",value:function(){var e=this.props,t=e.config,r=e.selectedField,n=(e.selectedOperator,os(t,r)||{});return null!=n.showNot?n.showNot:t.settings.showNot}},{key:"conjunctionOptions",value:function(){var e=this.props,t=e.config,r=e.selectedField,n=(e.selectedOperator,os(t,r)||{}),i=(0,$u.Z)((0,L.Z)(o.prototype),"conjunctionOptions",this).call(this);if(n.conjunctions){var a,l={},u=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return rs(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?rs(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}(n.conjunctions);try{for(u.s();!(a=u.n()).done;){var s=a.value;l[s]=i[s]}}catch(e){u.e(e)}finally{u.f()}i=l}return i}},{key:"renderField",value:function(){var e=this.props,t=e.config,r=e.selectedField,n=e.setField,o=e.parentField,i=e.id,a=e.groupId,l=e.isLocked,u=t.settings.immutableFieldsMode;return k.createElement(lu,{key:"field",classname:"rule--field",config:t,selectedField:r,setField:n,parentField:o,readonly:u||l,id:i,groupId:a})}},{key:"renderOperator",value:function(){var e=this.props,t=e.config,r=e.selectedField,n=e.selectedOperator,o=e.setField,i=e.setOperator,a=e.isLocked,l=t.settings.immutableFieldsMode,u=is(t,r,n)||{},s=u.hideOperator,c=r&&s&&u.operatorInlineLabel,p=r&&!s;return k.createElement(eu,{key:"operator",classname:"group--operator",config:t,selectedField:r,selectedOperator:n,setField:o,setOperator:i,selectedFieldPartsLabels:["group"],showOperator:p,showOperatorLabel:c,selectedFieldWidgetConfig:u,readonly:l||a,id:this.props.id,groupId:this.props.groupId})}},{key:"renderWidget",value:function(){var e=this.props,t=e.config,r=e.selectedField,n=e.selectedOperator,o=e.isLocked,i=t.settings.immutableValuesMode;if(!r||!n)return null;var a=k.createElement(Su,{key:"values",isForRuleGruop:!0,field:this.props.selectedField,operator:this.props.selectedOperator,value:this.props.value,valueSrc:"value",valueError:null,config:t,setValue:i?Kl:this.props.setValue,setValueSrc:Kl,readonly:i||o,id:this.props.id,groupId:this.props.groupId});return k.createElement(Hl,{key:"widget-for-"+this.props.selectedOperator,className:"rule--value"},a)}},{key:"renderActions",value:function(){var e=this.props,t=e.config,r=e.addRule,n=e.isLocked,o=e.isTrueLocked,i=e.id;return k.createElement(Xu,{config:t,addRule:r,canAddRule:this.canAddRule(),canDeleteGroup:this.canDeleteGroup(),removeSelf:this.removeSelf,setLock:this.setLock,isLocked:n,isTrueLocked:o,id:i})}},{key:"reordableNodesCntForItem",value:function(e){if(this.props.isLocked)return 0;var t=this.props.children1;return(null==t?void 0:t.size)||0}},{key:"extraPropsForItem",value:function(e){return{parentField:this.props.selectedField}}}]),o}(zu);as.propTypes=ts(ts({},zu.propTypes),{},{selectedField:qa().string,selectedOperator:qa().string,value:qa().any,parentField:qa().string,setField:qa().func,setOperator:qa().func,setValue:qa().func});const ls=qu(Il("group rule_group_ext")(Xl(as)));var us={topLeft:"group--actions--tl",topCenter:"group--actions--tc",topRight:"group--actions--tr",bottomLeft:"group--actions--bl",bottomCenter:"group--actions--bc",bottomRight:"group--actions--br"},ss=function(e){(0,C.Z)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,L.Z)(t);if(r){var o=(0,L.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,E.Z)(this,e)});function o(){return(0,j.Z)(this,o),n.apply(this,arguments)}return(0,F.Z)(o,[{key:"render",value:function(){var e=this.props,t=e.config,r=e.addCaseGroup,n=e.addDefaultCaseGroup,o=e.setLock,i=e.isLocked,a=e.isTrueLocked,l=e.id,u=e.canAddGroup,s=e.canAddDefault,c=t.settings,p=c.immutableGroupsMode,f=c.addCaseLabel,d=c.addDefaultCaseLabel,g=c.groupActionsPosition,v=c.renderButton,h=c.renderSwitch,m=c.renderButtonGroup,y=c.lockLabel,b=c.lockedLabel,O=c.showLock,w=function(e){return v(e,t.ctx)},j=function(e){return h(e,t.ctx)},F=function(e){return m(e,t.ctx)},S=us[g||"topRight"],C=O&&!(i&&!a)&&k.createElement(j,{type:"lock",id:l,value:i,setValue:o,label:y,checkedLabel:b,config:t}),E=!p&&u&&!i&&k.createElement(w,{type:"addCaseGroup",onClick:r,label:f,readonly:i,config:t}),L=!p&&s&&!i&&k.createElement(w,{type:"addDefaultCaseGroup",onClick:n,label:d,readonly:i,config:t});return k.createElement("div",{className:"group--actions ".concat(S)},k.createElement(F,{config:t},C,E,L))}}]),o}(k.PureComponent);function cs(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var ps=Na.TreeUtils,fs=ps.getTotalReordableNodesCountInTree,ds=ps.getTotalRulesCountInTree,gs=function(e){(0,C.Z)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,L.Z)(t);if(r){var o=(0,L.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,E.Z)(this,e)});function o(e){var t;return(0,j.Z)(this,o),(t=n.call(this,e)).childrenClassName=function(){return"switch_group--children"},t.renderFooterWrapper=function(){return null},t.hasDefaultCase=function(){var e;return(null===(e=t.props.children1)||void 0===e?void 0:e.size)&&t.props.children1.filter((function(e){return null==e.get("children1")})).size>0},bl((0,S.Z)(t)),t.onPropsChanged(e),t}return(0,F.Z)(o,[{key:"onPropsChanged",value:function(e){}},{key:"canAddGroup",value:function(){var e,t=this.props.config.settings.maxNumberOfCases,r=(null===(e=this.props.children1)||void 0===e?void 0:e.size)||0;return!t||r<t}},{key:"canAddRule",value:function(){return!1}},{key:"reordableNodesCnt",value:function(){var e,t=(null===(e=this.props.children1)||void 0===e?void 0:e.size)||0;return this.hasDefaultCase()&&t--,t}},{key:"totalRulesCntForItem",value:function(e){return ds(e)}},{key:"reordableNodesCntForItem",value:function(e){var t;if(this.props.isLocked)return 0;var r=this.props.config.settings,n=r.canLeaveEmptyCase,o=r.canRegroupCases,i=(null===(t=this.props.children1)||void 0===t?void 0:t.size)||0;this.hasDefaultCase()&&i--;var a=fs(e);return 1==a&&o&&n&&i>1&&(a=111),a}},{key:"renderHeaderWrapper",value:function(){return k.createElement("div",{key:"group-header",className:Vl()("group--header",this.isOneChild()?"one--child":"",this.isOneChild()?"hide--line":"",this.isNoChildren()?"no--children":"",this.showDragIcon()?"with--drag":"hide--drag")},this.renderHeader(),this.renderActions())}},{key:"renderHeader",value:function(){return k.createElement("div",{className:"group--conjunctions"},this.renderConjs(),this.renderDrag())}},{key:"renderConjs",value:function(){return this.props.config.settings.renderSwitchPrefix||null}},{key:"showNot",value:function(){return!1}},{key:"renderActions",value:function(){var e=this.props,t=e.config,r=e.addCaseGroup,n=e.addDefaultCaseGroup,o=e.isLocked,i=e.isTrueLocked,a=e.id;return k.createElement(ss,{config:t,addCaseGroup:r,addDefaultCaseGroup:n,canAddDefault:!this.hasDefaultCase(),canAddGroup:this.canAddGroup(),setLock:this.setLock,isLocked:o,isTrueLocked:i,id:a})}}]),o}(zu);gs.propTypes=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?cs(Object(r),!0).forEach((function(t){(0,P.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cs(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},zu.propTypes);const vs=qu(Il("group switch_group")(Xl(gs)));function hs(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ms(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hs(Object(r),!0).forEach((function(t){(0,P.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hs(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ys=function(e){(0,C.Z)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,L.Z)(t);if(r){var o=(0,L.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,E.Z)(this,e)});function o(e){var t;return(0,j.Z)(this,o),(t=n.call(this,e)).childrenClassName=function(){return"case_group--children"},t.renderFooterWrapper=function(){return null},bl((0,S.Z)(t)),t.onPropsChanged(e),t}return(0,F.Z)(o,[{key:"onPropsChanged",value:function(e){}},{key:"isDefaultCase",value:function(){return null==this.props.children1}},{key:"reordableNodesCnt",value:function(){return this.props.parentReordableNodesCnt}},{key:"reordableNodesCntForItem",value:function(e){return this.props.isLocked?0:this.props.reordableNodesCnt}},{key:"totalRulesCntForItem",value:function(e){return this.props.totalRulesCnt}},{key:"showDragIcon",value:function(){return!this.isDefaultCase()&&(0,$u.Z)((0,L.Z)(o.prototype),"showDragIcon",this).call(this)}},{key:"renderHeaderWrapper",value:function(){return k.createElement("div",{key:"group-header",className:Vl()("group--header",this.isOneChild()?"one--child":"",this.isOneChild()?"hide--line":"",this.isNoChildren()?"no--children":"",this.showDragIcon()?"with--drag":"hide--drag",!this.showConjs()||this.isOneChild()&&!this.showNot()?"hide--conjs":"with--conjs")},this.renderHeaderLeft(),this.renderHeaderCenter(),this.renderActions())}},{key:"renderChildrenWrapper",value:function(){return this.isDefaultCase()?null:k.createElement("div",{className:"case_group--body"},this.renderCondition(),this.renderValue())}},{key:"renderHeaderLeft",value:function(){return this.isDefaultCase()?this.props.config.settings.defaultCaseLabel||"":k.createElement("div",{className:"group--conjunctions"},this.renderConjs(),this.renderDrag())}},{key:"renderCondition",value:function(){return this.isDefaultCase()?null:(0,$u.Z)((0,L.Z)(o.prototype),"renderChildrenWrapper",this).call(this)}},{key:"renderHeaderCenter",value:function(){return this.isDefaultCase()?this.renderValue():null}},{key:"canAddGroup",value:function(){return!this.isDefaultCase()&&(0,$u.Z)((0,L.Z)(o.prototype),"canAddGroup",this).call(this)}},{key:"canAddRule",value:function(){return!this.isDefaultCase()&&(0,$u.Z)((0,L.Z)(o.prototype),"canAddRule",this).call(this)}},{key:"renderValue",value:function(){var e=this.props,t=e.config,r=e.isLocked,n=e.value,o=e.setValue,i=e.id,a=t.settings.immutableValuesMode,l=k.createElement(Su,{key:"values",isCaseValue:!0,field:"!case_value",operator:null,value:n,valueSrc:"value",valueError:null,config:t,setValue:a?Kl:o,setValueSrc:Kl,readonly:a||r,id:i,groupId:null});return k.createElement(Hl,{className:"case_group--value"},l)}},{key:"renderActions",value:function(){var e=this.props,t=e.config,r=e.addGroup,n=e.addRule,o=e.isLocked,i=e.isTrueLocked,a=e.id;return k.createElement(Wu,{config:t,addGroup:r,addRule:n,canAddRule:this.canAddRule(),canAddGroup:this.canAddGroup(),canDeleteGroup:this.canDeleteGroup(),removeSelf:this.removeSelf,setLock:this.setLock,isLocked:o,isTrueLocked:i,id:a})}},{key:"isEmptyCurrentGroup",value:function(){var e=this.props.value,t=e&&e.size?e.get(0):null,r=null!=t&&(!Array.isArray(t)||t.length>0);return(0,$u.Z)((0,L.Z)(o.prototype),"isEmptyCurrentGroup",this).call(this)&&!r}}]),o}(zu);ys.propTypes=ms(ms({},zu.propTypes),{},{parentReordableNodesCnt:qa().number,value:qa().any,setValue:qa().func});const bs=qu(Il("group case_group")(Xl(ys)));var Os=["type"];function ws(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function js(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ws(Object(r),!0).forEach((function(t){(0,P.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ws(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Fs=function(e){var t,r=(null===(t=e.properties)||void 0===t?void 0:t.toObject())||{},n=js({},r);return e.isParentLocked&&(n.isLocked=!0),r.isLocked&&(n.isTrueLocked=!0),n},Ss={rule:function(e){return k.createElement(Tu,(0,Pl.Z)({},Fs(e),{id:e.id,groupId:e.groupId,path:e.path,actions:e.actions,reordableNodesCnt:e.reordableNodesCnt,totalRulesCnt:e.totalRulesCnt,config:e.config,onDragStart:e.onDragStart,isDraggingTempo:e.isDraggingTempo,parentField:e.parentField,parentReordableNodesCnt:e.parentReordableNodesCnt}))},group:function(e){return k.createElement(Uu,(0,Pl.Z)({},Fs(e),{id:e.id,groupId:e.groupId,path:e.path,actions:e.actions,config:e.config,reordableNodesCnt:e.reordableNodesCnt,totalRulesCnt:e.totalRulesCnt,onDragStart:e.onDragStart,isDraggingTempo:e.isDraggingTempo,children1:e.children1,parentField:null,parentReordableNodesCnt:e.parentReordableNodesCnt}))},rule_group:function(e){return k.createElement(Qu,(0,Pl.Z)({},Fs(e),{id:e.id,groupId:e.groupId,path:e.path,actions:e.actions,config:e.config,reordableNodesCnt:e.reordableNodesCnt,totalRulesCnt:e.totalRulesCnt,onDragStart:e.onDragStart,isDraggingTempo:e.isDraggingTempo,children1:e.children1,parentField:e.parentField,parentReordableNodesCnt:e.parentReordableNodesCnt}))},rule_group_ext:function(e){return k.createElement(ls,(0,Pl.Z)({},Fs(e),{id:e.id,groupId:e.groupId,path:e.path,actions:e.actions,config:e.config,reordableNodesCnt:e.reordableNodesCnt,totalRulesCnt:e.totalRulesCnt,onDragStart:e.onDragStart,isDraggingTempo:e.isDraggingTempo,children1:e.children1,parentField:e.parentField,parentReordableNodesCnt:e.parentReordableNodesCnt}))},switch_group:function(e){return k.createElement(vs,(0,Pl.Z)({},Fs(e),{id:e.id,groupId:e.groupId,path:e.path,actions:e.actions,config:e.config,reordableNodesCnt:e.reordableNodesCnt,totalRulesCnt:e.totalRulesCnt,onDragStart:e.onDragStart,isDraggingTempo:e.isDraggingTempo,children1:e.children1,parentField:null,parentReordableNodesCnt:e.parentReordableNodesCnt}))},case_group:function(e){return k.createElement(bs,(0,Pl.Z)({},Fs(e),{id:e.id,groupId:e.groupId,path:e.path,actions:e.actions,config:e.config,reordableNodesCnt:e.reordableNodesCnt,totalRulesCnt:e.totalRulesCnt,onDragStart:e.onDragStart,isDraggingTempo:e.isDraggingTempo,children1:e.children1,parentField:null,parentReordableNodesCnt:e.parentReordableNodesCnt}))}},Cs=function(e){(0,C.Z)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,L.Z)(t);if(r){var o=(0,L.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,E.Z)(this,e)});function o(){return(0,j.Z)(this,o),n.apply(this,arguments)}return(0,F.Z)(o,[{key:"render",value:function(){var e,t=this.props,r=t.type,n=(0,kl.Z)(t,Os),o="array"==(null===(e=n.properties)||void 0===e?void 0:e.get("mode"))?"_ext":"",i=n.config.settings.renderItem,a=Ss[r+o];return i?i(js(js({},n),{},{type:r,itemComponent:a}),n.config.ctx):a?a(n):null}}]),o}(k.PureComponent);Cs.propTypes={config:qa().object.isRequired,id:qa().string.isRequired,groupId:qa().string,type:qa().oneOf(["rule","group","rule_group","switch_group","case_group"]).isRequired,path:qa().any.isRequired,properties:qa().any.isRequired,children1:qa().any,actions:qa().object.isRequired,reordableNodesCnt:qa().number,onDragStart:qa().func,parentField:qa().string,isDraggingTempo:qa().bool,isParentLocked:qa().bool};var Es=Na.TreeUtils,Ls=Es.getTotalReordableNodesCountInTree,ks=Es.getTotalRulesCountInTree,Ps=Na.DefaultUtils,_s=Ps.createListFromArray,Vs=Ps.emptyProperies,Zs=function(e){(0,C.Z)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,L.Z)(t);if(r){var o=(0,L.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,E.Z)(this,e)});function o(e){var t;return(0,j.Z)(this,o),(t=n.call(this,e)).pureShouldComponentUpdate=yl((0,S.Z)(t)),t._updPath(e),t}return(0,F.Z)(o,[{key:"shouldComponentUpdate",value:function(e,t){var r=this.props,n=this.pureShouldComponentUpdate(e,t);if(n){var o=[];for(var i in e)e[i]!==r[i]&&"__isInternalValueChange"!=i&&o.push(i);o.length||(n=!1),1==o.length&&"tree"==o[0]&&e.__isInternalValueChange&&(n=!1)}return n}},{key:"_updPath",value:function(e){var t=e.tree.get("id");this.path=_s([t])}},{key:"render",value:function(){var e=this.props.tree,t=e.get("type"),r="switch_group"==t,n=r?null:Ls(e),o=r?null:ks(e),i=e.get("id");return k.createElement(Cs,{key:i,id:i,path:this.path,type:t,properties:e.get("properties")||Vs(),config:this.props.config,actions:this.props.actions,children1:e.get("children1")||Vs(),reordableNodesCnt:n,totalRulesCnt:o,parentReordableNodesCnt:0,onDragStart:this.props.onDragStart})}}]),o}(k.Component);Zs.propTypes={tree:qa().any.isRequired,config:qa().object.isRequired,actions:qa().object.isRequired,onDragStart:qa().func};const Rs=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=(0,Ba.$j)((function(e){return{dragging:e.dragging,dragStart:e.dragStart,mousePos:e.mousePos}}),{setDragStart:Ya,setDragProgress:Ja,setDragEnd:Ha},null,{context:Ma})(Al(e,t));return r.displayName="ConnectedSortableContainer",r}(Zs);function Ds(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var xs=Na.clone,Ts=Na.ConfigUtils.getFieldConfig,As=Na.RuleUtils,Ns=As.getFieldPath,Is=As.getFieldPathLabels,qs=As.getWidgetForFieldOp,Ms=function(e){(0,C.Z)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,L.Z)(t);if(r){var o=(0,L.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,E.Z)(this,e)});function o(e){var t;return(0,j.Z)(this,o),t=n.call(this,e),bl((0,S.Z)(t)),t.onPropsChanged(e),t}return(0,F.Z)(o,[{key:"onPropsChanged",value:function(e){var t=this.props,r=!this.items||["config","field","operator","isFuncArg","parentField"].map((function(r){return e[r]!==t[r]})).filter((function(e){return e})).length>0,n=!this.meta||["config","field","operator","value","placeholder","isFuncArg","parentField"].map((function(r){return e[r]!==t[r]})).filter((function(e){return e})).length>0;r&&(this.items=this.getItems(e)),n&&(this.meta=this.getMeta(e))}},{key:"getItems",value:function(e){var t=e.config,r=e.field,n=e.operator,o=e.parentField,i=e.isFuncArg,a=e.fieldDefinition,l=t.settings.canCompareFieldWithField,u=t.settings.fieldSeparator,s="string"==typeof o?o.split(u):o,c=o?Ts(t,o):null,p=o?c&&c.subfields:t.fields,f=this.filterFields(t,p,r,o,s,n,l,i,a);return this.buildOptions(s,t,f,s)}},{key:"getMeta",value:function(e){var t=e.config,r=e.field,n=(e.operator,e.value),o=e.placeholder,i=e.isFuncArg,a=e.parentField,l=t.settings,u=l.fieldPlaceholder,s=l.fieldSeparatorDisplay,c=n,p=!!n,f=Ts(t,r).widgets.field,d=f&&f.widgetProps||{},g=p?null:i&&o||d.valuePlaceholder||u,v=p?Ts(t,c):null,h=v||{},m=Ns(c,t),y=Ns(c,t,!0),b=this.getFieldLabel(v,c,t),O=Is(c,t),w=O?O.join(s):null;return(w==b||a)&&(w=null),{placeholder:g,selectedKey:c,selectedKeys:m,selectedPath:y,selectedLabel:b,selectedOpts:h,selectedAltLabel:h.label2,selectedFullLabel:w}}},{key:"filterFields",value:function(e,t,r,n,o,i,a,l,u){t=xs(t);var s,c=e.settings.fieldSeparator,p=Ts(e,r),f=qs(e,r,i,"value");return e.widgets[f],s=l&&u?u.type:p.type,function t(n,o){for(var u in n){var f=n[u].subfields,d=(o||[]).concat(u),g=d.join(c),v=Ts(e,g);if(v)if("!struct"==v.type||"!group"==v.type)0==t(f,d)&&delete n[u];else{var h=v.type==s&&(!!l||g!=r),m=a||e.settings.canCompareFieldWithField;m&&(h=h&&m(r,p,g,v,i)),h||delete n[u]}else delete n[u]}return Ml()(n).length}(t,o||[]),t}},{key:"buildOptions",value:function(e,t,r){var n=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(!r)return null;var a=t.settings,l=a.fieldSeparator,u=a.fieldSeparatorDisplay,s=o?o.join(l)+l:"";return Ml()(r).map((function(a){var l=r[a],c=n.getFieldLabel(l,a,t),p=Is(a,t).join(u);(p==c||e)&&(p=null);var f=l.label2,d=l.tooltip,g=(o||[]).concat(a);if(!l.hideForCompare)return"!struct"==l.type||"!group"==l.type?{key:a,path:s+a,label:c,fullLabel:p,altLabel:f,tooltip:d,items:n.buildOptions(e,t,l.subfields,g,c)}:{key:a,path:s+a,label:c,fullLabel:p,altLabel:f,tooltip:d,grouplabel:i}})).filter((function(e){return!!e}))}},{key:"getFieldLabel",value:function(e,t,r){if(!t)return null;var n=r.settings.fieldSeparator,o=r.settings.maxLabelsLength,i=Array.isArray(t)?t:t.split(n),a=e.label||ut()(i);return ll(a,o)}},{key:"render",value:function(){var e=this.props,t=e.config,r=e.customProps,n=e.setValue,o=e.readonly,i=e.id,a=e.groupId,l=t.settings.renderField,u=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ds(Object(r),!0).forEach((function(t){(0,P.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ds(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({config:t,customProps:r,setField:n,readonly:o,items:this.items,id:i,groupId:a},this.meta);return l(u,t.ctx)}}]),o}(k.Component);function Ws(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}Ms.propTypes={id:qa().string,groupId:qa().string,setValue:qa().func.isRequired,config:qa().object.isRequired,field:qa().string.isRequired,value:qa().string,operator:qa().string,customProps:qa().object,readonly:qa().bool,parentField:qa().string,fieldDefinition:qa().object,isFuncArg:qa().bool};var Bs=Na.clone,Gs=Na.ConfigUtils,zs=Gs.getFieldConfig,Us=Gs.getFuncConfig,$s=Na.RuleUtils,Js=$s.getFieldPath,Ys=$s.getFuncPathLabels,Hs=$s.getWidgetForFieldOp,Ks=function(e){(0,C.Z)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,L.Z)(t);if(r){var o=(0,L.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,E.Z)(this,e)});function o(e){var t;return(0,j.Z)(this,o),t=n.call(this,e),bl((0,S.Z)(t)),t.onPropsChanged(e),t}return(0,F.Z)(o,[{key:"onPropsChanged",value:function(e){var t=this.props,r=!this.items||["config","field","operator","isFuncArg"].map((function(r){return e[r]!==t[r]})).filter((function(e){return e})).length>0;(!this.meta||["config","field","value"].map((function(r){return e[r]!==t[r]})).filter((function(e){return e})).length>0)&&(this.meta=this.getMeta(e)),r&&(this.items=this.getItems(e))}},{key:"getItems",value:function(e){var t=e.config,r=e.field,n=e.operator,o=e.parentFuncs,i=e.fieldDefinition,a=e.isFuncArg,l=t.settings.canUseFuncForField,u=this.filterFuncs(t,t.funcs,r,n,l,o,a,i);return this.buildOptions(t,u)}},{key:"getMeta",value:function(e){var t=e.config,r=e.field,n=e.value,o=t.settings,i=o.funcPlaceholder,a=o.fieldSeparatorDisplay,l=n,u=!!n,s=zs(t,r).widgets.field,c=(s&&s.widgetProps,u?null:i),p=u?Us(t,l):null,f=p||{},d=Js(l,t),g=Js(l,t,!0),v=this.getFuncLabel(p,l,t),h=Ys(l,t),m=h?h.join(a):null;return m==v&&(m=null),{placeholder:c,selectedKey:l,selectedKeys:d,selectedPath:g,selectedLabel:v,selectedOpts:f,selectedFullLabel:m}}},{key:"filterFuncs",value:function(e,t,r,n,o,i,a,l){t=Bs(t);var u,s=e.settings.fieldSeparator,c=zs(e,r),p=c,f=Hs(e,r,n,"value");if(a&&l)p=l,u=l.type;else if(f){var d=e.widgets[f].type;u=d}else u=c.type;return function t(a,l){for(var f in a){var d=a[f].subfields,g=(l||[]).concat(f),v=g.join(s),h=Us(e,v);if("!struct"==h.type)0==t(d,g)&&delete a[f];else{var m=h.returnType==u;p.funcs&&(m=m&&p.funcs.includes(v)),o&&(m=m&&o(r,c,v,h,n)),!h.allowSelfNesting&&i&&i.map((function(e){var t=(0,_.Z)(e,2),r=t[0];return t[1],r})).includes(v)&&(m=!1),m||delete a[f]}}return Ml()(a).length}(t,[]),t}},{key:"buildOptions",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!t)return null;var i=e.settings,a=i.fieldSeparator,l=i.fieldSeparatorDisplay,u=n?n.join(a)+a:"";return Ml()(t).map((function(i){var a=t[i],s=r.getFuncLabel(a,i,e),c=Ys(i,e).join(l);c==s&&(c=null);var p=a.tooltip,f=(n||[]).concat(i);return"!struct"==a.type?{key:i,path:u+i,label:s,fullLabel:c,tooltip:p,items:r.buildOptions(e,a.subfields,f,s)}:{key:i,path:u+i,label:s,fullLabel:c,tooltip:p,grouplabel:o}}))}},{key:"getFuncLabel",value:function(e,t,r){if(!t)return null;var n=r.settings.fieldSeparator,o=r.settings.maxLabelsLength,i=Array.isArray(t)?t:t.split(n),a=e.label||ut()(i);return ll(a,o)}},{key:"render",value:function(){var e=this.props,t=e.config,r=e.customProps,n=e.setValue,o=e.readonly,i=e.id,a=e.groupId,l=t.settings.renderFunc,u=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ws(Object(r),!0).forEach((function(t){(0,P.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ws(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({config:t,customProps:r,readonly:o,setField:n,items:this.items,id:i,groupId:a},this.meta);return l(u,t.ctx)}}]),o}(k.Component);function Qs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,L.Z)(e);if(t){var o=(0,L.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,E.Z)(this,r)}}Ks.propTypes={id:qa().string,groupId:qa().string,config:qa().object.isRequired,field:qa().string.isRequired,operator:qa().string,customProps:qa().object,value:qa().string,setValue:qa().func.isRequired,readonly:qa().bool,parentFuncs:qa().array,fieldDefinition:qa().object,isFuncArg:qa().bool};var Xs=Na.ConfigUtils.getFuncConfig,ec=Na.FuncUtils,tc=ec.setFunc,rc=ec.setArgValue,nc=ec.setArgValueSrc,oc=function(e){(0,C.Z)(r,e);var t=Qs(r);function r(e){var n;return(0,j.Z)(this,r),(n=t.call(this,e)).setFunc=function(e){n.props.setValue(tc(n.props.value,e,n.props.config))},n.setArgValue=function(e,t){var r=n.props.config,o=n.meta.funcDefinition.args[e];n.props.setValue(rc(n.props.value,e,t,o,r))},n.setArgValueSrc=function(e,t){var r=n.props.config,o=n.meta.funcDefinition.args[e];n.props.setValue(nc(n.props.value,e,t,o,r))},n.renderFuncSelect=function(){var e=n.props,t=e.config,r=e.field,o=e.operator,i=e.customProps,a=e.value,l=e.readonly,u=e.parentFuncs,s=e.id,c=e.groupId,p=e.isFuncArg,f=e.fieldDefinition,d={value:a?a.get("func"):null,setValue:n.setFunc,config:t,field:r,operator:o,customProps:i,readonly:l,parentFuncs:u,isFuncArg:p,fieldDefinition:f,id:s,groupId:c},g=t.settings,v=g.showLabels,h=g.funcLabel,m=v?k.createElement("label",{className:"rule--label"},h):null;return k.createElement(Hl,{key:"func",className:"rule--func"},m,k.createElement(Ks,d))},n.renderArgLabel=function(e,t){var r=t.valueSources,o=t.type,i=t.showPrefix,a=t.label,l=n.props.config,u=r&&1==r.length&&"const"==r[0];return l.settings.showLabels||"boolean"!=o&&!u||!i?null:k.createElement(Hl,{className:"rule--func--arg-label"},a||e)},n.renderArgLabelSep=function(e,t){var r=t.valueSources,o=t.type,i=t.showPrefix,a=n.props.config,l=r&&1==r.length&&"const"==r[0];return a.settings.showLabels||"boolean"!=o&&!l||!i?null:k.createElement(Hl,{className:"rule--func--arg-label-sep"},":")},n.renderArgVal=function(e,t,r){var o=n.props,i=o.config,a=o.field,l=(o.operator,o.value),u=o.readonly,s=o.parentFuncs,c=o.id,p=o.groupId,f=l?l.getIn(["args",t]):null,d=f?f.get("value"):void 0,g=1==r.valueSources.length?r.valueSources[0]:void 0,v={config:i,fieldFunc:e,fieldArg:t,leftField:a,operator:null,value:d,valueSrc:f?f.get("valueSrc")||g||"value":g,setValue:n.setArgValue,setValueSrc:n.setArgValueSrc,funcKey:e,argKey:t,argDefinition:r,readonly:u,parentFuncs:s,id:c,groupId:p};return k.createElement(Hl,{className:"rule--func--arg-value"},k.createElement(ic,v))},n.renderArgSep=function(e,t,r,n){var o=n.renderSeps;return r?k.createElement(Hl,{className:"rule--func--arg-sep"},o?o[r-1]:", "):null},n.renderBracketBefore=function(e){var t=e.renderBrackets;return k.createElement(Hl,{key:"before_args",className:"rule--func--bracket-before"},t?t[0]:"(")},n.renderBracketAfter=function(e){var t=e.renderBrackets;return k.createElement(Hl,{key:"after_args",className:"rule--func--bracket-after"},t?t[1]:")")},n.renderFuncArgs=function(){var e=n.meta,t=e.funcDefinition,r=e.funcKey;if(!r)return null;var o=t.args;return o?k.createElement(k.Fragment,null,n.renderBracketBefore(t),k.createElement(Hl,{key:"args",className:"rule--func--args"},Object.keys(o).map((function(e,i){return k.createElement(Hl,{key:"arg-".concat(e,"-").concat(i),className:"rule--func--arg"},n.renderArgSep(e,o[e],i,t),n.renderArgLabel(e,o[e]),n.renderArgLabelSep(e,o[e]),n.renderArgVal(r,e,o[e]))}))),n.renderBracketAfter(t)):null},bl((0,S.Z)(n)),n.onPropsChanged(e),n}return(0,F.Z)(r,[{key:"onPropsChanged",value:function(e){var t=this.props;(!this.meta||["config","field","operator","value"].map((function(r){return e[r]!==t[r]})).filter((function(e){return e})).length>0)&&(this.meta=this.getMeta(e))}},{key:"getMeta",value:function(e){var t=e.config,r=(e.field,e.operator,e.value),n=r?r.get("func"):null;return{funcDefinition:n?Xs(t,n):null,funcKey:n}}},{key:"render",value:function(){return k.createElement(Hl,{className:"rule--func--wrapper"},this.renderFuncSelect(),this.renderFuncArgs())}}]),r}(k.Component);oc.propTypes={id:qa().string,groupId:qa().string,config:qa().object.isRequired,field:qa().string.isRequired,operator:qa().string,customProps:qa().object,value:qa().object,setValue:qa().func.isRequired,readonly:qa().bool,parentFuncs:qa().array,fieldDefinition:qa().object,isFuncArg:qa().bool};var ic=function(e){(0,C.Z)(r,e);var t=Qs(r);function r(){var e;(0,j.Z)(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).setValue=function(t,r,n){var o=e.props;(0,o.setValue)(o.argKey,r)},e.setValueSrc=function(t,r,n){var o=e.props;(0,o.setValueSrc)(o.argKey,r)},e}return(0,F.Z)(r,[{key:"render",value:function(){var e=this.props,t=e.funcKey,r=e.argKey,n=e.parentFuncs;return k.createElement(Su,(0,Pl.Z)({},this.props,{setValue:this.setValue,setValueSrc:this.setValueSrc,isFuncArg:!0,parentFuncs:[].concat((0,ee.Z)(n||[]),[[t,r]])}))}}]),r}(k.PureComponent);ic.propTypes={funcKey:qa().string.isRequired,argKey:qa().string.isRequired,setValue:qa().func.isRequired,setValueSrc:qa().func.isRequired,readonly:qa().bool,parentFuncs:qa().array,id:qa().string,groupId:qa().string};const ac=function(e){var t=e.value,r=e.setValue,n=(e.config,e.labelYes),o=e.labelNo,i=e.readonly,a=e.customProps,l=void 0===a?{}:a,u=l.radioYes||{},s=l.radioNo||{},c=function(e){return r("true"==e.target.value)};return k.createElement(k.Fragment,null,k.createElement("input",(0,Pl.Z)({type:"radio",value:!0,checked:!!t,disabled:i,onChange:c},u))," ",n,k.createElement("input",(0,Pl.Z)({type:"radio",value:!1,checked:!t,disabled:i,onChange:c},s))," ",o)},lc=function(e){var t=e.value,r=e.setValue,n=(e.config,e.readonly),o=e.placeholder,i=e.maxLength,a=e.customProps,l=t||"";return k.createElement("input",(0,Pl.Z)({type:"text",value:l,placeholder:o,disabled:n,onChange:function(e){var t=e.target.value;""===t&&(t=void 0),r(t)},maxLength:i},a))},uc=function(e){var t=e.value,r=e.setValue,n=(e.config,e.readonly),o=e.placeholder,i=e.maxLength,a=(e.maxRows,e.fullWidth),l=e.customProps,u=t||"";return k.createElement("textarea",(0,Pl.Z)({value:u,placeholder:o,disabled:n,onChange:function(e){var t=e.target.value;""===t&&(t=void 0),r(t)},maxLength:i,style:{width:a?"100%":void 0}},l))};Na.moment;const sc=function(e){var t=e.value,r=e.setValue,n=(e.config,e.valueFormat,e.readonly),o=e.customProps;return k.createElement("input",(0,Pl.Z)({type:"date",value:t||"",disabled:n,onChange:function(e){var t=e.target.value;""==t&&(t=void 0),r(t)}},o))},cc=function(e){var t=e.value,r=e.setValue,n=(e.config,e.valueFormat,e.use12Hours,e.readonly),o=e.customProps;return k.createElement("input",(0,Pl.Z)({type:"time",value:t||"",disabled:n,onChange:function(e){var t=e.target.value;""==t&&(t=void 0),r(t)}},o))};var pc=Na.moment;const fc=function(e){var t,r=e.value,n=e.setValue,o=(e.config,e.valueFormat),i=(e.use12Hours,e.readonly),a=e.customProps;return t=r?pc(r).format("YYYY-MM-DDTHH:mm"):"",k.createElement("input",(0,Pl.Z)({type:"datetime-local",value:t,disabled:i,onChange:function(e){var t=e.target.value;t=""==t?void 0:pc(new Date(t)).format(o),n(t)}},a))};var dc=Na.ListUtils.mapListValues;const gc=function(e){var t=e.listValues,r=e.value,n=e.setValue,o=(e.allowCustomValues,e.readonly),i=e.customProps;return k.createElement("select",(0,Pl.Z)({multiple:!0,onChange:function(e){return n(function(e){for(var t=[],r=e.options,n=0;n<r.length;n++){var o=r[n];o.selected&&t.push(o.value)}return t.length||(t=void 0),t}(e.target))},value:r,disabled:o},x()(i,["showSearch","input","showCheckboxes"])),dc(t,(function(e){var t=e.title,r=e.value;return k.createElement("option",{key:r,value:r},t)})))};var vc=Na.ListUtils.mapListValues;const hc=function(e){var t=e.listValues,r=e.value,n=e.setValue,o=(e.allowCustomValues,e.readonly),i=e.customProps,a=null!=r;return k.createElement("select",(0,Pl.Z)({onChange:function(e){return n(e.target.value)},value:a?r:"",disabled:o},x()(i,["showSearch","input"])),!a&&k.createElement("option",{disabled:!0,value:""}),vc(t,(function(e){var t=e.title,r=e.value;return k.createElement("option",{key:r,value:r},t)})))},mc=function(e){var t=e.value,r=e.setValue,n=(e.config,e.readonly),o=e.min,i=e.max,a=e.step,l=e.placeholder,u=e.customProps,s=null==t?"":t;return k.createElement("input",(0,Pl.Z)({type:"number",value:s,placeholder:l,disabled:n,min:o,max:i,step:a,onChange:function(e){var t=e.target.value;t=""===t||null===t?void 0:Number(t),r(t)}},u))},yc=function(e){var t=e.value,r=e.setValue,n=(e.config,e.readonly),o=e.min,i=e.max,a=e.step,l=e.placeholder,u=e.customProps,s=void 0===u?{}:u,c=s.input||{},p=s.slider||s,f=function(e){var t=e.target.value;t=""===t||null===t?void 0:Number(t),r(t)},d=null==t?"":t;return k.createElement("div",{style:{display:"inline-flex"}},k.createElement("input",(0,Pl.Z)({key:"number",type:"number",value:d,placeholder:l,disabled:n,min:o,max:i,step:a,onChange:f},c)),k.createElement("input",(0,Pl.Z)({key:"range",type:"range",value:d,disabled:n,min:o,max:i,step:a,onChange:f},p)))},bc=function(e){var t=e.items,r=e.setField,n=e.selectedKey,o=e.readonly,i=null!=n;return k.createElement("select",{onChange:function(e){return r(e.target.value)},value:i?n:"",disabled:o},!i&&k.createElement("option",{disabled:!0,value:""}),function e(t){return t.map((function(t){var r=t.items,n=t.path,o=t.label,i=t.disabled;return r?k.createElement("optgroup",{disabled:i,key:n,label:o},e(r)):k.createElement("option",{disabled:i,key:n,value:n},o)}))}(t))},Oc=function(e){var t,r=e.id,n=e.not,o=e.setNot,i=e.conjunctionOptions,a=e.setConjunction,l=e.disabled,u=e.readonly,s=e.config,c=e.showNot,p=e.notLabel,f=Object.keys(i).length,d=l,g=s.settings.forceShowConj||f>1&&!d,v=function(e){return a(e.target.value)};return[c&&(t="not",[k.createElement("input",{key:r+t,type:"checkbox",id:r+t,checked:n,disabled:u,onChange:function(e){return o(e.target.checked)}}),k.createElement("label",{key:r+t+"label",htmlFor:r+t},p||"NOT")]),g&&Object.keys(i).map((function(e){var t=i[e],r=t.id,n=t.name,o=t.label,s=t.checked,c=a.isDummyFn?"__dummy":"";return!u&&!l||s?[k.createElement("input",{key:r+c,type:"radio",id:r+c,name:n+c,checked:s,disabled:u||l,value:e,onChange:v}),k.createElement("label",{key:r+c+"label",htmlFor:r+c},o)]:null}))]},wc=function(e){var t=e.type,r=e.label,n=e.onClick,o=e.readonly,i=(e.config,r||{addRuleGroup:"+",addRuleGroupExt:"+",delGroup:"x",delRuleGroup:"x",delRule:"x"}[t]);return k.createElement("button",{onClick:n,type:"button",disabled:o},i)},jc=function(e){var t=e.children;return e.config,k.createElement(k.Fragment,null,t)},Fc=function(e){e.config;var t=e.valueSources,r=e.valueSrc,n=(e.title,e.setValueSrc),o=e.readonly;return k.createElement("select",{onChange:function(e){return n(e.target.value)},value:r,disabled:o},function(e){return e.map((function(e){var t=(0,_.Z)(e,2),r=t[0],n=t[1];return k.createElement("option",{key:r,value:r},n.label)}))}(t))},Sc=function(e){var t=e.value,r=e.setValue,n=e.label,o=e.id,i=(e.config,e.type);return[k.createElement("input",{key:o+i,type:"checkbox",id:o+i,checked:!!t,onChange:function(e){return r(e.target.checked)}}),k.createElement("label",{key:o+i+"label",htmlFor:o+i},n)]},Cc=function(e){var t=e.onOk,r=(e.okText,e.cancelText,e.title);confirm(r)&&t()};var Ec=function(e){return e.config,e.children};var Lc=function(e){(0,C.Z)(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,L.Z)(t);if(r){var o=(0,L.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,E.Z)(this,e)});function o(){var e;(0,j.Z)(this,o);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return(e=n.call.apply(n,[this].concat(r))).handleChange=function(t){e.props.setOption("proximity",parseInt(t))},e}return(0,F.Z)(o,[{key:"render",value:function(){var e=this.props,t=e.defaults,r=e.options,n=e.config,o=e.optionLabel,i=e.optionPlaceholder,a=e.customProps,l=e.minProximity,u=e.maxProximity,s=e.optionTextBefore,c=e.readonly,p=n.settings,f=n.widgets,d=n.ctx,g=t?t.proximity:void 0,v=p.showLabels,h=r.get("proximity",g),m=su()(l,u+1).map((function(e){return{title:e,value:e}})),y=f.select.factory,b=function(e){return y(e,d)};return k.createElement("div",{className:"operator--PROXIMITY"},k.createElement("div",{className:"operator--options"},v&&k.createElement("label",{className:"rule--label"},o),!v&&s&&k.createElement("div",{className:"operator--options--sep"},k.createElement("span",null,s)),k.createElement(b,(0,Pl.Z)({config:n,value:h,listValues:m,setValue:this.handleChange,readonly:c,placeholder:i},a))),k.createElement("div",{className:"operator--widgets"},this.props.children))}}]),o}(k.PureComponent);function kc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kc(Object(r),!0).forEach((function(t){(0,P.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}Lc.propTypes={config:qa().object.isRequired,setOption:qa().func.isRequired,options:qa().any.isRequired,minProximity:qa().number,maxProximity:qa().number,optionPlaceholder:qa().string,optionTextBefore:qa().string,optionLabel:qa().string,customProps:qa().object,readonly:qa().bool},Lc.defaultProps={customProps:{},minProximity:2,maxProximity:10,optionPlaceholder:"Select words between",optionLabel:"Words between",optionTextBefore:null};var _c={conjunctions:Pc({},Ei.conjunctions),operators:Pc(Pc({},Ei.operators),{},{proximity:Pc(Pc({},Ei.operators.proximity),{},{options:Pc(Pc({},Ei.operators.proximity.options),{},{factory:function(e,t){return(0,t.RCE)(t.O.ProximityOperator,e)}})})}),widgets:{text:Pc(Pc({},Ei.widgets.text),{},{factory:function(e,t){return(0,t.RCE)(t.W.VanillaTextWidget,e)}}),textarea:Pc(Pc({},Ei.widgets.textarea),{},{factory:function(e,t){return(0,t.RCE)(t.W.VanillaTextAreaWidget,e)}}),number:Pc(Pc({},Ei.widgets.number),{},{factory:function(e,t){return(0,t.RCE)(t.W.VanillaNumberWidget,e)}}),slider:Pc(Pc({},Ei.widgets.slider),{},{factory:function(e,t){return(0,t.RCE)(t.W.VanillaSliderWidget,e)}}),select:Pc(Pc({},Ei.widgets.select),{},{factory:function(e,t){return(0,t.RCE)(t.W.VanillaSelectWidget,e)}}),multiselect:Pc(Pc({},Ei.widgets.multiselect),{},{factory:function(e,t){return(0,t.RCE)(t.W.VanillaMultiSelectWidget,e)}}),date:Pc(Pc({},Ei.widgets.date),{},{factory:function(e,t){return(0,t.RCE)(t.W.VanillaDateWidget,e)}}),time:Pc(Pc({},Ei.widgets.time),{},{factory:function(e,t){return(0,t.RCE)(t.W.VanillaTimeWidget,e)}}),datetime:Pc(Pc({},Ei.widgets.datetime),{},{factory:function(e,t){return(0,t.RCE)(t.W.VanillaDateTimeWidget,e)}}),boolean:Pc(Pc({},Ei.widgets.boolean),{},{factory:function(e,t){return(0,t.RCE)(t.W.VanillaBooleanWidget,e)}}),field:Pc(Pc({},Ei.widgets.field),{},{factory:function(e,t){return(0,t.RCE)(t.W.ValueFieldWidget,e)},customProps:{showSearch:!0}}),func:Pc(Pc({},Ei.widgets.func),{},{factory:function(e,t){return(0,t.RCE)(t.W.FuncWidget,e)},customProps:{}}),case_value:Pc(Pc({},Ei.widgets.case_value),{},{factory:function(e,t){return(0,t.RCE)(t.W.VanillaTextWidget,e)}})},types:Pc(Pc({},Ei.types),{},{select:Pc(Pc({},Ei.types.select),{},{widgets:Pc(Pc({},Ei.types.select.widgets),{},{select:Pc(Pc({},Ei.types.select.widgets.select),{},{widgetProps:{customProps:{showSearch:!0}}})})})}),settings:Pc(Pc({},Ei.settings),{},{renderField:function(e,t){return(0,t.RCE)(t.W.VanillaFieldSelect,e)},renderOperator:function(e,t){return(0,t.RCE)(t.W.VanillaFieldSelect,e)},renderFunc:function(e,t){return(0,t.RCE)(t.W.VanillaFieldSelect,e)},renderConjs:function(e,t){return(0,t.RCE)(t.W.VanillaConjs,e)},renderSwitch:function(e,t){return(0,t.RCE)(t.W.VanillaSwitch,e)},renderButton:function(e,t){return(0,t.RCE)(t.W.VanillaButton,e)},renderButtonGroup:function(e,t){return(0,t.RCE)(t.W.VanillaButtonGroup,e)},renderProvider:function(e,t){return(0,t.RCE)(t.W.VanillaProvider,e)},renderValueSources:function(e,t){return(0,t.RCE)(t.W.VanillaValueSources,e)},renderConfirm:function(e,t){return(0,t.W.vanillaConfirm)(e)},renderSwitchPrefix:"Conditions",customFieldSelectProps:{showSearch:!0},defaultSliderWidth:"200px",defaultSelectWidth:"200px",defaultSearchWidth:"100px",defaultMaxRows:5,renderSize:"small",maxLabelsLength:100,showLock:!1,showNot:!0,forceShowConj:!1,groupActionsPosition:"topRight"}),ctx:Pc(Pc({},Ei.ctx),{},{W:Pc({},b),O:Pc({},O),RCE:function(e,t){return k.createElement(e,t)}})};const Vc=_c=Na.ConfigMixins.removeMixins(_c,["rangeslider","treeselect","treemultiselect"]);var Zc=r(77837),Rc=r.n(Zc);function Dc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Dc(Object(r),!0).forEach((function(t){(0,P.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Tc=Na.Autocomplete,Ac=Tc.mergeListValues,Nc=Tc.listValueToOption,Ic=Tc.optionToListValue,qc=Tc.optionsToListValues,Mc=Na.ListUtils,Wc=Mc.mapListValues,Bc=Mc.listValuesToArray,Gc=Mc.getListValue,zc=Mc.makeCustomListValue,Uc=Mc.searchListValue;function $c(e){return new Promise((function(t){setTimeout(t,e)}))}Mc.getItemInListValues;const Jc=function(e,t){var r=e.asyncFetch,n=e.useLoadMore,o=e.useAsyncSearch,i=e.forceAsyncSearch,a=e.asyncListValues,l=e.listValues,u=e.allowCustomValues,s=e.value,c=e.setValue,p=e.placeholder,f=e.config,d=t.debounceTimeout,g=t.multiple,v=t.uif,h=["LOAD_MORE","LOADING_MORE"],m="Load more...",y="Loading more...",b=i?"Type to search":p,O=k.useState(!1),w=(0,_.Z)(O,2),j=w[0],F=w[1],S=k.useState(void 0),C=(0,_.Z)(S,2),E=C[0],L=C[1],P=k.useState(0),V=(0,_.Z)(P,2),Z=V[0],R=V[1],D=k.useState(!1),x=(0,_.Z)(D,2),T=x[0],A=x[1],N=k.useState(""),I=(0,_.Z)(N,2),q=I[0],M=I[1],W=k.useState(void 0),B=(0,_.Z)(W,2),G=B[0],z=B[1],U=k.useRef(0),$=k.useRef(0),J=k.useRef(!1),Y=Bc(a),H=r?a?Ac(G,Y,!0):G:l,K=r?G:l;u&&q&&!Uc(q,G)&&(K=Ac(K,[zc(q)],!0)),!r||G||!a||q||j||"antd"!==v||(K=H),r&&!u&&a&&"mui"===v&&(K=Ac(K,Y,!0,!0));var Q=Z>0,X=j&&r&&void 0===G&&(!i||q),te=X&&Q,re=!te&&H&&H.length>0&&E&&E.hasMore&&(E.filter||"")===q,ne=!Q&&re,oe=Wc(K,Nc),ie=null!=s,ae=!g&&ie?Gc(s,H):null,le=function(){var e=(0,Yo.Z)(Ko().mark((function e(){var t,o,i,a,l,u,s,c,p,d,g,v,h,m,y=arguments;return Ko().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:null,!(o=y.length>1&&void 0!==y[1]&&y[1])&&E&&L(void 0),i=o&&G?G.length:0,a=o&&E||!n&&{pageSize:0},l=++U.current,e.next=8,r.call(null==f?void 0:f.ctx,t,i,a);case 8:if(u=e.sent,U.current==l&&$.current){e.next=12;break}return e.abrupt("return",null);case 12:return s=u&&u.values?u:{values:u},c=s.values,p=s.hasMore,d=s.meta,g=Bc(c),o?(h=Ac(G,g,!1),v=h.length>G.length):(h=g,n&&(v=h.length>0)),(m=null!=p||null!=d||null!=v?xc(xc(xc(xc({},null!=v?{hasMore:v}:{}),null!=p?{hasMore:p}:{}),null!=d?d:{}),{},{filter:t}):void 0)&&L(m),e.abrupt("return",h);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ue=function(){var e=(0,Yo.Z)(Ko().mark((function e(){var t,r,n,o=arguments;return Ko().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:null,r=o.length>1&&void 0!==o[1]&&o[1],R((function(e){return e+1})),A(r),e.next=6,le(t,r);case 6:if(n=e.sent,$.current){e.next=9;break}return e.abrupt("return");case 9:null!=n&&z(n),R((function(e){return e-1})),A(!1);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),se=k.useCallback(Rc()(ue,d),[]);k.useEffect((function(){return $.current++,X&&0==Z&&0==U.current&&(0,Yo.Z)(Ko().mark((function e(){return Ko().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue();case 2:case"end":return e.stop()}}),e)})))(),function(){$.current--}}),[X]);var ce=function(){F(!0)},pe=function(){var e=(0,Yo.Z)(Ko().mark((function e(t){var r;return Ko().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=J.current)?(J.current=!1,g&&F(!1)):F(!1),"mui"!==v||r){e.next=6;break}return e.next=6,de(null,"","my-reset");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fe=function(){var e=(0,Yo.Z)(Ko().mark((function e(t,n,o){var i,a,l,p,f,d,h,m,y,b,O,w,F,S,C;return Ko().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=g&&"mui"===v&&"clear"===o,l=!g&&"mui"===v&&"clear"===o&&"change"===(null==t?void 0:t.type),"mui"===v&&(o=n,n=g?o.map((function(e){var t;return null!==(t=null==e?void 0:e.value)&&void 0!==t?t:e})):null!==(p=null===(f=o)||void 0===f?void 0:f.value)&&void 0!==p?p:o),d=g&&Array.isArray(o)&&o.map((function(e){return null==e?void 0:e.specialValue})).find((function(e){return!!e}))||(null===(i=o)||void 0===i?void 0:i.specialValue),g&&n&&!Array.isArray(n)&&(n=[].concat((0,ee.Z)(s||[]),[n]),o=null),!(a&&0===n.length&&q&&j||l)){e.next=8;break}return e.abrupt("return");case 8:if(h=g&&n.length&&n.length>(s||[]).length&&n[n.length-1]==q&&!Gc(q,G),"LOAD_MORE"!=d){e.next=16;break}return M(q),J.current=!0,e.next=14,ue(q,!0);case 14:e.next=32;break;case 16:if("LOADING_MORE"!=d){e.next=20;break}J.current=!0,e.next=32;break;case 20:if(!g){e.next=30;break}if(m=qc(n,H,u),y=(0,_.Z)(m,2),b=y[0],O=y[1],c(b,r?O:void 0),!h){e.next=28;break}return e.next=26,$c(0);case 26:return e.next=28,de(null,"","my-reset");case 28:e.next=32;break;case 30:w=Ic(n,H,u),F=(0,_.Z)(w,2),S=F[0],C=F[1],c(S,r?C:void 0);case 32:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),de=function(){var e=(0,Yo.Z)(Ko().mark((function e(t,r,n){var a,l;return Ko().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="mui"===v&&"reset"===n,(l=r)!==m&&l!==y&&!a){e.next=4;break}return e.abrupt("return");case 4:if(r==q){e.next=13;break}if(M(l),!o||i&&!l){e.next=12;break}return e.next=10,se(l);case 10:e.next=13;break;case 12:o&&i&&z([]);case 13:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}();return{options:oe,listValues:H,hasValue:ie,selectedListValue:ae,open:j,onOpen:ce,onClose:pe,onDropdownVisibleChange:function(e){e?ce():pe()},onChange:fe,inputValue:q,onInputChange:de,canShowLoadMore:ne,isInitialLoading:te,isLoading:Q,isLoadingMore:T,isSpecialValue:function(e){var t=(null==e?void 0:e.specialValue)||(null==e?void 0:e.value);return h.includes(t)},extendOptions:function(e){var t=(0,ee.Z)(e);return n&&(ne?t.push({specialValue:"LOAD_MORE",title:m}):T&&t.push({specialValue:"LOADING_MORE",title:y,disabled:!0})),t},getOptionSelected:function(e,t){if(null==t)return null;var r=null!=t.value?t.value:t;return e.value===r},getOptionDisabled:function(e){return e&&e.disabled},getOptionIsCustom:function(e){var t;if(null!=e&&e.isCustom)return!0;var r=null!==(t=null==e?void 0:e.value)&&void 0!==t?t:e,n=Gc(r,H);return(null==n?void 0:n.isCustom)||!1},getOptionLabel:function(e){if(null==e)return null;var t=null!=e.value?e:Nc(Gc(e,H));return!t&&e.specialValue?e.title:!t&&u?e:t?t.title||t.label:e},aPlaceholder:b}};function Yc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Hc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Yc(Object(r),!0).forEach((function(t){(0,P.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Kc=Hc(Hc({},Na),{},{ReactUtils:y})},40164:(e,t,r)=>{var n={"./es-us":88218,"./es-us.js":88218,"./ru":31313,"./ru.js":31313};function o(e){var t=i(e);return r(t)}function i(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=i,e.exports=o,o.id=40164}}]);
//# sourceMappingURL=753.bundle.js.map